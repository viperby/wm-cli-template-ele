{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GaeaProject\\jpn_medical_web\\pages\\main\\patients\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\pages\\main\\patients\\index.vue","mtime":1595837723333},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwTXV0YXRpb25zIH0gZnJvbSAidnVleCI7DQppbXBvcnQgUGF0aWVudERldGFpbHMgZnJvbSAiQC9wYWdlcy9tYWluL3BhdGllbnRzL2RldGFpbC52dWUiDQppbXBvcnQgY29uZiBmcm9tICdAL2NvbmYvY29uZi5qcycNCg0KZXhwb3J0IGRlZmF1bHQgew0KCWNvbXBvbmVudHM6ew0KCQlQYXRpZW50RGV0YWlscw0KCX0sDQoJZGF0YSgpIHsNCgkJcmV0dXJuIHsNCgkJCXVwbG9hZFVybDpjb25mLmdldEN1cnJlbnRVcGxvYWRBZGRyKCksDQoJCQl1cGxvYWREYXRhOnsNCgkJCQltb2RlOiJ1cGxvYWQiDQoJCQl9LA0KCQkJdmlldzp7DQoJCQkJcmVjb21tZW5kOmZhbHNlLA0KCQkJfSwNCgkJCXJlY29tbWVuZERhdGE6ew0KCQkJCUN1c3RvbWVyTmFtZToiIiwNCgkJCQlDdXN0b21lckdlbmRlcjoi55S3IiwNCgkJCQlQaG9uZU5POiIiLA0KCQkJCUNhcmRJRFBpYzoiIiwNCgkJCX0sDQoJCQlkYXRhOiBbXSwNCgkJCWtleXdvcmQ6ICIiLA0KCQkJUGFnZVNpemU6IDIwLA0KCQkJUGFnZTogMSwNCgkJCXRvdGFsOiAwLA0KCQkJY3VzdG9tZXJzOiBbXSwNCgkJCXNob3dQYXRpZW50RGV0YWlsczpmYWxzZSwNCgkJCXNlbGVjdEN1c3RvbWVyOnt9LA0KCQkJcnVsZXM6ew0KCQkJCUN1c3RvbWVyTmFtZTpbDQoJCQkJCXsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXnl4Xkurrlp5PlkI0nLCB0cmlnZ2VyOiAnYmx1cicgfSwNCgkJCQkJeyBtaW46IDIsIG1heDogMjAsIG1lc3NhZ2U6ICfplb/luqblnKggMiDliLAgMjAwIOS4quWtl+espicsIHRyaWdnZXI6ICdibHVyJyB9DQoJCQkJXSwNCgkJCQlQaG9uZU5POlsNCgkJCQkJeyByZXF1aXJlZDogdHJ1ZSwgdHJpZ2dlcjogJ2JsdXInLCB2YWxpZGF0b3I6IChydWxlLCB2YWx1ZSxjYWxsYmFjayk9PnsNCgkJCQkJCWlmICghdmFsdWUpew0KCQkJCQkJCWNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl55eF5Lq655S16K+d5Y+356CBJykpDQoJCQkJCQl9ZWxzZSBpZiAoIXZhbHVlLmlzQ05QaG9uZSgpKXsNCgkJCQkJCQljYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeato+ehrueahDEx5L2N5omL5py65Y+356CBJykpDQoJCQkJCQl9ZWxzZSB7DQoJCQkJCQkJY2FsbGJhY2soKQ0KCQkJCQkJfQ0KCQkJCQl9IH0NCgkJCQldDQoJCQl9LA0KCQl9Ow0KCX0sDQoJY29tcHV0ZWQ6IHsNCgkJLi4ubWFwU3RhdGUoWyJ1SW5mbyJdKSwNCgkJLi4ubWFwU3RhdGUoWyJub3RpY2VFeCJdKSwNCgkJLi4ubWFwU3RhdGUoWyJub3RpY2VSb29tIl0pDQoJfSwNCgltb3VudGVkKCkgew0KCQl0aGlzLnF1ZXJ5RGF0YSgpOw0KCX0sDQoJbWV0aG9kczogew0KCQlvbkNhcmRJRChlKXsNCgkJCWxldCBkYXRhID0gSlNPTi5wYXJzZShlLkRhdGEpDQoJCQl0aGlzLnJlY29tbWVuZERhdGEuQ2FyZElEUGljID0gZGF0YS5pZHN0cjsNCgkJfSwNCgkJb25DYXJkSURSZW1vdmUoKXsNCgkJCXRoaXMucmVjb21tZW5kRGF0YS5DYXJkSURQaWMgPSAiIjsNCgkJfSwNCgkJc2F2ZVJlY29tbWVuZEN1c3RvbWVyKCl7DQoJCQl0aGlzLiRyZWZzLnJlY29tbWVuZC52YWxpZGF0ZSgodmFsaWQpPT57DQoJCQkJaWYodmFsaWQpew0KCQkJCQl0aGlzLmNyZWF0ZVJlY29tbWVuZEN1c3RvbWVyKCk7DQoJCQkJfSBlbHNlIHsNCgkJCQkJcmV0dXJuIGZhbHNlOw0KCQkJCX0NCgkJCX0pDQoJCX0sDQoJCXJlY29tbWVuZENzdCgpew0KCQkJdGhpcy5yZWNvbW1lbmREYXRhID0ge307DQoJCQl0aGlzLnZpZXcucmVjb21tZW5kID0gdHJ1ZTsNCgkJfSwNCgkJc2VhcmNoKCl7DQoJCQl0aGlzLnF1ZXJ5RGF0YSgpDQoJCX0sDQoJCWFzeW5jIGNyZWF0ZVJlY29tbWVuZEN1c3RvbWVyKCl7DQoJCQlsZXQgcGFyYW1zID0gdGhpcy5yZWNvbW1lbmREYXRhOw0KCQkJdGhpcy4kbG9hZGluZygpOw0KCQkJbGV0IHJlcyA9IGF3YWl0IHRoaXMuJGFwaS5wb3N0KCIvQ3VzdG9tZXIvUmVjb21tZW5kQ3VzdG9tZXIiLHBhcmFtcyk7DQoJCQl0aGlzLiRsb2FkaW5nKCkuY2xvc2UoKTsNCgkJCWlmICghcmVzLklzUG9zaXRpdmUpIHsNCgkJCQl0aGlzLiR0aXBzLndhcm5pbmcoIuaOqOiNkOWksei0pSIpOw0KCQkJCXJldHVybjsNCgkJCX0NCgkJCXRoaXMuJHRpcHMuc3VjY2Vzcygi5o6o6I2Q5oiQ5YqfIik7DQoJCQl0aGlzLnZpZXcucmVjb21tZW5kID0gZmFsc2U7DQoJCQl0aGlzLnF1ZXJ5RGF0YSgpOw0KCQl9LA0KCQlxdWVyeURhdGEoKSB7DQoJCQljb25zdCBfdGhpcyA9IHRoaXM7DQoJCQljb25zdCBfcGFyYW1zID0gew0KCQkJCWtleXdvcmQ6IHRoaXMua2V5d29yZCwNCgkJCQlwYWdlOiB0aGlzLlBhZ2UsDQoJCQkJUGFnZVNpemU6IHRoaXMuUGFnZVNpemUNCgkJCX07DQoJCQl0aGlzLiRsb2FkaW5nKCk7DQoJCQl0aGlzLiRhcGkuZ2V0KCIvTWVkaWNhbC9RdWVyeUN1c3RvbWVyIiwgX3BhcmFtcykudGhlbihyZXMgPT4gew0KCQkJCXRoaXMuJGxvYWRpbmcoKS5jbG9zZSgpOw0KCQkJCWlmICghcmVzLklzUG9zaXRpdmUpIHsNCgkJCQkJdGhpcy4kdGlwcy53YXJuaW5nKCLmn6Xor6LmlbDmja7lvILluLgiKTsNCgkJCQkJcmV0dXJuOw0KCQkJCX0NCgkJCQlfdGhpcy5jdXN0b21lcnMgPSByZXMuRGF0YS5EYXRhOw0KCQkJCV90aGlzLnRvdGFsID0gcmVzLkRhdGEuVG90YWxDb3VudDsNCgkJCX0pOw0KCQl9DQoJfQ0KfTsNCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"pages/main/patients","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-row>\r\n\t\t\t<el-col :span=\"24\" style=\"margin-bottom: 15px;\">\r\n\t\t\t\t<el-row type=\"flex\">\r\n\t\t\t\t\t<el-col :span=\"16\">\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"6\">\r\n\t\t\t\t\t\t<el-input :placeholder=\"$t('default.TIPS.CLIENT.INPUT_SEARCH')\" v-model=\"keyword\">\r\n\t\t\t\t\t\t\t<el-button @click=\"search()\" slot=\"prepend\" icon=\"el-icon-search\"></el-button>\r\n\t\t\t\t\t\t</el-input>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"2\">\r\n\t\t\t\t\t\t<el-button @click=\"recommendCst()\" type=\"primary\" icon=\"el-icon-plus\">推荐客户</el-button>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t</el-col>\r\n\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t<el-table height=\"450\" :data=\"customers\" border>\r\n\t\t\t\t\t<el-table-column type=\"index\" label=\"序号\" width=\"80\"></el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"CustomerName\" label=\"患者姓名\"></el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"CardID\" label=\"身份证\"></el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"PhoneNO\" label=\"联系方式\"></el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"SeekAppointmentCount\" label=\"约诊次数\"></el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"SeekCount\" label=\"看诊次数\"></el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"RecommendUserName\" label=\"推荐人\"></el-table-column>\r\n\t\t\t\t\t<el-table-column label=\"操作\" align=\"center\">\r\n\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t<el-link type=\"primary\" @click=\"showPatientDetails=true;selectCustomer=scope.row;\">查看详情</el-link>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t</el-table>\r\n\r\n\t\t\t\t<el-pagination\r\n\t\t\t\t\tstyle=\"margin:10px 0;\"\r\n\t\t\t\t\tbackground\r\n\t\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t\t\t:page-sizes=\"[20,50,100,200]\"\r\n\t\t\t\t\t:page-size=\"20\"\r\n\t\t\t\t\t:total=\"total\"\r\n\t\t\t\t></el-pagination>\r\n\t\t\t</el-col>\r\n\t\t</el-row>\r\n\r\n\t\t<el-dialog title=\"新增推荐\" :fullscreen=\"true\" :visible.sync=\"view.recommend\">\r\n\t\t\t<el-form :model=\"recommendData\" :rules=\"rules\" style=\"width:500px;\" label-width=\"120px\" label-position=\"left\" ref=\"recommend\">\r\n\t\t\t\t<el-form-item label=\"病人姓名\" prop=\"CustomerName\">\r\n\t\t\t\t\t<el-input v-model=\"recommendData.CustomerName\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"病人性别\" prop=\"CustomerGender\">\r\n\t\t\t\t\t<el-radio-group v-model=\"recommendData.CustomerGender\">\r\n\t\t\t\t\t\t<el-radio :label=\"'男'\">男</el-radio>\r\n\t\t\t\t\t\t<el-radio :label=\"'女'\">女</el-radio>\r\n\t\t\t\t\t</el-radio-group>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"联系电话\" prop=\"PhoneNO\">\r\n\t\t\t\t\t<el-input v-model=\"recommendData.PhoneNO\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"上传身份证\">\r\n\t\t\t\t\t<el-upload\r\n\t\t\t\t\t\tclass=\"upload-demo\"\r\n\t\t\t\t\t\tdrag\r\n\t\t\t\t\t\taccept=\"image/jpeg, image/jpg\"\r\n\t\t\t\t\t\t:action=\"uploadUrl\"\r\n\t\t\t\t\t\t:data=\"uploadData\"\r\n\t\t\t\t\t\t:on-success=\"onCardID\"\r\n\t\t\t\t\t\t:on-remove=\"onCardIDRemove\"\r\n\t\t\t\t\t\t:multiple=\"false\">\r\n\t\t\t\t\t\t<i class=\"el-icon-upload\"></i>\r\n\t\t\t\t\t\t<div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n\t\t\t\t\t\t<div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png文件，且不超过500kb</div>\r\n\t\t\t\t\t</el-upload>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"view.recommend=false\">取消</el-button>\r\n\t\t\t\t<el-button @click=\"saveRecommendCustomer\" type=\"primary\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t\t<el-dialog title=\"患者详情\" :fullscreen=\"true\" :visible.sync=\"showPatientDetails\">\r\n\t\t\t<patient-details :customer=\"selectCustomer\"></patient-details>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapMutations } from \"vuex\";\r\nimport PatientDetails from \"@/pages/main/patients/detail.vue\"\r\nimport conf from '@/conf/conf.js'\r\n\r\nexport default {\r\n\tcomponents:{\r\n\t\tPatientDetails\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tuploadUrl:conf.getCurrentUploadAddr(),\r\n\t\t\tuploadData:{\r\n\t\t\t\tmode:\"upload\"\r\n\t\t\t},\r\n\t\t\tview:{\r\n\t\t\t\trecommend:false,\r\n\t\t\t},\r\n\t\t\trecommendData:{\r\n\t\t\t\tCustomerName:\"\",\r\n\t\t\t\tCustomerGender:\"男\",\r\n\t\t\t\tPhoneNO:\"\",\r\n\t\t\t\tCardIDPic:\"\",\r\n\t\t\t},\r\n\t\t\tdata: [],\r\n\t\t\tkeyword: \"\",\r\n\t\t\tPageSize: 20,\r\n\t\t\tPage: 1,\r\n\t\t\ttotal: 0,\r\n\t\t\tcustomers: [],\r\n\t\t\tshowPatientDetails:false,\r\n\t\t\tselectCustomer:{},\r\n\t\t\trules:{\r\n\t\t\t\tCustomerName:[\r\n\t\t\t\t\t{ required: true, message: '请输入病人姓名', trigger: 'blur' },\r\n\t\t\t\t\t{ min: 2, max: 20, message: '长度在 2 到 200 个字符', trigger: 'blur' }\r\n\t\t\t\t],\r\n\t\t\t\tPhoneNO:[\r\n\t\t\t\t\t{ required: true, trigger: 'blur', validator: (rule, value,callback)=>{\r\n\t\t\t\t\t\tif (!value){\r\n\t\t\t\t\t\t\tcallback(new Error('请输入病人电话号码'))\r\n\t\t\t\t\t\t}else if (!value.isCNPhone()){\r\n\t\t\t\t\t\t\tcallback(new Error('请输入正确的11位手机号码'))\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tcallback()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} }\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState([\"uInfo\"]),\r\n\t\t...mapState([\"noticeEx\"]),\r\n\t\t...mapState([\"noticeRoom\"])\r\n\t},\r\n\tmounted() {\r\n\t\tthis.queryData();\r\n\t},\r\n\tmethods: {\r\n\t\tonCardID(e){\r\n\t\t\tlet data = JSON.parse(e.Data)\r\n\t\t\tthis.recommendData.CardIDPic = data.idstr;\r\n\t\t},\r\n\t\tonCardIDRemove(){\r\n\t\t\tthis.recommendData.CardIDPic = \"\";\r\n\t\t},\r\n\t\tsaveRecommendCustomer(){\r\n\t\t\tthis.$refs.recommend.validate((valid)=>{\r\n\t\t\t\tif(valid){\r\n\t\t\t\t\tthis.createRecommendCustomer();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\trecommendCst(){\r\n\t\t\tthis.recommendData = {};\r\n\t\t\tthis.view.recommend = true;\r\n\t\t},\r\n\t\tsearch(){\r\n\t\t\tthis.queryData()\r\n\t\t},\r\n\t\tasync createRecommendCustomer(){\r\n\t\t\tlet params = this.recommendData;\r\n\t\t\tthis.$loading();\r\n\t\t\tlet res = await this.$api.post(\"/Customer/RecommendCustomer\",params);\r\n\t\t\tthis.$loading().close();\r\n\t\t\tif (!res.IsPositive) {\r\n\t\t\t\tthis.$tips.warning(\"推荐失败\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$tips.success(\"推荐成功\");\r\n\t\t\tthis.view.recommend = false;\r\n\t\t\tthis.queryData();\r\n\t\t},\r\n\t\tqueryData() {\r\n\t\t\tconst _this = this;\r\n\t\t\tconst _params = {\r\n\t\t\t\tkeyword: this.keyword,\r\n\t\t\t\tpage: this.Page,\r\n\t\t\t\tPageSize: this.PageSize\r\n\t\t\t};\r\n\t\t\tthis.$loading();\r\n\t\t\tthis.$api.get(\"/Medical/QueryCustomer\", _params).then(res => {\r\n\t\t\t\tthis.$loading().close();\r\n\t\t\t\tif (!res.IsPositive) {\r\n\t\t\t\t\tthis.$tips.warning(\"查询数据异常\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t_this.customers = res.Data.Data;\r\n\t\t\t\t_this.total = res.Data.TotalCount;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"]}]}