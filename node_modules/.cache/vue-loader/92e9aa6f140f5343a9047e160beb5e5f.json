{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GaeaProject\\jpn_medical_web\\pages\\main\\patients\\detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\pages\\main\\patients\\detail.vue","mtime":1594378016165},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgaGVhbHRoUmVjb3JkRGV0YWlsIGZyb20gIkAvcGFnZXMvbWFpbi9hcHBvaW50bWVudC9oZWFsdGhfcmVjb3JkX2RldGFpbC52dWUiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgaGVhbHRoUmVjb3JkRGV0YWlsDQogIH0sDQogIG5hbWU6ICJQYXRpZW50RGV0YWlscyIsDQogIHByb3BzOiB7DQogICAgY3VzdG9tZXI6IHt9DQogIH0sDQogIHdhdGNoOiB7DQogICAgY3VzdG9tZXI6IGZ1bmN0aW9uKHYpIHsNCiAgICAgIHRoaXMucmVzZXQoKTsNCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGFjdGl2ZU5hbWU6ICJCYXNlSW5mbyIsDQogICAgICBjdXN0b21lckJhc2VJbmZvOiB7fSwNCiAgICAgIGN1c3RvbWVySGVhbHRoUmVjb3JkOiBbXSwNCiAgICAgIGN1c3RvbWVyU2Vla1JlY29yZDogW10sDQogICAgICBjdXN0b21lclNlZWtSZWNvcmRUb3RhbDogMCwNCiAgICAgIGN1c3RvbWVySGVhbHRoUmVjb3JkTG9hZGluZzogZmFsc2UsDQogICAgICBjdXN0b21lclNlZWtSZWNvcmRMb2FkaW5nOiBmYWxzZSwNCiAgICAgIGhlYWx0aFJlY29yZER0bERpYWxvZzogZmFsc2UsDQogICAgICBzZWxlY3RIZWFsdGhSZWNvcmQ6IHsgTWVkaWNhbFJlY29yZEd1aWQ6ICIiIH0NCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgcmVzZXQoKSB7DQogICAgICB0aGlzLmFjdGl2ZU5hbWUgPSAiQmFzZUluZm8iOw0KICAgICAgdGhpcy5jdXN0b21lckJhc2VJbmZvID0ge307DQogICAgICB0aGlzLmN1c3RvbWVySGVhbHRoUmVjb3JkID0gW107DQogICAgICB0aGlzLmN1c3RvbWVyU2Vla1JlY29yZCA9IFtdOw0KICAgICAgdGhpcy5jdXN0b21lclNlZWtSZWNvcmRUb3RhbCA9IDA7DQogICAgICB0aGlzLmhlYWx0aFJlY29yZER0bERpYWxvZyA9IGZhbHNlOw0KICAgIH0sDQogICAgb25TaG93SGVhbHRoUmVjb3JkRGV0YWlsKHJlY29yZCkgew0KICAgICAgdGhpcy5oZWFsdGhSZWNvcmREdGxEaWFsb2cgPSB0cnVlOw0KICAgICAgdGhpcy5zZWxlY3RIZWFsdGhSZWNvcmQgPSByZWNvcmQ7DQogICAgfSwNCiAgICBvblRhYkNsaWNrKHRhYikgew0KICAgICAgc3dpdGNoICh0YWIubmFtZSkgew0KICAgICAgICBjYXNlICJCYXNlSW5mbyI6DQogICAgICAgICAgLy90aGlzLmdldEN1c3RvbWVyQmFzZUluZm8oKTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAiSGVhbHRoUmVjb3JkIjoNCiAgICAgICAgICB0aGlzLnF1ZXJ5Q3VzdG9tZXJIZWFsdGhSZWNvcmQoKTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgY2FzZSAiU2Vla1JlY29yZCI6DQogICAgICAgICAgdGhpcy5xdWVyeUN1c3RvbWVyU2Vla1JlY29yZCgpOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgfQ0KICAgIH0sDQogICAgLy/mgqPogIXln7rnoYDkv6Hmga8NCiAgICBnZXRDdXN0b21lckJhc2VJbmZvKCkgew0KICAgICAgY29uc3QgX3RoaXMgPSB0aGlzOw0KICAgICAgLy9fdGhpcy4kbG9hZGluZygpOw0KICAgICAgdGhpcy4kYXBpDQogICAgICAgIC5nZXQoIi9NZWRpY2FsL0dldEN1c3RvbWVyQmFzZUluZm8iLCB7DQogICAgICAgICAgQ3VzdG9tZXJVc2VyR3VpZDogdGhpcy5jdXN0b21lci5Vc2VyR3VpZA0KICAgICAgICB9KQ0KICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgIC8vX3RoaXMuJGxvYWRpbmcoKS5jbG9zZSgpOw0KICAgICAgICAgIGlmIChyZXMuaXNQb3NpdGl2ZSkgew0KICAgICAgICAgICAgdGhpcy4kdGlwcy5lcnJvcigi5p+l6K+i5oKj6ICF5Z+65pys5L+h5oGv5aSx6LSlIik7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgfQ0KICAgICAgICAgIF90aGlzLmN1c3RvbWVyQmFzZUluZm8gPSByZXMuRGF0YTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICAvL+aCo+iAheWBpeW6t+aho+ahiA0KICAgIHF1ZXJ5Q3VzdG9tZXJIZWFsdGhSZWNvcmQoKSB7DQogICAgICBjb25zdCBfdGhpcyA9IHRoaXM7DQogICAgICB0aGlzLmN1c3RvbWVySGVhbHRoUmVjb3JkTG9hZGluZyA9IHRydWU7DQogICAgICB0aGlzLiRhcGkNCiAgICAgICAgLmdldCgiL01lZGljYWwvUXVlcnlDdXN0b21lck1lZGljYWxSZWNvcmQiLCB7DQogICAgICAgICAgQ3VzdG9tZXJHdWlkOiB0aGlzLmN1c3RvbWVyLkN1c3RvbWVyR3VpZA0KICAgICAgICB9KQ0KICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgIF90aGlzLmN1c3RvbWVySGVhbHRoUmVjb3JkTG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgIF90aGlzLmN1c3RvbWVySGVhbHRoUmVjb3JkID0gcmVzLkRhdGEuRGF0YUxpc3Q7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgLy/mgqPogIXnnIvor4rorrDlvZUNCiAgICBxdWVyeUN1c3RvbWVyU2Vla1JlY29yZCgpIHsNCiAgICAgIGNvbnN0IF90aGlzID0gdGhpczsNCiAgICAgIHRoaXMuY3VzdG9tZXJTZWVrUmVjb3JkTG9hZGluZyA9IHRydWU7DQogICAgICB0aGlzLiRhcGkNCiAgICAgICAgLmdldCgiL01lZGljYWwvUXVlcnlDdXN0b21lck1lZGljYWxWaXNpdCIsIHsNCiAgICAgICAgICBDdXN0b21lckd1aWQ6IHRoaXMuY3VzdG9tZXIuQ3VzdG9tZXJHdWlkDQogICAgICAgIH0pDQogICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgX3RoaXMuY3VzdG9tZXJTZWVrUmVjb3JkTG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgIF90aGlzLmN1c3RvbWVyU2Vla1JlY29yZCA9IHJlcy5EYXRhLkRhdGFMaXN0Ow0KICAgICAgICAgIF90aGlzLmN1c3RvbWVyU2Vla1JlY29yZFRvdGFsID0gcmVzLkRhdGEuVG90YWxDb3VudDsNCiAgICAgICAgfSk7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"detail.vue","sourceRoot":"pages/main/patients","sourcesContent":["<template>\r\n  <div style=\"height:500px;\">\r\n    <el-col :span=\"24\">\r\n      <el-tabs v-model=\"activeName\" @tab-click=\"onTabClick\">\r\n        <el-tab-pane label=\"基本信息\" name=\"BaseInfo\">\r\n          <el-row type=\"flex\" align=\"middle\" justify=\"start\">\r\n            <el-col :span=\"6\">\r\n              <el-form label-width=\"180px\">\r\n                <el-form-item label=\"患者姓名\">\r\n                  <label>{{customer.CustomerName}}</label>\r\n                </el-form-item>\r\n                <el-form-item label=\"患者性别\">\r\n                  <label>{{customer.Gender||'未知'}}</label>\r\n                </el-form-item>\r\n                <el-form-item label=\"出生日期\">\r\n                  <label>{{customer.BirthDate||customer.BirthDate==='1901-01-01 00:00:00'?'未知':customer.BirthDate}}</label>\r\n                </el-form-item>\r\n                <el-form-item label=\"联系电话\">\r\n                  <label>{{customer.PhoneNO}}</label>\r\n                </el-form-item>\r\n                <el-form-item label=\"身份证号\">\r\n                  <label>{{customer.CardID}}</label>\r\n                </el-form-item>\r\n                <el-form-item label=\"约诊次数\">\r\n                  <label>{{customer.SeekAppointmentCount}} 次</label>\r\n                </el-form-item>\r\n                <el-form-item label=\"看诊次数\">\r\n                  <label>{{customer.SeekCount}} 次</label>\r\n                </el-form-item>\r\n                <el-form-item label=\"赴日预约\">\r\n                  <label>{{customer.GoJapanAppointmentCount}} 次</label>\r\n                </el-form-item>\r\n              </el-form>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <img src=\"@/src/assets/images/idcard_front.png\" width=\"300\" alt />\r\n            </el-col>\r\n          </el-row>\r\n        </el-tab-pane>\r\n        <el-tab-pane label=\"患者病历\" name=\"HealthRecord\">\r\n          <el-table\r\n\t\t\t\theight=\"450\"\r\n\t\t\t\tv-loading=\"customerHealthRecordLoading\"\r\n\t\t\t\t:data=\"customerHealthRecord\"\r\n\t\t\t\tborder\r\n\t\t\t>\r\n            <el-table-column type=\"index\" label=\"序号\" width=\"80\"></el-table-column>\r\n            <el-table-column prop=\"MedicalRecordName\" label=\"病历标题\" width=\"250\"></el-table-column>\r\n            <el-table-column prop=\"Remarks\" label=\"病历描述\"></el-table-column>\r\n            <el-table-column label=\"病历附件\" align=\"center\" width=\"120\">\r\n              <template slot-scope=\"scope\">\r\n                <el-link\r\n                  type=\"primary\"\r\n                  @click=\"onShowHealthRecordDetail(scope.row)\"\r\n                >查看</el-link>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          <el-pagination\r\n            style=\"margin:10px 0;\"\r\n            background\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :page-sizes=\"[20,50,100,200]\"\r\n            :page-size=\"20\"\r\n            :total=\"10\"\r\n          ></el-pagination>\r\n        </el-tab-pane>\r\n        <el-tab-pane label=\"看诊记录\" name=\"SeekRecord\">\r\n          <el-table\r\n            height=\"450\"\r\n            v-loading=\"customerSeekRecordLoading\"\r\n            :data=\"customerSeekRecord\"\r\n            border\r\n          >\r\n            <el-table-column type=\"index\" label=\"序号\" width=\"80\"></el-table-column>\r\n            <el-table-column prop=\"TargetDate\" label=\"看诊时间\" width=\"180\"></el-table-column>\r\n            <el-table-column prop=\"DoctorName\" label=\"看诊医生\" width=\"120\"></el-table-column>\r\n            <el-table-column prop=\"MedicalDesc\" label=\"诊疗情况\"></el-table-column>\r\n            <el-table-column label=\"医生处方\" align=\"center\" width=\"120\">\r\n              <template slot-scope=\"scope\">\r\n                <el-link type=\"primary\" @click=\"$tips.warning('敬请期待')\">查看</el-link>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"支付详情\" align=\"center\" width=\"120\">\r\n              <template slot-scope=\"scope\">\r\n                <el-link type=\"primary\" @click=\"$tips.warning('敬请期待')\">待支付</el-link>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          <el-pagination\r\n            style=\"margin:10px 0;\"\r\n            background\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :page-sizes=\"[20,50,100,200]\"\r\n            :page-size=\"20\"\r\n            :total=\"customerSeekRecordTotal\"\r\n          ></el-pagination>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n    </el-col>\r\n\r\n    <el-dialog\r\n      title=\"患者病历\"\r\n      :visible.sync=\"healthRecordDtlDialog\"\r\n      :modal-append-to-body=\"false\"\r\n      :append-to-body=\"true\"\r\n    >\r\n      <health-record-detail :id=\"selectHealthRecord.MedicalRecordGuid\"></health-record-detail>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport healthRecordDetail from \"@/pages/main/appointment/health_record_detail.vue\";\r\nexport default {\r\n  components: {\r\n    healthRecordDetail\r\n  },\r\n  name: \"PatientDetails\",\r\n  props: {\r\n    customer: {}\r\n  },\r\n  watch: {\r\n    customer: function(v) {\r\n      this.reset();\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      activeName: \"BaseInfo\",\r\n      customerBaseInfo: {},\r\n      customerHealthRecord: [],\r\n      customerSeekRecord: [],\r\n      customerSeekRecordTotal: 0,\r\n      customerHealthRecordLoading: false,\r\n      customerSeekRecordLoading: false,\r\n      healthRecordDtlDialog: false,\r\n      selectHealthRecord: { MedicalRecordGuid: \"\" }\r\n    };\r\n  },\r\n  methods: {\r\n    reset() {\r\n      this.activeName = \"BaseInfo\";\r\n      this.customerBaseInfo = {};\r\n      this.customerHealthRecord = [];\r\n      this.customerSeekRecord = [];\r\n      this.customerSeekRecordTotal = 0;\r\n      this.healthRecordDtlDialog = false;\r\n    },\r\n    onShowHealthRecordDetail(record) {\r\n      this.healthRecordDtlDialog = true;\r\n      this.selectHealthRecord = record;\r\n    },\r\n    onTabClick(tab) {\r\n      switch (tab.name) {\r\n        case \"BaseInfo\":\r\n          //this.getCustomerBaseInfo();\r\n          break;\r\n        case \"HealthRecord\":\r\n          this.queryCustomerHealthRecord();\r\n          break;\r\n        case \"SeekRecord\":\r\n          this.queryCustomerSeekRecord();\r\n          break;\r\n      }\r\n    },\r\n    //患者基础信息\r\n    getCustomerBaseInfo() {\r\n      const _this = this;\r\n      //_this.$loading();\r\n      this.$api\r\n        .get(\"/Medical/GetCustomerBaseInfo\", {\r\n          CustomerUserGuid: this.customer.UserGuid\r\n        })\r\n        .then(res => {\r\n          //_this.$loading().close();\r\n          if (res.isPositive) {\r\n            this.$tips.error(\"查询患者基本信息失败\");\r\n            return;\r\n          }\r\n          _this.customerBaseInfo = res.Data;\r\n        });\r\n    },\r\n    //患者健康档案\r\n    queryCustomerHealthRecord() {\r\n      const _this = this;\r\n      this.customerHealthRecordLoading = true;\r\n      this.$api\r\n        .get(\"/Medical/QueryCustomerMedicalRecord\", {\r\n          CustomerGuid: this.customer.CustomerGuid\r\n        })\r\n        .then(res => {\r\n          _this.customerHealthRecordLoading = false;\r\n          _this.customerHealthRecord = res.Data.DataList;\r\n        });\r\n    },\r\n    //患者看诊记录\r\n    queryCustomerSeekRecord() {\r\n      const _this = this;\r\n      this.customerSeekRecordLoading = true;\r\n      this.$api\r\n        .get(\"/Medical/QueryCustomerMedicalVisit\", {\r\n          CustomerGuid: this.customer.CustomerGuid\r\n        })\r\n        .then(res => {\r\n          _this.customerSeekRecordLoading = false;\r\n          _this.customerSeekRecord = res.Data.DataList;\r\n          _this.customerSeekRecordTotal = res.Data.TotalCount;\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.el-form-item {\r\n  margin-bottom: 11px;\r\n}\r\n</style>"]}]}