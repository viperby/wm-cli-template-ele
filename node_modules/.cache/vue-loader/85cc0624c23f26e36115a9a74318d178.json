{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GaeaProject\\jpn_medical_web\\pages\\common\\room.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\pages\\common\\room.vue","mtime":1601036332240},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB2aWRlb0VsZW1lbnQgZnJvbSAnQC9wYWdlcy9jb21tb24vdmlkZW9FbGVtZW50LnZ1ZScKaW1wb3J0IE5vdGljZVNESyBmcm9tICdAL3V0aWxzL25vdGljZVNESy9pbmRleC5qcycKaW1wb3J0IFJ0Y1NESyBmcm9tICdAL3V0aWxzL3J0Y1NESy9ydGMuanMnCmltcG9ydCBjb25mIGZyb20gJ0AvY29uZi9jb25mLmpzJwppbXBvcnQge21ha2VHdWlkfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvbWFrZUd1aWQuanMnOwppbXBvcnQge21hcFN0YXRlLG1hcE11dGF0aW9uc30gZnJvbSAndnVleCcKaW1wb3J0IG5vdGljZSBmcm9tICdAL3V0aWxzL21peGlucy9ub3RpY2UuanMnCgpleHBvcnQgZGVmYXVsdCB7Cgljb21wdXRlZDogewoJCS4uLm1hcFN0YXRlKFsidUluZm8iXSksCgkJLi4ubWFwU3RhdGUoWyJub3RpY2VSb29tIl0pLAoJfSwKCW1peGluczpbbm90aWNlXSwKCWNvbXBvbmVudHM6ewoJCXZpZGVvRWxlbWVudAoJfSwKCWRhdGEoKXsKCQlyZXR1cm4gewoJCQl1c2VyU3RyZWFtczp7fSwKCQkJdXNlclJ0Y3M6e30sCgkJCXRva2Vuczp7fSwKCQkJbG9jYWxTdHJlYW06bnVsbCwKCQkJbWVkaWFTdHJlYW1UcmFjazpudWxsLAoJCX0KCX0sCgltZXRob2RzOnsKCQljaGVja01lZGlhKCl7CgkJCXJldHVybiB7CgkJCQltZWRpYURldmljZXM6bmF2aWdhdG9yICE9IHVuZGVmaW5lZCAmJiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICE9IHVuZGVmaW5lZCwKCQkJfQoJCX0sCgkJYXN5bmMgY3JlYXRlVmlkZW8oaW5mbyl7CQkJCgkJCWxldCBzdHJlYW0gPSBhd2FpdCB0aGlzLmNyZWF0ZUxvY2FsU3RlYW0oKTsKCQkJaWYoc3RyZWFtKXsKCQkJCXRoaXMubWVkaWFTdHJlYW1UcmFjaz0gdHlwZW9mIHN0cmVhbS5zdG9wPT09J2Z1bmN0aW9uJz9zdHJlYW06c3RyZWFtLmdldFRyYWNrcygpWzBdOwoJCQkJdGhpcy5sb2NhbFN0cmVhbSA9IHN0cmVhbTsKCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2NhbFN0cmVhbScpLmlubmVySFRNTCA9ICIiOwoJCQkJY29uc3QgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpOwoJCQkJdmlkZW8ud2lkdGggPSAzMDA7CgkJCQl2aWRlby5oZWlnaHQgPSAzMDA7CgkJCQl2aWRlby5hdXRvcGxheSA9IHRydWU7CgkJCQl2aWRlby5wbGF5c2lubGluZSA9IGZhbHNlOwoJCQkJdmlkZW8uY29udHJvbHMgPSBmYWxzZTsKCQkJCXZpZGVvLm11dGVkID0gIm11dGVkIjsKCQkJCXZpZGVvLnNyY09iamVjdCA9IHRoaXMubG9jYWxTdHJlYW07CgkJCQlsZXQgcGFyZW50RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsb2NhbFN0cmVhbSIpOwoJCQkJcGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh2aWRlbyk7CgkJCX0KCQkJaWYoaW5mbykKCQkJCXRoaXMuJGV2ZW4uJGVtaXQoInVzZXJfdmlkZW9fcmVhZHkiLGluZm8pCgkJfSwKCQlhc3luYyBjcmVhdGVMb2NhbFN0ZWFtKGluZm8pIHsKCQkJLy8gY29uc29sZS5sb2codGhpcy5jaGVja01lZGlhKCkubWVkaWFEZXZpY2VzKTsKCQkJaWYgKCF0aGlzLmNoZWNrTWVkaWEoKS5tZWRpYURldmljZXMpIHsKCQkJCXRoaXMuJHRpcHMud2FybmluZygi5oKo55qE6K6+5aSH5LiN5pSv5oyB5aqS5L2T5bGe5oCnLOivt+WFiOaOpeWFpeehrOS7tuiuvuWkhyEiKQoJCQkJcmV0dXJuCgkJCX0KCQkJdHJ5ewoJCQkJcmV0dXJuIGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsKCQkJCQlhdWRpbzogdHJ1ZSwKCQkJCQl2aWRlbzogewoJCQkJCQl3aWR0aDogewoJCQkJCQkJaWRlYWw6IDMwMAoJCQkJCQl9LAoJCQkJCQloZWlnaHQ6IHsKCQkJCQkJCWlkZWFsOiAzMDAKCQkJCQkJfQoJCQkJCX0KCQkJCX0pOwoJCQl9Y2F0Y2goZSl7CgkJCQlyZXR1cm4gbnVsbDsKCQkJfQoJCX0sCgkJYXN5bmMgY3JlYXRlUnRjU2VuZGVyKHVpZCwgdHlwZSxyZWFkeSkgewoJCQlsZXQgdGhhdCA9IHRoaXM7CgkJCWxldCBydGMgPSBuZXcgUnRjU0RLKHsKCQkJCXNlcnZlOiAic3R1bjpzdHVuLnN0dW5wcm90b2NvbC5vcmc6MzQ3OCIsCgkJCQlyZWFkeTpyZWFkeSwKCQkJCWpvaW4oc3RyZWFtKXsKCQkJCQl0aGF0LiRzZXQodGhhdC51c2VyU3RyZWFtcywgdWlkLCB7c3RyZWFtOnN0cmVhbS5zdHJlYW0sbG9hZGluZzp0cnVlfSkKCQkJCQljb25zb2xlLmxvZyh0aGF0LnVzZXJTdHJlYW1zKQoJCQkJfSwKCQkJfSk7CgkJCXJ0Yy5pY2VTdGF0ZSA9IChlKT0+ewoJCQkJaWYoZSA9PSAiY29ubmVjdGVkIiAmJiB0aGF0LnVzZXJTdHJlYW1zW3VpZF0pewoJCQkJCXRoYXQudXNlclN0cmVhbXNbdWlkXS5sb2FkaW5nID0gZmFsc2U7CgkJCQl9CgkJCX0KCQkJcnRjLmRpc2Nvbm5lY3RlZD0gYXN5bmMgKCk9PnsKCQkJCWxldCBvZmZlciA9IGF3YWl0IHJ0Yy5jcmVhdGVPZmZlcih7CgkJCQkJb2ZmZXJUb1JlY2VpdmVWaWRlbzogdHJ1ZSwKCQkJCQlvZmZlclRvUmVjZWl2ZUF1ZGlvOiB0cnVlCgkJCQl9KTsKCQkJCWxldCBzZW5kTXNnID0gewoJCQkJCXR5cGU6J3B1c2gnLAoJCQkJCWpzZXA6b2ZmZXIsCgkJCQl9CgkJCQl0aGF0Lm5vdGljZVJvb20uc2VuZCh1aWQsIHNlbmRNc2cpOwoJCQl9CgkJCXJ0Yy5hZGRTdGVhbSh0aGlzLmxvY2FsU3RyZWFtKTsKCQkJdGhpcy5zZXRVc2VyUnRjcyhydGMsIHVpZCwgdHlwZSk7CgkJCXJldHVybiBhd2FpdCBydGMuY3JlYXRlT2ZmZXIoewoJCQkJb2ZmZXJUb1JlY2VpdmVWaWRlbzogdHJ1ZSwKCQkJCW9mZmVyVG9SZWNlaXZlQXVkaW86IHRydWUKCQkJfSk7CgkJfSwKCQlzZXRVc2VyUnRjcyhydGMsdWlkLHR5cGUpewoJCQlpZighdGhpcy51c2VyUnRjc1t1aWRdKXsKCQkJCXRoaXMudXNlclJ0Y3NbdWlkXSA9IG5ldyBPYmplY3QoKTsKCQkJfQoJCQl0aGlzLnVzZXJSdGNzW3VpZF1bdHlwZV0gPSBydGM7CQoJCX0sCgkJY3JlYXRlUm9vbShpbmZvLHBhcil7CgkJCXRoaXMuaW5pdFJvb20oaW5mbyxwYXIpOwoJCX0sCgkJYXN5bmMgY3JlYXRlUnRjUmV2aWNlKHVpZCx0eXBlLHJlYWR5KXsKCQkJbGV0IHRoYXQgPSB0aGlzOwoJCQlsZXQgcnRjID0gbnVsbDsKCQkJaWYodGhpcy51c2VyUnRjc1t1aWRdICYmIHRoaXMudXNlclJ0Y3NbdWlkXVt0eXBlXSl7CgkJCQlydGMgPSB0aGlzLnVzZXJSdGNzW3VpZF1bdHlwZV07CgkJCX1lbHNlewoJCQkJcnRjID0gbmV3IFJ0Y1NESyh7CgkJCQkJc2VydmU6InN0dW46c3R1bi5zdHVucHJvdG9jb2wub3JnOjM0NzgiLAoJCQkJCXJlYWR5OnJlYWR5LAoJCQkJCWpvaW4oc3RyZWFtKXsKCQkJCQkJLy90aGF0LiRzZXQodGhhdC51c2VyU3RyZWFtcyx1aWQsc3RyZWFtLnN0cmVhbSkKCQkJCQkJdGhhdC4kc2V0KHRoYXQudXNlclN0cmVhbXMsIHVpZCwge3N0cmVhbTpzdHJlYW0uc3RyZWFtLGxvYWRpbmc6dHJ1ZX0pCgkJCQkJfSwKCQkJCX0pOwoJCQl9CgkJCXJ0Yy5pY2VTdGF0ZSA9IChlKT0+ewoJCQkJaWYoZSA9PSAiY29ubmVjdGVkIiAmJiB0aGF0LnVzZXJTdHJlYW1zW3VpZF0pewoJCQkJCXRoYXQudXNlclN0cmVhbXNbdWlkXS5sb2FkaW5nID0gZmFsc2U7CgkJCQl9CgkJCX0KCQkJLy9ydGMuc29jdXJlLmFkZFRyYW5zY2VpdmVyKCdhdWRpbycsIHsgJ2RpcmVjdGlvbic6ICdyZWN2b25seScgfSk7CgkJCS8vcnRjLnNvY3VyZS5hZGRUcmFuc2NlaXZlcigndmlkZW8nLCB7ICdkaXJlY3Rpb24nOiAncmVjdm9ubHknIH0pOwoJCQkvL3J0Yy5zZW5kT2ZmZXIgPSBmYWxzZTsKCQkJcnRjLmFkZFN0ZWFtKHRoaXMubG9jYWxTdHJlYW0pOwkJCQoJCQlpZighdGhpcy51c2VyUnRjc1t1aWRdIHx8ICF0aGlzLnVzZXJSdGNzW3VpZF1bdHlwZV0pewoJCQkJdGhpcy5zZXRVc2VyUnRjcyhydGMsdWlkLHR5cGUpOwoJCQl9CgkJCXJldHVybiBhd2FpdCBydGM7CgkJCS8vcmV0dXJuIGF3YWl0IHJ0Yy5jcmVhdGVPZmZlcih7IG9mZmVyVG9SZWNlaXZlVmlkZW86IHRydWUsIG9mZmVyVG9SZWNlaXZlQXVkaW86IHRydWUgfSk7CgkJfSwKCQlldmVucygpewoJCQlsZXQgc2VsZiA9IHRoaXM7CgkJCS8vdGhpcy5jcmVhdGVWaWRlbygpOwoJCQl0aGlzLiRldmVuLiRvbigidXNlcl9saXZlX2xlYXZlIiwoaW5mbyk9PnsKCQkJCWNvbnNvbGUubG9nKHRoaXMubWVkaWFTdHJlYW1UcmFjaykKCQkJCXRoaXMubWVkaWFTdHJlYW1UcmFjayAmJiB0aGlzLm1lZGlhU3RyZWFtVHJhY2suc3RvcCgpOwoJCQkJdGhpcy5tZWRpYVN0cmVhbVRyYWNrID0gbnVsbDsKCQkJCXRoaXMubG9jYWxTdHJlYW0uZ2V0VHJhY2tzKClbMF0uc3RvcCgpOwoJCQkJdGhpcy5sb2NhbFN0cmVhbS5nZXRUcmFja3MoKVsxXS5zdG9wKCk7CgkJCQl0aGlzLmxvY2FsU3RyZWFtID0gbnVsbDsKCQkJfSkKCQkJdGhpcy4kZXZlbi4kb24oInVzZXJfbGl2ZV9sYXVuY2giLChpbmZvKT0+ewoJCQkJdGhpcy5jcmVhdGVWaWRlbyhpbmZvKTsKCQkJfSkKCQkJLy/lvZPliY3nlKjmiLfkuLvliqjpgIDlh7oKCQkJdGhpcy4kZXZlbi4kb24oInVzZXJfbGl2ZV9sZWF2ZSIsKGluZm8pPT57CgkJCQl0aGlzLnVzZXJSdGNzID0ge307CgkJCQlsZXQgYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnanMtdmlkZW9ib3gnKVswXTsKCQkJCWJveC5pbm5lckhUTUwgPSAiIjsKCQkJCXRoaXMudXNlclN0cmVhbXMgPSB7fTsKCQkJfSkKCQkJLy/lvZPlr7nmlrnpgInmi6nku6Xop4bpopHmlrnlvI/mjqXpgJrml7YKCQkJdGhpcy4kZXZlbi4kb24oIm5vdGljZV9saXZlX2Nvbm5lY3RhbGwiLChpbmZvKT0+ewoJCQkJLy/lvZPliY3nlKjmiLflt7LlnKjmiL/pl7QKCQkJCWlmKHRoaXMubm90aWNlUm9vbSYmdGhpcy5ub3RpY2VSb29tLmluZm8gIT0gdW5kZWZpbmVkKXsKCQkJCQl2YXIgbXNnID0gewoJCQkJCQl0bzogaW5mby5Gcm9tLkd1aWQsCgkJCQkJCWluZm86IHsKCQkJCQkJCVBsYXRlOiB0aGlzLm5vdGljZVJvb20uaW5mby5wbGF0ZSwKCQkJCQkJCUNvZGU6IHRoaXMubm90aWNlUm9vbS5pbmZvLmNvZGUsCgkJCQkJCQlWaWRlb1R5cGU6ICBpbmZvLkRhdGEuTWVzc2FnZS5BbnN3ZXIKCQkJCQkJfSwKCQkJCQkJdHlwZTogJycKCQkJCQl9OwoJCQkJCQoJCQkJCXRoaXMubm90aWNlRXguc2VuZChtc2cudG8sIG1zZy5pbmZvKTsKCQkJCX0gZWxzZSB7CgkJCQkJLy/lvZPliY3nlKjmiLfkuI3lnKjmiL/pl7QKCQkJCQl0aGlzLmNyZWF0ZVJvb20oaW5mbykKCQkJCX0KCQkJfSk7CgkJCS8v5b2T5oi/6Ze05bey5bu656uLCgkJCXRoaXMuJGV2ZW4uJG9uKCJ1c2VyX3Jvb21fY3JlYXRlIiwoaW5mbyxub3RpY2UpPT57CgkJCQl2YXIgbXNnID0gewoJCQkJCXRvOiBpbmZvLkZyb20uR3VpZCwKCQkJCQlpbmZvOiB7CgkJCQkJCVBsYXRlOiBub3RpY2UuaW5mby5wbGF0ZSwKCQkJCQkJQ29kZTogbm90aWNlLmluZm8uY29kZSwKCQkJCQkJVmlkZW9UeXBlOiBpbmZvLkRhdGEuTWVzc2FnZS5BbnN3ZXIsCgkJCQkJfSwKCQkJCQl0eXBlOiAnJwoJCQkJfTsJCgkJCQl0aGlzLm5vdGljZUV4LnNlbmQobXNnLnRvLCBtc2cuaW5mbyk7CgkJCX0pOwoJCQkvL+aUtuWIsOWIm+W7uuaIv+mXtOaMh+S7pAoJCQl0aGlzLiRldmVuLiRvbigibm90aWNlX3Jvb21fYnVpbGQiLChpbmZvKT0+ewoJCQkJdGhpcy5jcmVhdGVSb29tKGluZm8se3BsYXRlOmluZm8uRGF0YS5NZXNzYWdlLlBsYXRlfSkKCQkJfSk7CgkJCS8v5pS25Yiw5Yqg5YWl5oi/6Ze05oyH5LukCgkJCXRoaXMuJGV2ZW4uJG9uKCJub3RpY2Vfcm9vbV9qb2luIiwoaW5mbyk9PnsKCQkJCWxldCByZWFkeSA9ICh0b2tlbikgPT4gewoJCQkJCWxldCBydGMgPSBzZWxmLnVzZXJSdGNzW2luZm8uRGF0YS5BY2NlcHQuR3VpZF0uZGVzazsKCQkJCQlsZXQgc2VuZE1zZyA9IHsKCQkJCQkJdHlwZTondG9rZW4nLAoJCQkJCQl0b2tlbjp0b2tlbiwKCQkJCQl9CgkJCQkJLy/mo4Dmn6XmmK/lkKblrZjlnKjnrYnlvoXmjqXmlLbnmoR0b2tlbgoJCQkJCWlmKHRoaXMudG9rZW5zW2luZm8uRnJvbS5HdWlkXSl7CgkJCQkJCXJ0Yy5hZGRJY2VDYW5kaWRhdGUodGhpcy50b2tlbnNbaW5mby5Gcm9tLkd1aWRdKTsKCQkJCQkJZGVsZXRlIHRoaXMudG9rZW5zW2luZm8uRnJvbS5HdWlkXTsKCQkJCQl9CgkJCQkJc2VsZi5ub3RpY2VSb29tLnNlbmQoaW5mby5EYXRhLkFjY2VwdC5HdWlkLCBzZW5kTXNnKTsKCQkJCX0KCQkJCXRyeXsKCQkJCXRoaXMuY3JlYXRlUnRjU2VuZGVyKGluZm8uRGF0YS5BY2NlcHQuR3VpZCwnZGVzaycscmVhZHkpLnRoZW4oKG9mZmVyKT0+ewoJCQkJCWxldCBzZW5kTXNnID0gewoJCQkJCQl0eXBlOidwdXNoJywKCQkJCQkJanNlcDpvZmZlciwKCQkJCQl9CgkJCQkJc2VsZi5ub3RpY2VSb29tLnNlbmQoaW5mby5EYXRhLkFjY2VwdC5HdWlkLCBzZW5kTXNnKTsKCQkJCX0pCgkJCQl9Y2F0Y2goZSl7CgkJCQkJY29uc29sZS5sb2coZSkKCQkJCX0KCQkJfSk7CgkJCS8v5LqS5o2idG9rZW7mjIfku6QKCQkJdGhpcy4kZXZlbi4kb24oIm5vdGljZV9jaGFubmVsX3Rva2VuIiwoaW5mbyk9PnsKCQkJCWxldCByZWMgPSBpbmZvLkRhdGEuTWVzc2FnZTsKCQkJCS8v5b2T6L+Z5p2h5raI5oGv5o6l5Y+X5pe277yM5pyJ5Y+v6IO95pys5Zyw5bqU562U5L+h5Luk6L+Y5pyq5Yib5bu65a6M5oiQCgkJCQlpZih0aGlzLnVzZXJSdGNzW2luZm8uRnJvbS5HdWlkXSl7CgkJCQkJbGV0IHJ0YyA9IHRoaXMudXNlclJ0Y3NbaW5mby5Gcm9tLkd1aWRdLmRlc2s7CgkJCQkJcnRjLmFkZEljZUNhbmRpZGF0ZShyZWMudG9rZW4pOwoJCQkJfWVsc2V7CgkJCQkJLy/mmoLlrZgKCQkJCQl0aGlzLnRva2Vuc1tpbmZvLkZyb20uR3VpZF0gPSByZWMudG9rZW47CgkJCQl9CgkJCX0pOwoJCQkvL+aUtuWIsOmAgOWHuuaIv+mXtOaMh+S7pAoJCQl0aGlzLiRldmVuLiRvbigibm90aWNlX3Jvb21fbGVhdmUiLChpbmZvKT0+ewoJCQkJdGhpcy4kbm90aWZ5KHsKCQkJCQl0aXRsZTogJ+aPkOekuicsCgkJCQkJbWVzc2FnZTogaW5mby5EYXRhLkFjY2VwdC5OYW1lICsgJ+mAgOWHuuinhumike+8gScsCgkJCQl9KTsKCQkJCWxldCBydGMgPSB0aGlzLnVzZXJSdGNzW2luZm8uRGF0YS5BY2NlcHQuR3VpZF0uZGVzazsKCQkJCXJ0Yy5zb2N1cmUuY2xvc2UoKTsKCQkJCWRlbGV0ZSB0aGlzLnVzZXJSdGNzW2luZm8uRGF0YS5BY2NlcHQuR3VpZF07CgkJCQl2YXIgcmVtb3ZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW5mby5EYXRhLkFjY2VwdC5HdWlkKTsKCQkJCXJlbW92ZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHJlbW92ZSk7CgkJCQlkZWxldGUgdGhpcy51c2VyU3RyZWFtc1tpbmZvLkRhdGEuQWNjZXB0Lkd1aWRdCgkJCX0pOwoJCQkvL+W9k+aUtuWIsHB1c2jmtojmga8KCQkJdGhpcy4kZXZlbi4kb24oIm5vdGljZV9jaGFubmVsX3B1c2giLChpbmZvKT0+ewoJCQkJbGV0IHJlYyA9IGluZm8uRGF0YS5NZXNzYWdlOwoJCQkJbGV0IHJlYWR5ID0gKHRva2VuKSA9PiB7CgkJCQkJbGV0IHJ0YyA9IHNlbGYudXNlclJ0Y3NbaW5mby5Gcm9tLkd1aWRdLmRlc2s7CgkJCQkJbGV0IHNlbmRNc2cgPSB7CgkJCQkJCQl0eXBlOid0b2tlbicsCgkJCQkJCQl0b2tlbjp0b2tlbgoJCQkJCQl9CgkJCQkJLy/mo4Dmn6XmmK/lkKblrZjlnKjnrYnlvoXmjqXmlLbnmoR0b2tlbgoJCQkJCWlmKHRoaXMudG9rZW5zW2luZm8uRnJvbS5HdWlkXSl7CgkJCQkJCXJ0Yy5hZGRJY2VDYW5kaWRhdGUodGhpcy50b2tlbnNbaW5mby5Gcm9tLkd1aWRdKTsKCQkJCQkJZGVsZXRlIHRoaXMudG9rZW5zW2luZm8uRnJvbS5HdWlkXTsKCQkJCQl9CgkJCQkJdGhpcy5ub3RpY2VSb29tLnNlbmQoaW5mby5Gcm9tLkd1aWQsIHNlbmRNc2cpOwoJCQkJfQoJCQkJdHJ5ewoJCQkJdGhpcy5jcmVhdGVSdGNSZXZpY2UoaW5mby5Gcm9tLkd1aWQsJ2Rlc2snLHJlYWR5KS50aGVuKChydGMpPT57CgkJCQkJcnRjLmNyZWF0ZUFuc3dlcihyZWMuanNlcCkudGhlbigoYW5zd2VyKT0+ewoJCQkJCQlsZXQgc2VuZE1zZyA9IHsKCQkJCQkJCQl0eXBlOidzdWJzY3JpYmUnLAoJCQkJCQkJCWpzZXA6YW5zd2VyLAoJCQkJCQkJfQoJCQkJCQl0aGlzLm5vdGljZVJvb20uc2VuZChpbmZvLkZyb20uR3VpZCwgc2VuZE1zZyk7CgkJCQkJfSkKCQkJCX0pCgkJCQl9Y2F0Y2goZSl7CgkJCQkJY29uc29sZS5sb2coZSkKCQkJCX0KCQkJfSk7CgkJCS8v5b2T5pS25Yiw6K6i6ZiF5raI5oGvCgkJCXRoaXMuJGV2ZW4uJG9uKCJub3RpY2VfY2hhbm5lbF9zdWJzY3JpYmUiLChpbmZvKT0+ewoJCQkJbGV0IHJlYyA9IGluZm8uRGF0YS5NZXNzYWdlOwoJCQkJbGV0IHJ0YyA9IHRoaXMudXNlclJ0Y3NbaW5mby5Gcm9tLkd1aWRdLmRlc2s7CgkJCQlydGMuc2V0UmVtb3RlKHJlYy5qc2VwKQoJCQl9KTsKCQl9Cgl9LAoJbW91bnRlZCgpewoJCXRoaXMuZXZlbnMoKTsKCX0KfQo="},{"version":3,"sources":["room.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"room.vue","sourceRoot":"pages/common","sourcesContent":["<template>\r\n\t<el-row>\r\n\t\t<el-col :span=\"24\">\r\n\t\t\t<el-row>\r\n\t\t\t\t<el-col :span=\"8\">\r\n\t\t\t\t\t<el-card id=\"localStream\" style=\"display: inline-block;\">\r\n\t\t\t\t\t</el-card>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"16\">\r\n\t\t\t\t\t<div class=\"js-videobox\">\r\n\t\t\t\t\t\t<videoElement :loading=\"item.loading\" v-for=\"(item,key,i) in userStreams\" :key=\"i\" :mid=\"key\" :stream=\"item.stream\"></videoElement>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\t\t</el-col>\r\n\t</el-row>\r\n</template>\r\n\r\n<script>\r\n\timport videoElement from '@/pages/common/videoElement.vue'\r\n\timport NoticeSDK from '@/utils/noticeSDK/index.js'\r\n\timport RtcSDK from '@/utils/rtcSDK/rtc.js'\r\n\timport conf from '@/conf/conf.js'\r\n\timport {makeGuid} from '../../src/utils/makeGuid.js';\r\n\timport {mapState,mapMutations} from 'vuex'\r\n\timport notice from '@/utils/mixins/notice.js'\r\n\t\r\n\texport default {\r\n\t\tcomputed: {\r\n\t\t\t...mapState([\"uInfo\"]),\r\n\t\t\t...mapState([\"noticeRoom\"]),\r\n\t\t},\r\n\t\tmixins:[notice],\r\n\t\tcomponents:{\r\n\t\t\tvideoElement\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tuserStreams:{},\r\n\t\t\t\tuserRtcs:{},\r\n\t\t\t\ttokens:{},\r\n\t\t\t\tlocalStream:null,\r\n\t\t\t\tmediaStreamTrack:null,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tcheckMedia(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tmediaDevices:navigator != undefined && navigator.mediaDevices != undefined,\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync createVideo(info){\t\t\t\r\n\t\t\t\tlet stream = await this.createLocalSteam();\r\n\t\t\t\tif(stream){\r\n\t\t\t\t\tthis.mediaStreamTrack= typeof stream.stop==='function'?stream:stream.getTracks()[0];\r\n\t\t\t\t\tthis.localStream = stream;\r\n\t\t\t\t\tdocument.getElementById('localStream').innerHTML = \"\";\r\n\t\t\t\t\tconst video = document.createElement('video');\r\n\t\t\t\t\tvideo.width = 300;\r\n\t\t\t\t\tvideo.height = 300;\r\n\t\t\t\t\tvideo.autoplay = true;\r\n\t\t\t\t\tvideo.playsinline = false;\r\n\t\t\t\t\tvideo.controls = false;\r\n\t\t\t\t\tvideo.muted = \"muted\";\r\n\t\t\t\t\tvideo.srcObject = this.localStream;\r\n\t\t\t\t\tlet parentElement = document.getElementById(\"localStream\");\r\n\t\t\t\t\tparentElement.appendChild(video);\r\n\t\t\t\t}\r\n\t\t\t\tif(info)\r\n\t\t\t\t\tthis.$even.$emit(\"user_video_ready\",info)\r\n\t\t\t},\r\n\t\t\tasync createLocalSteam(info) {\r\n\t\t\t\t// console.log(this.checkMedia().mediaDevices);\r\n\t\t\t\tif (!this.checkMedia().mediaDevices) {\r\n\t\t\t\t\tthis.$tips.warning(\"您的设备不支持媒体属性,请先接入硬件设备!\")\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\ttry{\r\n\t\t\t\t\treturn await navigator.mediaDevices.getUserMedia({\r\n\t\t\t\t\t\taudio: true,\r\n\t\t\t\t\t\tvideo: {\r\n\t\t\t\t\t\t\twidth: {\r\n\t\t\t\t\t\t\t\tideal: 300\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\theight: {\r\n\t\t\t\t\t\t\t\tideal: 300\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync createRtcSender(uid, type,ready) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet rtc = new RtcSDK({\r\n\t\t\t\t\tserve: \"stun:stun.stunprotocol.org:3478\",\r\n\t\t\t\t\tready:ready,\r\n\t\t\t\t\tjoin(stream){\r\n\t\t\t\t\t\tthat.$set(that.userStreams, uid, {stream:stream.stream,loading:true})\r\n\t\t\t\t\t\tconsole.log(that.userStreams)\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\trtc.iceState = (e)=>{\r\n\t\t\t\t\tif(e == \"connected\" && that.userStreams[uid]){\r\n\t\t\t\t\t\tthat.userStreams[uid].loading = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\trtc.disconnected= async ()=>{\r\n\t\t\t\t\tlet offer = await rtc.createOffer({\r\n\t\t\t\t\t\tofferToReceiveVideo: true,\r\n\t\t\t\t\t\tofferToReceiveAudio: true\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\ttype:'push',\r\n\t\t\t\t\t\tjsep:offer,\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.noticeRoom.send(uid, sendMsg);\r\n\t\t\t\t}\r\n\t\t\t\trtc.addSteam(this.localStream);\r\n\t\t\t\tthis.setUserRtcs(rtc, uid, type);\r\n\t\t\t\treturn await rtc.createOffer({\r\n\t\t\t\t\tofferToReceiveVideo: true,\r\n\t\t\t\t\tofferToReceiveAudio: true\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsetUserRtcs(rtc,uid,type){\r\n\t\t\t\tif(!this.userRtcs[uid]){\r\n\t\t\t\t\tthis.userRtcs[uid] = new Object();\r\n\t\t\t\t}\r\n\t\t\t\tthis.userRtcs[uid][type] = rtc;\t\r\n\t\t\t},\r\n\t\t\tcreateRoom(info,par){\r\n\t\t\t\tthis.initRoom(info,par);\r\n\t\t\t},\r\n\t\t\tasync createRtcRevice(uid,type,ready){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet rtc = null;\r\n\t\t\t\tif(this.userRtcs[uid] && this.userRtcs[uid][type]){\r\n\t\t\t\t\trtc = this.userRtcs[uid][type];\r\n\t\t\t\t}else{\r\n\t\t\t\t\trtc = new RtcSDK({\r\n\t\t\t\t\t\tserve:\"stun:stun.stunprotocol.org:3478\",\r\n\t\t\t\t\t\tready:ready,\r\n\t\t\t\t\t\tjoin(stream){\r\n\t\t\t\t\t\t\t//that.$set(that.userStreams,uid,stream.stream)\r\n\t\t\t\t\t\t\tthat.$set(that.userStreams, uid, {stream:stream.stream,loading:true})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\trtc.iceState = (e)=>{\r\n\t\t\t\t\tif(e == \"connected\" && that.userStreams[uid]){\r\n\t\t\t\t\t\tthat.userStreams[uid].loading = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//rtc.socure.addTransceiver('audio', { 'direction': 'recvonly' });\r\n\t\t\t\t//rtc.socure.addTransceiver('video', { 'direction': 'recvonly' });\r\n\t\t\t\t//rtc.sendOffer = false;\r\n\t\t\t\trtc.addSteam(this.localStream);\t\t\t\r\n\t\t\t\tif(!this.userRtcs[uid] || !this.userRtcs[uid][type]){\r\n\t\t\t\t\tthis.setUserRtcs(rtc,uid,type);\r\n\t\t\t\t}\r\n\t\t\t\treturn await rtc;\r\n\t\t\t\t//return await rtc.createOffer({ offerToReceiveVideo: true, offerToReceiveAudio: true });\r\n\t\t\t},\r\n\t\t\tevens(){\r\n\t\t\t\tlet self = this;\r\n\t\t\t\t//this.createVideo();\r\n\t\t\t\tthis.$even.$on(\"user_live_leave\",(info)=>{\r\n\t\t\t\t\tconsole.log(this.mediaStreamTrack)\r\n\t\t\t\t\tthis.mediaStreamTrack && this.mediaStreamTrack.stop();\r\n\t\t\t\t\tthis.mediaStreamTrack = null;\r\n\t\t\t\t\tthis.localStream.getTracks()[0].stop();\r\n\t\t\t\t\tthis.localStream.getTracks()[1].stop();\r\n\t\t\t\t\tthis.localStream = null;\r\n\t\t\t\t})\r\n\t\t\t\tthis.$even.$on(\"user_live_launch\",(info)=>{\r\n\t\t\t\t\tthis.createVideo(info);\r\n\t\t\t\t})\r\n\t\t\t\t//当前用户主动退出\r\n\t\t\t\tthis.$even.$on(\"user_live_leave\",(info)=>{\r\n\t\t\t\t\tthis.userRtcs = {};\r\n\t\t\t\t\tlet box = document.getElementsByClassName('js-videobox')[0];\r\n\t\t\t\t\tbox.innerHTML = \"\";\r\n\t\t\t\t\tthis.userStreams = {};\r\n\t\t\t\t})\r\n\t\t\t\t//当对方选择以视频方式接通时\r\n\t\t\t\tthis.$even.$on(\"notice_live_connectall\",(info)=>{\r\n\t\t\t\t\t//当前用户已在房间\r\n\t\t\t\t\tif(this.noticeRoom&&this.noticeRoom.info != undefined){\r\n\t\t\t\t\t\tvar msg = {\r\n\t\t\t\t\t\t\tto: info.From.Guid,\r\n\t\t\t\t\t\t\tinfo: {\r\n\t\t\t\t\t\t\t\tPlate: this.noticeRoom.info.plate,\r\n\t\t\t\t\t\t\t\tCode: this.noticeRoom.info.code,\r\n\t\t\t\t\t\t\t\tVideoType:  info.Data.Message.Answer\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttype: ''\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.noticeEx.send(msg.to, msg.info);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//当前用户不在房间\r\n\t\t\t\t\t\tthis.createRoom(info)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//当房间已建立\r\n\t\t\t\tthis.$even.$on(\"user_room_create\",(info,notice)=>{\r\n\t\t\t\t\tvar msg = {\r\n\t\t\t\t\t\tto: info.From.Guid,\r\n\t\t\t\t\t\tinfo: {\r\n\t\t\t\t\t\t\tPlate: notice.info.plate,\r\n\t\t\t\t\t\t\tCode: notice.info.code,\r\n\t\t\t\t\t\t\tVideoType: info.Data.Message.Answer,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttype: ''\r\n\t\t\t\t\t};\t\r\n\t\t\t\t\tthis.noticeEx.send(msg.to, msg.info);\r\n\t\t\t\t});\r\n\t\t\t\t//收到创建房间指令\r\n\t\t\t\tthis.$even.$on(\"notice_room_build\",(info)=>{\r\n\t\t\t\t\tthis.createRoom(info,{plate:info.Data.Message.Plate})\r\n\t\t\t\t});\r\n\t\t\t\t//收到加入房间指令\r\n\t\t\t\tthis.$even.$on(\"notice_room_join\",(info)=>{\r\n\t\t\t\t\tlet ready = (token) => {\r\n\t\t\t\t\t\tlet rtc = self.userRtcs[info.Data.Accept.Guid].desk;\r\n\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\ttype:'token',\r\n\t\t\t\t\t\t\ttoken:token,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//检查是否存在等待接收的token\r\n\t\t\t\t\t\tif(this.tokens[info.From.Guid]){\r\n\t\t\t\t\t\t\trtc.addIceCandidate(this.tokens[info.From.Guid]);\r\n\t\t\t\t\t\t\tdelete this.tokens[info.From.Guid];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.noticeRoom.send(info.Data.Accept.Guid, sendMsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\tthis.createRtcSender(info.Data.Accept.Guid,'desk',ready).then((offer)=>{\r\n\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\ttype:'push',\r\n\t\t\t\t\t\t\tjsep:offer,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.noticeRoom.send(info.Data.Accept.Guid, sendMsg);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//互换token指令\r\n\t\t\t\tthis.$even.$on(\"notice_channel_token\",(info)=>{\r\n\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\t//当这条消息接受时，有可能本地应答信令还未创建完成\r\n\t\t\t\t\tif(this.userRtcs[info.From.Guid]){\r\n\t\t\t\t\t\tlet rtc = this.userRtcs[info.From.Guid].desk;\r\n\t\t\t\t\t\trtc.addIceCandidate(rec.token);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//暂存\r\n\t\t\t\t\t\tthis.tokens[info.From.Guid] = rec.token;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//收到退出房间指令\r\n\t\t\t\tthis.$even.$on(\"notice_room_leave\",(info)=>{\r\n\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tmessage: info.Data.Accept.Name + '退出视频！',\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet rtc = this.userRtcs[info.Data.Accept.Guid].desk;\r\n\t\t\t\t\trtc.socure.close();\r\n\t\t\t\t\tdelete this.userRtcs[info.Data.Accept.Guid];\r\n\t\t\t\t\tvar remove = document.getElementById(info.Data.Accept.Guid);\r\n\t\t\t\t\tremove.parentNode.removeChild(remove);\r\n\t\t\t\t\tdelete this.userStreams[info.Data.Accept.Guid]\r\n\t\t\t\t});\r\n\t\t\t\t//当收到push消息\r\n\t\t\t\tthis.$even.$on(\"notice_channel_push\",(info)=>{\r\n\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\tlet ready = (token) => {\r\n\t\t\t\t\t\tlet rtc = self.userRtcs[info.From.Guid].desk;\r\n\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\t\ttype:'token',\r\n\t\t\t\t\t\t\t\ttoken:token\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//检查是否存在等待接收的token\r\n\t\t\t\t\t\tif(this.tokens[info.From.Guid]){\r\n\t\t\t\t\t\t\trtc.addIceCandidate(this.tokens[info.From.Guid]);\r\n\t\t\t\t\t\t\tdelete this.tokens[info.From.Guid];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.noticeRoom.send(info.From.Guid, sendMsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\tthis.createRtcRevice(info.From.Guid,'desk',ready).then((rtc)=>{\r\n\t\t\t\t\t\trtc.createAnswer(rec.jsep).then((answer)=>{\r\n\t\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\t\t\ttype:'subscribe',\r\n\t\t\t\t\t\t\t\t\tjsep:answer,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.noticeRoom.send(info.From.Guid, sendMsg);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//当收到订阅消息\r\n\t\t\t\tthis.$even.$on(\"notice_channel_subscribe\",(info)=>{\r\n\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\tlet rtc = this.userRtcs[info.From.Guid].desk;\r\n\t\t\t\t\trtc.setRemote(rec.jsep)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t\tthis.evens();\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"]}]}