{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GaeaProject\\jpn_medical_web\\pages\\common\\room.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\pages\\common\\room.vue","mtime":1596181689759},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB2aWRlb0VsZW1lbnQgZnJvbSAnQC9wYWdlcy9jb21tb24vdmlkZW9FbGVtZW50LnZ1ZScKaW1wb3J0IE5vdGljZVNESyBmcm9tICdAL3V0aWxzL25vdGljZVNESy9pbmRleC5qcycKaW1wb3J0IFJ0Y1NESyBmcm9tICdAL3V0aWxzL3J0Y1NESy9ydGMuanMnCmltcG9ydCBjb25mIGZyb20gJ0AvY29uZi9jb25mLmpzJwppbXBvcnQge21ha2VHdWlkfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvbWFrZUd1aWQuanMnOwppbXBvcnQge21hcFN0YXRlLG1hcE11dGF0aW9uc30gZnJvbSAndnVleCcKaW1wb3J0IG5vdGljZSBmcm9tICdAL3V0aWxzL21peGlucy9ub3RpY2UuanMnCgpleHBvcnQgZGVmYXVsdCB7Cgljb21wdXRlZDogewoJCS4uLm1hcFN0YXRlKFsidUluZm8iXSksCgkJLi4ubWFwU3RhdGUoWyJub3RpY2VSb29tIl0pLAoJfSwKCW1peGluczpbbm90aWNlXSwKCWNvbXBvbmVudHM6ewoJCXZpZGVvRWxlbWVudAoJfSwKCWRhdGEoKXsKCQlyZXR1cm4gewoJCQl1c2VyU3RyZWFtczp7fSwKCQkJdXNlclJ0Y3M6e30sCgkJCXRva2Vuczp7fSwKCQkJbG9jYWxTdHJlYW06bnVsbCwKCQkJbWVkaWFTdHJlYW1UcmFjazpudWxsLAoJCX0KCX0sCgltZXRob2RzOnsKCQljaGVja01lZGlhKCl7CgkJCXJldHVybiB7CgkJCQltZWRpYURldmljZXM6bmF2aWdhdG9yICE9IHVuZGVmaW5lZCAmJiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICE9IHVuZGVmaW5lZCwKCQkJfQoJCX0sCgkJYXN5bmMgY3JlYXRlVmlkZW8oaW5mbyl7CQkJCgkJCWxldCBzdHJlYW0gPSBhd2FpdCB0aGlzLmNyZWF0ZUxvY2FsU3RlYW0oKTsKCQkJaWYoc3RyZWFtKXsKCQkJCXRoaXMubWVkaWFTdHJlYW1UcmFjaz0gdHlwZW9mIHN0cmVhbS5zdG9wPT09J2Z1bmN0aW9uJz9zdHJlYW06c3RyZWFtLmdldFRyYWNrcygpWzBdOwoJCQkJdGhpcy5sb2NhbFN0cmVhbSA9IHN0cmVhbTsKCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2NhbFN0cmVhbScpLmlubmVySFRNTCA9ICIiOwoJCQkJY29uc3QgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpOwoJCQkJdmlkZW8ud2lkdGggPSAzMDA7CgkJCQl2aWRlby5oZWlnaHQgPSAzMDA7CgkJCQl2aWRlby5hdXRvcGxheSA9IHRydWU7CgkJCQl2aWRlby5wbGF5c2lubGluZSA9IGZhbHNlOwoJCQkJdmlkZW8uY29udHJvbHMgPSBmYWxzZTsKCQkJCXZpZGVvLm11dGVkID0gIm11dGVkIjsKCQkJCXZpZGVvLnNyY09iamVjdCA9IHRoaXMubG9jYWxTdHJlYW07CgkJCQlsZXQgcGFyZW50RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsb2NhbFN0cmVhbSIpOwoJCQkJcGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh2aWRlbyk7CgkJCX0KCQkJaWYoaW5mbykKCQkJCXRoaXMuJGV2ZW4uJGVtaXQoInVzZXJfdmlkZW9fcmVhZHkiLGluZm8pCgkJfSwKCQlhc3luYyBjcmVhdGVMb2NhbFN0ZWFtKGluZm8pIHsKCQkJaWYgKCF0aGlzLmNoZWNrTWVkaWEoKS5tZWRpYURldmljZXMpIHsKCQkJCXRoaXMuJHRpcHMud2Fybigi5oKo55qE6K6+5aSH5LiN5pSv5oyB5aqS5L2T5bGe5oCnLOivt+WFiOaOpeWFpeehrOS7tuiuvuWkhyEiKQoJCQkJcmV0dXJuCgkJCX0KCQkJdHJ5ewoJCQkJcmV0dXJuIGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsKCQkJCQlhdWRpbzogdHJ1ZSwKCQkJCQl2aWRlbzogewoJCQkJCQl3aWR0aDogewoJCQkJCQkJaWRlYWw6IDEwODAKCQkJCQkJfSwKCQkJCQkJaGVpZ2h0OiB7CgkJCQkJCQlpZGVhbDogNzIwCgkJCQkJCX0KCQkJCQl9CgkJCQl9KTsKCQkJfWNhdGNoKGUpewoJCQkJcmV0dXJuIG51bGw7CgkJCX0KCQl9LAoJCWFzeW5jIGNyZWF0ZVJ0Y1NlbmRlcih1aWQsIHR5cGUscmVhZHkpIHsKCQkJbGV0IHRoYXQgPSB0aGlzOwoJCQlsZXQgcnRjID0gbmV3IFJ0Y1NESyh7CgkJCQlzZXJ2ZTogInN0dW46c3R1bi5zdHVucHJvdG9jb2wub3JnOjM0NzgiLAoJCQkJcmVhZHk6cmVhZHksCgkJCQlqb2luKHN0cmVhbSl7CgkJCQkJdGhhdC4kc2V0KHRoYXQudXNlclN0cmVhbXMsIHVpZCwgc3RyZWFtLnN0cmVhbSkKCQkJCX0sCgkJCX0pOwoJCQlydGMuYWRkU3RlYW0odGhpcy5sb2NhbFN0cmVhbSk7CgkJCXRoaXMuc2V0VXNlclJ0Y3MocnRjLCB1aWQsIHR5cGUpOwoJCQlyZXR1cm4gYXdhaXQgcnRjLmNyZWF0ZU9mZmVyKHsKCQkJCW9mZmVyVG9SZWNlaXZlVmlkZW86IHRydWUsCgkJCQlvZmZlclRvUmVjZWl2ZUF1ZGlvOiB0cnVlCgkJCX0pOwoJCX0sCgkJc2V0VXNlclJ0Y3MocnRjLHVpZCx0eXBlKXsKCQkJaWYoIXRoaXMudXNlclJ0Y3NbdWlkXSl7CgkJCQl0aGlzLnVzZXJSdGNzW3VpZF0gPSBuZXcgT2JqZWN0KCk7CgkJCX0KCQkJdGhpcy51c2VyUnRjc1t1aWRdW3R5cGVdID0gcnRjOwkKCQl9LAoJCWNyZWF0ZVJvb20oaW5mbyxwYXIpewoJCQl0aGlzLmluaXRSb29tKGluZm8scGFyKTsKCQl9LAoJCWFzeW5jIGNyZWF0ZVJ0Y1JldmljZSh1aWQsdHlwZSxyZWFkeSl7CgkJCWxldCB0aGF0ID0gdGhpczsKCQkJbGV0IHJ0YyA9IG5ldyBSdGNTREsoewoJCQkJc2VydmU6InN0dW46c3R1bi5zdHVucHJvdG9jb2wub3JnOjM0NzgiLAoJCQkJcmVhZHk6cmVhZHksCgkJCQlqb2luKHN0cmVhbSl7CgkJCQkJdGhhdC4kc2V0KHRoYXQudXNlclN0cmVhbXMsdWlkLHN0cmVhbS5zdHJlYW0pCgkJCQl9LAoJCQl9KTsKCQkJLy9ydGMuc29jdXJlLmFkZFRyYW5zY2VpdmVyKCdhdWRpbycsIHsgJ2RpcmVjdGlvbic6ICdyZWN2b25seScgfSk7CgkJCS8vcnRjLnNvY3VyZS5hZGRUcmFuc2NlaXZlcigndmlkZW8nLCB7ICdkaXJlY3Rpb24nOiAncmVjdm9ubHknIH0pOwoJCQkvL3J0Yy5zZW5kT2ZmZXIgPSBmYWxzZTsKCQkJcnRjLmFkZFN0ZWFtKHRoaXMubG9jYWxTdHJlYW0pOwkJCQoJCQlpZighdGhpcy51c2VyUnRjc1t1aWRdIHx8ICF0aGlzLnVzZXJSdGNzW3VpZF1bdHlwZV0pewoJCQkJdGhpcy5zZXRVc2VyUnRjcyhydGMsdWlkLHR5cGUpOwoJCQl9CgkJCXJldHVybiBhd2FpdCBydGM7CgkJCS8vcmV0dXJuIGF3YWl0IHJ0Yy5jcmVhdGVPZmZlcih7IG9mZmVyVG9SZWNlaXZlVmlkZW86IHRydWUsIG9mZmVyVG9SZWNlaXZlQXVkaW86IHRydWUgfSk7CgkJfSwKCQlldmVucygpewoJCQlsZXQgc2VsZiA9IHRoaXM7CgkJCS8vdGhpcy5jcmVhdGVWaWRlbygpOwoJCQl0aGlzLiRldmVuLiRvbigidXNlcl9saXZlX2xlYXZlIiwoaW5mbyk9PnsKCQkJCWNvbnNvbGUubG9nKHRoaXMubWVkaWFTdHJlYW1UcmFjaykKCQkJCXRoaXMubWVkaWFTdHJlYW1UcmFjayAmJiB0aGlzLm1lZGlhU3RyZWFtVHJhY2suc3RvcCgpOwoJCQkJdGhpcy5tZWRpYVN0cmVhbVRyYWNrID0gbnVsbDsKCQkJfSkKCQkJdGhpcy4kZXZlbi4kb24oInVzZXJfbGl2ZV9sYXVuY2giLChpbmZvKT0+ewoJCQkJdGhpcy5jcmVhdGVWaWRlbyhpbmZvKTsKCQkJfSkKCQkJLy/lvZPliY3nlKjmiLfkuLvliqjpgIDlh7oKCQkJdGhpcy4kZXZlbi4kb24oInVzZXJfbGl2ZV9sZWF2ZSIsKGluZm8pPT57CgkJCQl0aGlzLnVzZXJSdGNzID0ge307CgkJCQlsZXQgYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnanMtdmlkZW9ib3gnKVswXTsKCQkJCWJveC5pbm5lckhUTUwgPSAiIjsKCQkJCXRoaXMudXNlclN0cmVhbXMgPSB7fTsKCQkJfSkKCQkJLy/lvZPlr7nmlrnpgInmi6nku6Xop4bpopHmlrnlvI/mjqXpgJrml7YKCQkJdGhpcy4kZXZlbi4kb24oIm5vdGljZV9saXZlX2Nvbm5lY3RhbGwiLChpbmZvKT0+ewoJCQkJLy/lvZPliY3nlKjmiLflt7LlnKjmiL/pl7QKCQkJCWlmKHRoaXMubm90aWNlUm9vbSYmdGhpcy5ub3RpY2VSb29tLmluZm8gIT0gdW5kZWZpbmVkKXsKCQkJCQl2YXIgbXNnID0gewoJCQkJCQl0bzogaW5mby5Gcm9tLkd1aWQsCgkJCQkJCWluZm86IHsKCQkJCQkJCVBsYXRlOiB0aGlzLm5vdGljZVJvb20uaW5mby5wbGF0ZSwKCQkJCQkJCUNvZGU6IHRoaXMubm90aWNlUm9vbS5pbmZvLmNvZGUsCgkJCQkJCQlWaWRlb1R5cGU6ICBpbmZvLkRhdGEuTWVzc2FnZS5BbnN3ZXIKCQkJCQkJfSwKCQkJCQkJdHlwZTogJycKCQkJCQl9OwoJCQkJCQoJCQkJCXRoaXMubm90aWNlRXguc2VuZChtc2cudG8sIG1zZy5pbmZvKTsKCQkJCX0gZWxzZSB7CgkJCQkJLy/lvZPliY3nlKjmiLfkuI3lnKjmiL/pl7QKCQkJCQl0aGlzLmNyZWF0ZVJvb20oaW5mbykKCQkJCX0KCQkJfSk7CgkJCS8v5b2T5oi/6Ze05bey5bu656uLCgkJCXRoaXMuJGV2ZW4uJG9uKCJ1c2VyX3Jvb21fY3JlYXRlIiwoaW5mbyxub3RpY2UpPT57CgkJCQl2YXIgbXNnID0gewoJCQkJCXRvOiBpbmZvLkZyb20uR3VpZCwKCQkJCQlpbmZvOiB7CgkJCQkJCVBsYXRlOiBub3RpY2UuaW5mby5wbGF0ZSwKCQkJCQkJQ29kZTogbm90aWNlLmluZm8uY29kZSwKCQkJCQkJVmlkZW9UeXBlOiBpbmZvLkRhdGEuTWVzc2FnZS5BbnN3ZXIsCgkJCQkJfSwKCQkJCQl0eXBlOiAnJwoJCQkJfTsJCgkJCQl0aGlzLm5vdGljZUV4LnNlbmQobXNnLnRvLCBtc2cuaW5mbyk7CgkJCX0pOwoJCQkvL+aUtuWIsOWIm+W7uuaIv+mXtOaMh+S7pAoJCQl0aGlzLiRldmVuLiRvbigibm90aWNlX3Jvb21fYnVpbGQiLChpbmZvKT0+ewoJCQkJdGhpcy5jcmVhdGVSb29tKGluZm8se3BsYXRlOmluZm8uRGF0YS5NZXNzYWdlLlBsYXRlfSkKCQkJfSk7CgkJCS8v5pS25Yiw5Yqg5YWl5oi/6Ze05oyH5LukCgkJCXRoaXMuJGV2ZW4uJG9uKCJub3RpY2Vfcm9vbV9qb2luIiwoaW5mbyk9PnsKCQkJCWxldCByZWFkeSA9ICh0b2tlbikgPT4gewoJCQkJCWxldCBydGMgPSBzZWxmLnVzZXJSdGNzW2luZm8uRGF0YS5BY2NlcHQuR3VpZF0uZGVzazsKCQkJCQlsZXQgc2VuZE1zZyA9IHsKCQkJCQkJdHlwZTondG9rZW4nLAoJCQkJCQl0b2tlbjp0b2tlbiwKCQkJCQl9CgkJCQkJLy/mo4Dmn6XmmK/lkKblrZjlnKjnrYnlvoXmjqXmlLbnmoR0b2tlbgoJCQkJCWlmKHRoaXMudG9rZW5zW2luZm8uRnJvbS5HdWlkXSl7CgkJCQkJCXJ0Yy5hZGRJY2VDYW5kaWRhdGUodGhpcy50b2tlbnNbaW5mby5Gcm9tLkd1aWRdKTsKCQkJCQkJZGVsZXRlIHRoaXMudG9rZW5zW2luZm8uRnJvbS5HdWlkXTsKCQkJCQl9CgkJCQkJc2VsZi5ub3RpY2VSb29tLnNlbmQoaW5mby5EYXRhLkFjY2VwdC5HdWlkLCBzZW5kTXNnKTsKCQkJCX0KCQkJCXRoaXMuY3JlYXRlUnRjU2VuZGVyKGluZm8uRGF0YS5BY2NlcHQuR3VpZCwnZGVzaycscmVhZHkpLnRoZW4oKG9mZmVyKT0+ewoJCQkJCWxldCBzZW5kTXNnID0gewoJCQkJCQl0eXBlOidwdXNoJywKCQkJCQkJanNlcDpvZmZlciwKCQkJCQl9CgkJCQkJc2VsZi5ub3RpY2VSb29tLnNlbmQoaW5mby5EYXRhLkFjY2VwdC5HdWlkLCBzZW5kTXNnKTsKCQkJCX0pCgkJCX0pOwoJCQkvL+S6kuaNonRva2Vu5oyH5LukCgkJCXRoaXMuJGV2ZW4uJG9uKCJub3RpY2VfY2hhbm5lbF90b2tlbiIsKGluZm8pPT57CgkJCQlsZXQgcmVjID0gaW5mby5EYXRhLk1lc3NhZ2U7CgkJCQkvL+W9k+i/meadoea2iOaBr+aOpeWPl+aXtu+8jOacieWPr+iDveacrOWcsOW6lOetlOS/oeS7pOi/mOacquWIm+W7uuWujOaIkAoJCQkJaWYodGhpcy51c2VyUnRjc1tpbmZvLkZyb20uR3VpZF0pewoJCQkJCWxldCBydGMgPSB0aGlzLnVzZXJSdGNzW2luZm8uRnJvbS5HdWlkXS5kZXNrOwoJCQkJCXJ0Yy5hZGRJY2VDYW5kaWRhdGUocmVjLnRva2VuKTsKCQkJCX1lbHNlewoJCQkJCS8v5pqC5a2YCgkJCQkJdGhpcy50b2tlbnNbaW5mby5Gcm9tLkd1aWRdID0gcmVjLnRva2VuOwoJCQkJfQoJCQl9KTsKCQkJLy/mlLbliLDpgIDlh7rmiL/pl7TmjIfku6QKCQkJdGhpcy4kZXZlbi4kb24oIm5vdGljZV9yb29tX2xlYXZlIiwoaW5mbyk9PnsKCQkJCXRoaXMuJG5vdGlmeSh7CgkJCQkJdGl0bGU6ICfmj5DnpLonLAoJCQkJCW1lc3NhZ2U6IGluZm8uRGF0YS5BY2NlcHQuTmFtZSArICfpgIDlh7rop4bpopHvvIEnLAoJCQkJfSk7CgkJCQlsZXQgcnRjID0gdGhpcy51c2VyUnRjc1tpbmZvLkRhdGEuQWNjZXB0Lkd1aWRdLmRlc2s7CgkJCQlydGMuc29jdXJlLmNsb3NlKCk7CgkJCQlkZWxldGUgdGhpcy51c2VyUnRjc1tpbmZvLkRhdGEuQWNjZXB0Lkd1aWRdOwoJCQkJdmFyIHJlbW92ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGluZm8uRGF0YS5BY2NlcHQuR3VpZCk7CgkJCQlyZW1vdmUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChyZW1vdmUpOwoJCQkJZGVsZXRlIHRoaXMudXNlclN0cmVhbXNbaW5mby5EYXRhLkFjY2VwdC5HdWlkXQoJCQl9KTsKCQkJLy/lvZPmlLbliLBwdXNo5raI5oGvCgkJCXRoaXMuJGV2ZW4uJG9uKCJub3RpY2VfY2hhbm5lbF9wdXNoIiwoaW5mbyk9PnsKCQkJCWxldCByZWMgPSBpbmZvLkRhdGEuTWVzc2FnZTsKCQkJCWxldCByZWFkeSA9ICh0b2tlbikgPT4gewoJCQkJCWxldCBydGMgPSBzZWxmLnVzZXJSdGNzW2luZm8uRnJvbS5HdWlkXS5kZXNrOwoJCQkJCWxldCBzZW5kTXNnID0gewoJCQkJCQkJdHlwZTondG9rZW4nLAoJCQkJCQkJdG9rZW46dG9rZW4KCQkJCQkJfQoJCQkJCS8v5qOA5p+l5piv5ZCm5a2Y5Zyo562J5b6F5o6l5pS255qEdG9rZW4KCQkJCQlpZih0aGlzLnRva2Vuc1tpbmZvLkZyb20uR3VpZF0pewoJCQkJCQlydGMuYWRkSWNlQ2FuZGlkYXRlKHRoaXMudG9rZW5zW2luZm8uRnJvbS5HdWlkXSk7CgkJCQkJCWRlbGV0ZSB0aGlzLnRva2Vuc1tpbmZvLkZyb20uR3VpZF07CgkJCQkJfQoJCQkJCXRoaXMubm90aWNlUm9vbS5zZW5kKGluZm8uRnJvbS5HdWlkLCBzZW5kTXNnKTsKCQkJCX0KCQkJCXRoaXMuY3JlYXRlUnRjUmV2aWNlKGluZm8uRnJvbS5HdWlkLCdkZXNrJyxyZWFkeSkudGhlbigocnRjKT0+ewoJCQkJCXJ0Yy5jcmVhdGVBbnN3ZXIocmVjLmpzZXApLnRoZW4oKGFuc3dlcik9PnsKCQkJCQkJbGV0IHNlbmRNc2cgPSB7CgkJCQkJCQkJdHlwZTonc3Vic2NyaWJlJywKCQkJCQkJCQlqc2VwOmFuc3dlciwKCQkJCQkJCX0KCQkJCQkJdGhpcy5ub3RpY2VSb29tLnNlbmQoaW5mby5Gcm9tLkd1aWQsIHNlbmRNc2cpOwoJCQkJCX0pCgkJCQl9KQoJCQl9KTsKCQkJLy/lvZPmlLbliLDorqLpmIXmtojmga8KCQkJdGhpcy4kZXZlbi4kb24oIm5vdGljZV9jaGFubmVsX3N1YnNjcmliZSIsKGluZm8pPT57CgkJCQlsZXQgcmVjID0gaW5mby5EYXRhLk1lc3NhZ2U7CgkJCQlsZXQgcnRjID0gdGhpcy51c2VyUnRjc1tpbmZvLkZyb20uR3VpZF0uZGVzazsKCQkJCXJ0Yy5zZXRSZW1vdGUocmVjLmpzZXApCgkJCX0pOwoJCX0KCX0sCgltb3VudGVkKCl7CgkJdGhpcy5ldmVucygpOwoJfQp9Cg=="},{"version":3,"sources":["room.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"room.vue","sourceRoot":"pages/common","sourcesContent":["<template>\r\n\t<el-row>\r\n\t\t<el-col :span=\"24\">\r\n\t\t\t<el-row>\r\n\t\t\t\t<el-col :span=\"8\">\r\n\t\t\t\t\t<el-card id=\"localStream\" style=\"display: inline-block;margin:10px\">\r\n\t\t\t\t\t</el-card>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"16\">\r\n\t\t\t\t\t<div class=\"js-videobox\">\r\n\t\t\t\t\t\t<videoElement v-for=\"(item,key,i) in userStreams\" :key=\"i\" :mid=\"key\" :stream=\"item\"></videoElement>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\t\t</el-col>\r\n\t</el-row>\n</template>\n\n<script>\r\n\timport videoElement from '@/pages/common/videoElement.vue'\r\n\timport NoticeSDK from '@/utils/noticeSDK/index.js'\r\n\timport RtcSDK from '@/utils/rtcSDK/rtc.js'\r\n\timport conf from '@/conf/conf.js'\r\n\timport {makeGuid} from '../../src/utils/makeGuid.js';\r\n\timport {mapState,mapMutations} from 'vuex'\r\n\timport notice from '@/utils/mixins/notice.js'\r\n\t\r\n\texport default {\r\n\t\tcomputed: {\r\n\t\t\t...mapState([\"uInfo\"]),\r\n\t\t\t...mapState([\"noticeRoom\"]),\r\n\t\t},\r\n\t\tmixins:[notice],\r\n\t\tcomponents:{\r\n\t\t\tvideoElement\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tuserStreams:{},\r\n\t\t\t\tuserRtcs:{},\r\n\t\t\t\ttokens:{},\r\n\t\t\t\tlocalStream:null,\r\n\t\t\t\tmediaStreamTrack:null,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tcheckMedia(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tmediaDevices:navigator != undefined && navigator.mediaDevices != undefined,\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync createVideo(info){\t\t\t\r\n\t\t\t\tlet stream = await this.createLocalSteam();\r\n\t\t\t\tif(stream){\r\n\t\t\t\t\tthis.mediaStreamTrack= typeof stream.stop==='function'?stream:stream.getTracks()[0];\r\n\t\t\t\t\tthis.localStream = stream;\r\n\t\t\t\t\tdocument.getElementById('localStream').innerHTML = \"\";\r\n\t\t\t\t\tconst video = document.createElement('video');\r\n\t\t\t\t\tvideo.width = 300;\r\n\t\t\t\t\tvideo.height = 300;\r\n\t\t\t\t\tvideo.autoplay = true;\r\n\t\t\t\t\tvideo.playsinline = false;\r\n\t\t\t\t\tvideo.controls = false;\r\n\t\t\t\t\tvideo.muted = \"muted\";\r\n\t\t\t\t\tvideo.srcObject = this.localStream;\r\n\t\t\t\t\tlet parentElement = document.getElementById(\"localStream\");\r\n\t\t\t\t\tparentElement.appendChild(video);\r\n\t\t\t\t}\r\n\t\t\t\tif(info)\r\n\t\t\t\t\tthis.$even.$emit(\"user_video_ready\",info)\r\n\t\t\t},\r\n\t\t\tasync createLocalSteam(info) {\r\n\t\t\t\tif (!this.checkMedia().mediaDevices) {\r\n\t\t\t\t\tthis.$tips.warn(\"您的设备不支持媒体属性,请先接入硬件设备!\")\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\ttry{\r\n\t\t\t\t\treturn await navigator.mediaDevices.getUserMedia({\r\n\t\t\t\t\t\taudio: true,\r\n\t\t\t\t\t\tvideo: {\r\n\t\t\t\t\t\t\twidth: {\r\n\t\t\t\t\t\t\t\tideal: 1080\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\theight: {\r\n\t\t\t\t\t\t\t\tideal: 720\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync createRtcSender(uid, type,ready) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet rtc = new RtcSDK({\r\n\t\t\t\t\tserve: \"stun:stun.stunprotocol.org:3478\",\r\n\t\t\t\t\tready:ready,\r\n\t\t\t\t\tjoin(stream){\r\n\t\t\t\t\t\tthat.$set(that.userStreams, uid, stream.stream)\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\trtc.addSteam(this.localStream);\r\n\t\t\t\tthis.setUserRtcs(rtc, uid, type);\r\n\t\t\t\treturn await rtc.createOffer({\r\n\t\t\t\t\tofferToReceiveVideo: true,\r\n\t\t\t\t\tofferToReceiveAudio: true\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsetUserRtcs(rtc,uid,type){\r\n\t\t\t\tif(!this.userRtcs[uid]){\r\n\t\t\t\t\tthis.userRtcs[uid] = new Object();\r\n\t\t\t\t}\r\n\t\t\t\tthis.userRtcs[uid][type] = rtc;\t\r\n\t\t\t},\r\n\t\t\tcreateRoom(info,par){\r\n\t\t\t\tthis.initRoom(info,par);\r\n\t\t\t},\r\n\t\t\tasync createRtcRevice(uid,type,ready){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet rtc = new RtcSDK({\r\n\t\t\t\t\tserve:\"stun:stun.stunprotocol.org:3478\",\r\n\t\t\t\t\tready:ready,\r\n\t\t\t\t\tjoin(stream){\r\n\t\t\t\t\t\tthat.$set(that.userStreams,uid,stream.stream)\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\t//rtc.socure.addTransceiver('audio', { 'direction': 'recvonly' });\r\n\t\t\t\t//rtc.socure.addTransceiver('video', { 'direction': 'recvonly' });\r\n\t\t\t\t//rtc.sendOffer = false;\r\n\t\t\t\trtc.addSteam(this.localStream);\t\t\t\r\n\t\t\t\tif(!this.userRtcs[uid] || !this.userRtcs[uid][type]){\r\n\t\t\t\t\tthis.setUserRtcs(rtc,uid,type);\r\n\t\t\t\t}\r\n\t\t\t\treturn await rtc;\r\n\t\t\t\t//return await rtc.createOffer({ offerToReceiveVideo: true, offerToReceiveAudio: true });\r\n\t\t\t},\r\n\t\t\tevens(){\r\n\t\t\t\tlet self = this;\r\n\t\t\t\t//this.createVideo();\r\n\t\t\t\tthis.$even.$on(\"user_live_leave\",(info)=>{\r\n\t\t\t\t\tconsole.log(this.mediaStreamTrack)\r\n\t\t\t\t\tthis.mediaStreamTrack && this.mediaStreamTrack.stop();\r\n\t\t\t\t\tthis.mediaStreamTrack = null;\r\n\t\t\t\t})\r\n\t\t\t\tthis.$even.$on(\"user_live_launch\",(info)=>{\r\n\t\t\t\t\tthis.createVideo(info);\r\n\t\t\t\t})\r\n\t\t\t\t//当前用户主动退出\r\n\t\t\t\tthis.$even.$on(\"user_live_leave\",(info)=>{\r\n\t\t\t\t\tthis.userRtcs = {};\r\n\t\t\t\t\tlet box = document.getElementsByClassName('js-videobox')[0];\r\n\t\t\t\t\tbox.innerHTML = \"\";\r\n\t\t\t\t\tthis.userStreams = {};\r\n\t\t\t\t})\r\n\t\t\t\t//当对方选择以视频方式接通时\r\n\t\t\t\tthis.$even.$on(\"notice_live_connectall\",(info)=>{\r\n\t\t\t\t\t//当前用户已在房间\r\n\t\t\t\t\tif(this.noticeRoom&&this.noticeRoom.info != undefined){\r\n\t\t\t\t\t\tvar msg = {\r\n\t\t\t\t\t\t\tto: info.From.Guid,\r\n\t\t\t\t\t\t\tinfo: {\r\n\t\t\t\t\t\t\t\tPlate: this.noticeRoom.info.plate,\r\n\t\t\t\t\t\t\t\tCode: this.noticeRoom.info.code,\r\n\t\t\t\t\t\t\t\tVideoType:  info.Data.Message.Answer\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttype: ''\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.noticeEx.send(msg.to, msg.info);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//当前用户不在房间\r\n\t\t\t\t\t\tthis.createRoom(info)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//当房间已建立\r\n\t\t\t\tthis.$even.$on(\"user_room_create\",(info,notice)=>{\r\n\t\t\t\t\tvar msg = {\r\n\t\t\t\t\t\tto: info.From.Guid,\r\n\t\t\t\t\t\tinfo: {\r\n\t\t\t\t\t\t\tPlate: notice.info.plate,\r\n\t\t\t\t\t\t\tCode: notice.info.code,\r\n\t\t\t\t\t\t\tVideoType: info.Data.Message.Answer,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttype: ''\r\n\t\t\t\t\t};\t\r\n\t\t\t\t\tthis.noticeEx.send(msg.to, msg.info);\r\n\t\t\t\t});\r\n\t\t\t\t//收到创建房间指令\r\n\t\t\t\tthis.$even.$on(\"notice_room_build\",(info)=>{\r\n\t\t\t\t\tthis.createRoom(info,{plate:info.Data.Message.Plate})\r\n\t\t\t\t});\r\n\t\t\t\t//收到加入房间指令\r\n\t\t\t\tthis.$even.$on(\"notice_room_join\",(info)=>{\r\n\t\t\t\t\tlet ready = (token) => {\r\n\t\t\t\t\t\tlet rtc = self.userRtcs[info.Data.Accept.Guid].desk;\r\n\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\ttype:'token',\r\n\t\t\t\t\t\t\ttoken:token,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//检查是否存在等待接收的token\r\n\t\t\t\t\t\tif(this.tokens[info.From.Guid]){\r\n\t\t\t\t\t\t\trtc.addIceCandidate(this.tokens[info.From.Guid]);\r\n\t\t\t\t\t\t\tdelete this.tokens[info.From.Guid];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.noticeRoom.send(info.Data.Accept.Guid, sendMsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.createRtcSender(info.Data.Accept.Guid,'desk',ready).then((offer)=>{\r\n\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\ttype:'push',\r\n\t\t\t\t\t\t\tjsep:offer,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.noticeRoom.send(info.Data.Accept.Guid, sendMsg);\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\t//互换token指令\r\n\t\t\t\tthis.$even.$on(\"notice_channel_token\",(info)=>{\r\n\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\t//当这条消息接受时，有可能本地应答信令还未创建完成\r\n\t\t\t\t\tif(this.userRtcs[info.From.Guid]){\r\n\t\t\t\t\t\tlet rtc = this.userRtcs[info.From.Guid].desk;\r\n\t\t\t\t\t\trtc.addIceCandidate(rec.token);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//暂存\r\n\t\t\t\t\t\tthis.tokens[info.From.Guid] = rec.token;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//收到退出房间指令\r\n\t\t\t\tthis.$even.$on(\"notice_room_leave\",(info)=>{\r\n\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tmessage: info.Data.Accept.Name + '退出视频！',\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet rtc = this.userRtcs[info.Data.Accept.Guid].desk;\r\n\t\t\t\t\trtc.socure.close();\r\n\t\t\t\t\tdelete this.userRtcs[info.Data.Accept.Guid];\r\n\t\t\t\t\tvar remove = document.getElementById(info.Data.Accept.Guid);\r\n\t\t\t\t\tremove.parentNode.removeChild(remove);\r\n\t\t\t\t\tdelete this.userStreams[info.Data.Accept.Guid]\r\n\t\t\t\t});\r\n\t\t\t\t//当收到push消息\r\n\t\t\t\tthis.$even.$on(\"notice_channel_push\",(info)=>{\r\n\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\tlet ready = (token) => {\r\n\t\t\t\t\t\tlet rtc = self.userRtcs[info.From.Guid].desk;\r\n\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\t\ttype:'token',\r\n\t\t\t\t\t\t\t\ttoken:token\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//检查是否存在等待接收的token\r\n\t\t\t\t\t\tif(this.tokens[info.From.Guid]){\r\n\t\t\t\t\t\t\trtc.addIceCandidate(this.tokens[info.From.Guid]);\r\n\t\t\t\t\t\t\tdelete this.tokens[info.From.Guid];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.noticeRoom.send(info.From.Guid, sendMsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.createRtcRevice(info.From.Guid,'desk',ready).then((rtc)=>{\r\n\t\t\t\t\t\trtc.createAnswer(rec.jsep).then((answer)=>{\r\n\t\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\t\t\ttype:'subscribe',\r\n\t\t\t\t\t\t\t\t\tjsep:answer,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.noticeRoom.send(info.From.Guid, sendMsg);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\t//当收到订阅消息\r\n\t\t\t\tthis.$even.$on(\"notice_channel_subscribe\",(info)=>{\r\n\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\tlet rtc = this.userRtcs[info.From.Guid].desk;\r\n\t\t\t\t\trtc.setRemote(rec.jsep)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t\tthis.evens();\r\n\t\t}\r\n\t}\n</script>\n\n<style>\n</style>\n"]}]}