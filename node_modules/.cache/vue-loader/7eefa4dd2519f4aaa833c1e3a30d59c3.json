{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GaeaProject\\jpn_medical_web\\pages\\common\\live.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\pages\\common\\live.vue","mtime":1601207479707},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWVEcmFnUmVzaXplIGZyb20gJ3Z1ZS1kcmFnLXJlc2l6ZSc7CmltcG9ydCBsb2FkaW5nIGZyb20gJy4vbG9hZGluZy52dWUnCmltcG9ydCB7bWFwU3RhdGUsbWFwTXV0YXRpb25zfSBmcm9tICd2dWV4JwppbXBvcnQgY29uZiBmcm9tICdAL2NvbmYvY29uZi5qcycKaW1wb3J0IG5vdGljZSBmcm9tICdAL3V0aWxzL21peGlucy9ub3RpY2UuanMnCmltcG9ydCByb29tIGZyb20gJy4vcm9vbS52dWUnCnZhciBtc2cgPSBmdW5jdGlvbigpewoJcmV0dXJuIHsKCQl0bzonJywKCQlpbmZvOnsKCQkJJ0Fuc3dlcic6JycsCgkJfSwKCQl0eXBlOicnCQkJCgl9Cn07CgpleHBvcnQgZGVmYXVsdCB7Cgljb21wb25lbnRzOiB7CgkJVnVlRHJhZ1Jlc2l6ZSwKCQlsb2FkaW5nLAoJCXJvb20KCX0sCgltaXhpbnM6W25vdGljZV0sCgljb21wdXRlZDogewoJCS8vLi4ubWFwU3RhdGUoWyJ1SW5mbyJdKSwKCQkvLy4uLm1hcFN0YXRlKFsibm90aWNlRXgiXSksCgkJLi4ubWFwU3RhdGUoWyJub3RpY2VSb29tIl0pLAoJfSwKCWRhdGEoKSB7CgkJcmV0dXJuIHsKCQkJZ3JvdXA6IiIsCgkJCWxvYWRpbmc6dHJ1ZSwKCQkJY2FuTWVkaWE6dHJ1ZSwKCQkJCgkJCXN0YXR1czp7CgkJCQltZXNzYWdlOiIiLAoJCQkJY29kZTowLC8vMCDmraPlnKjlkbzlj6sgMSDmjILmlq0gMiDlv5nnoowgMyDotoXml7YgNCDlj5bmtogKCQkJCXRpbWVyOm51bGwsCgkJCQlsZW46NjAsCgkJCX0sCgkJCQoJCQlsb2FjYWxTdGVhbTpuZXcgTWVkaWFTdHJlYW0oKSwKCQkJdXNlclJ0Y3M6e30sCgkJCXRva2Vuczp7fSwKCQkJCgkJCXJ0YzpudWxsLAoJCQlsb2NhbFN0cmVhbTp7fSwKCQkJCgkJCWlzU2hvd1ZpZGVvOmZhbHNlLAoJCQlub3RpZnlMaXN0OltdLAoJCQkKCQkJaXNPcGVuVmlkZW86dHJ1ZSwKCQkJaXNEcmFnZ2luZzpmYWxzZSwKCQl9Cgl9LAoJbWV0aG9kczogewoJCS4uLm1hcE11dGF0aW9ucyhbInVwZGF0ZSJdKSwKCQljYW5jZWwoKXsKCQkJdGhpcy4kZXZlbi4kZW1pdCgidXNlcl9saXZlX2NhbmNlbCIpOwoJCQl0aGlzLmNsb3NlTGl2ZSg0KQoJCX0sCgkJY2xvc2VWaWRlbzpmdW5jdGlvbigpewoJCQl2YXIgbXNnID0gewoJCQkJaW5mbzoiTGVhdmUiLAoJCQkJdHlwZTonY2FuY2VsJwkJCQoJCQl9OwoJCQlpZih0aGlzLm5vdGljZVJvb20gJiYgdGhpcy5ub3RpY2VSb29tLnJlbGF5KXsKCQkJCXRoaXMubm90aWNlUm9vbS5yZWxheShtc2cudG8sbXNnLmluZm8sJ2NhbmNlbCcpCgkJCQl0aGlzLm5vdGljZVJvb20uY2xvc2UoKTsKCQkJCXRoaXMudXBkYXRlKHsKCQkJCQlub3RpY2VSb29tOiB7fQoJCQkJfSk7CgkJCQl0aGlzLiRldmVuLiRlbWl0KCJ1c2VyX2xpdmVfbGVhdmUiKQoJCQkJdGhpcy5pc1Nob3dWaWRlbyA9IGZhbHNlOwoJCQl9ZWxzZSB7CgkJCQl0aGlzLmNhbmNlbCgpCgkJCX0KCQkJCgkJCQoJCX0sCgkJZHJhZ2dpbmcoKXsKCQkJdGhpcy5pc0RyYWdnaW5nID0gdHJ1ZTsKCQl9LAoJCWRyYWdzdG9wKCl7CgkJCXRoaXMuaXNEcmFnZ2luZyA9IGZhbHNlOwoJCX0sCgkJb3BlblZpZGVvKCl7CgkJCWlmKCF0aGlzLmlzT3BlblZpZGVvKXsKCQkJCXNldFRpbWVvdXQoKCk9PnsKCQkJCQlpZighdGhpcy5pc0RyYWdnaW5nKXsKCQkJCQkJdGhpcy5pc09wZW5WaWRlbyA9IHRydWU7CgkJCQkJfQoJCQkJfSwyMDApCQkKCQkJfQkJCQkJCQoJCX0sCgkJY2xvc2VMaXZlKGNvZGUpewoJCQl0aGlzLnN0YXR1cy5jb2RlID0gY29kZTsKCQkJaWYodGhpcy5zdGF0dXMudGltZXIgIT0gbnVsbCl7CgkJCQljbGVhckludGVydmFsKHRoaXMuc3RhdHVzLnRpbWVyKQoJCQl9CgkJCXNldFRpbWVvdXQoKCk9PnsKCQkJCXRoaXMuaXNTaG93VmlkZW8gPSBmYWxzZTsKCQkJfSwyMDAwKQoJCX0sCgkJZXZlbnMoKXsKCQkJdGhpcy4kZXZlbi4kb24oInVzZXJfbGl2ZV9sZWF2ZSIsKGluZm8pPT57CgkJCQl0aGlzLmxvYWRpbmcgPSB0cnVlOwoJCQl9KQoJCQkvL+W9k+WvueaWuemAieaLqeS7peinhumikeaWueW8j+aOpemAmuaXtgoJCQl0aGlzLiRldmVuLiRvbigibm90aWNlX2xpdmVfY29ubmVjdGFsbCIsKGluZm8pPT57CgkJCQkKCQkJCXRoaXMubG9hZGluZyA9IGZhbHNlOwoJCQkJY2xlYXJJbnRlcnZhbCh0aGlzLnN0YXR1cy50aW1lcikKCQkJCS8vdGhpcy4kZXZlbi4kZW1pdCgidXNlcl9yb29tX3N0YXJ0IixpbmZvKQoJCQl9KTsKCQkJLy/lvZPnlKjmiLflj5HotbfkuIDkuKrop4bpopHpgoDor7fml7YKCQkJdGhpcy4kZXZlbi4kb24oInVzZXJfdmlkZW9fcmVhZHkiLChpbmZvKT0+ewoJCQkJdGhpcy5zdGF0dXMuY29kZSA9IDA7CgkJCQl0aGlzLmlzU2hvd1ZpZGVvID0gdHJ1ZTsKCQkJCXRoaXMuZ3JvdXAgPSBpbmZvLnRvOwoJCQkJdGhpcy5ub3RpY2VFeC5zZW5kKGluZm8udG8saW5mby5pbmZvLCJncm91cCIsdHJ1ZSwiIiwi6KeG6aKR6YKA6K+3IiwiU0VUIik7CgkJCQl0aGlzLnN0YXR1cy50aW1lciA9IHNldEludGVydmFsKCgpPT57CgkJCQkJaWYodGhpcy5zdGF0dXMubGVuID09IDApewoJCQkJCQljbGVhckludGVydmFsKHRoaXMuc3RhdHVzLnRpbWVyKQoJCQkJCQl0aGlzLnN0YXR1cy50aW1lciA9IG51bGw7CgkJCQkJCXRoaXMuc3RhdHVzLmxlbiA9IDYwOwoJCQkJCQl0aGlzLmNsb3NlTGl2ZSgzKQoJCQkJCQl0aGlzLm5vdGljZUV4LnNlbmQoaW5mby50byx7J0NyZWF0ZXInOjB9LCJncm91cCIsdHJ1ZSwiIiwi6KeG6aKR6YCa6K+d5pyq5o6l5ZCsIiwiIik7CgkJCQkJfWVsc2V7CgkJCQkJCXRoaXMuc3RhdHVzLmxlbi0tOwoJCQkJCX0KCQkJCX0sMTAwMCkKCQkJfSkKCQkJLy/lvZPnlKjmiLflj5bmtojkuIDkuKrop4bpopHpgoDor7fml7YKCQkJdGhpcy4kZXZlbi4kb24oInVzZXJfbGl2ZV9jYW5jZWwiLChpbmZvKT0+ewoJCQkJdGhpcy5ub3RpY2VFeC5zZW5kKHRoaXMuZ3JvdXAseydDcmVhdGVyJzowfSwiZ3JvdXAiLHRydWUsIiIsIuWPlua2iOS6huinhumikemCgOivtyIsIkNBTkNFTCIpOwoJCQl9KQoJCQkvL+W9k+eUqOaIt+aUtuWIsOS4gOS4quinhumikemCgOivt+aXtgoJCQl0aGlzLiRldmVuLiRvbigibm90aWNlX2xpdmVfaW52aXRhdGlvbiIsKGluZm8pPT57CgkJCQl0aGlzLm5vdGlmeShpbmZvKQoJCQkJLy90aGlzLmdldE1lc3NhZ2UoaW5mbyk7CgkJCX0pCgkJCS8v5b2T6YKA6K+36KKr5Y+W5raI5pe2CgkJCXRoaXMuJGV2ZW4uJG9uKCJub3RpY2VfbGl2ZV9jYW5jZWxsZWQiLChpbmZvKT0+ewoJCQkJdGhpcy5jbG9zZU5vdGlmeShpbmZvLkZyb20uR3VpZCk7CgkJCQl0aGlzLiRub3RpZnkoewoJCQkJCXRpdGxlOiB0aGlzLiR0KCJkZWZhdWx0LkJBU0lDLlRJUCIpLAoJCQkJCW1lc3NhZ2U6IHRoaXMuJHQoImRlZmF1bHQuTU9EVUxFLkxJVkUuQ0FOQ0VMX0lOVklUQVRJT04iKSwKCQkJCX0pOwoJCQl9KQoJCQkvL+W9k+WvueaWueS4u+WKqOaMguaWreaXtgoJCQl0aGlzLiRldmVuLiRvbigibm90aWNlX2xpdmVfaGFuZ3VwIiwoaW5mbyk9PnsKCQkJCXRoaXMuY2xvc2VMaXZlKDEpCgkJCQl0aGlzLiRub3RpZnkoewoJCQkJCXRpdGxlOiB0aGlzLiR0KCJkZWZhdWx0LkJBU0lDLlRJUCIpLAoJCQkJCW1lc3NhZ2U6IHRoaXMuJHQoImRlZmF1bHQuTU9EVUxFLkxJVkUuSEFOR1VQRUQiKSwKCQkJCX0pOwoJCQl9KQoJCQkvL+W9k+WvueaWueWNoOe6v+aXtgoJCQl0aGlzLiRldmVuLiRvbigibm90aWNlX2xpdmVfYnVzeSIsKGluZm8pPT57CgkJCQl0aGlzLmNsb3NlTGl2ZSgyKQoJCQkJdGhpcy4kbm90aWZ5KHsKCQkJCQl0aXRsZTogdGhpcy4kdCgiZGVmYXVsdC5CQVNJQy5USVAiKSwKCQkJCQltZXNzYWdlOiB0aGlzLiR0KCJkZWZhdWx0Lk1PRFVMRS5MSVZFLkJVU1lFRCIpLAoJCQkJfSk7CgkJCX0pOwoJCQl0aGlzLiRldmVuLiRvbigidXNlcl9saXZlX2FncmVlIiwoZGF0YSk9PnsKCQkJCXRoaXMuaXNTaG93VmlkZW8gPSB0cnVlOwoJCQkJdGhpcy5sb2FkaW5nID0gZmFsc2U7CgkJCQl0aGlzLiRldmVuLiRlbWl0KCJ1c2VyX2xpdmVfbGF1bmNoIikKCQkJfSkKCQl9LAoJfSwKCW1vdW50ZWQoKSB7CgkJdGhpcy5pbml0UGxhdGUoKTsKCQl0aGlzLmV2ZW5zKCk7CgkJdGhpcy51cGRhdGUoewoJCQlub3RpY2VSb29tOiB7fQoJCX0pOwoJfQp9Cg=="},{"version":3,"sources":["live.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"live.vue","sourceRoot":"pages/common","sourcesContent":["<template><!-- -->\r\n\t<vue-drag-resize v-show=\"isShowVideo\" @clicked=\"openVideo\" @dragging=\"dragging\" @dragstop=\"dragstop\" parentLimitation :isResizable=\"isOpenVideo ? true : false\" :isDraggable=\"true\" :w=\"isOpenVideo ? 1000 : 50\" :h=\"isOpenVideo ? 800 : 50\" :minw=\"isOpenVideo ? 800 : 50\" :minh=\"isOpenVideo ? 600 : 50\" :z=\"999\">\r\n\t\t<transition name=\"el-zoom-in-top\">\r\n\t\t\t<div v-show=\"isOpenVideo\" class=\"content\">\r\n\t\t\t\t<div class=\"el-dialog__header\">\r\n\t\t\t\t\t<span class=\"el-dialog__title\">对话</span>\r\n\t\t\t\t\t<span class=\"el-dialog__headerbtn\">\r\n\t\t\t\t\t\t<i @click.stop=\"isOpenVideo = false\" class=\"el-dialog__close el-icon el-icon-minus\"></i>\r\n\t\t\t\t\t\t<i @click.stop=\"closeVideo\" class=\"el-dialog__close el-icon el-icon-close\" style=\"margin-left: 15px;color:red;font-weight: 600;\"></i>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-if=\"loading\" class=\"el-dialog__body js-videobox\" style=\"height:calc(100% - 115px);overflow: auto;background: #5d5d5d;\">\r\n\t\t\t\t\t<div style=\"text-align: center;\">\r\n\t\t\t\t\t\t<div style=\"padding:25px;border-radius: 50%;border:1px solid #ccc;display: inline-block;\">\r\n\t\t\t\t\t\t\t<i class=\"el-icon-user-solid\" style=\"font-size: 80px;color:#ccc\"></i>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style=\"color:#ccc\">\r\n\t\t\t\t\t\t\t<div v-if=\"status.code == 0\">\r\n\t\t\t\t\t\t\t\t<loading></loading>\r\n\t\t\t\t\t\t\t\t{{ $t(\"default.MODULE.LIVE.CALLED\") }}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div v-if=\"status.code == 1\">\r\n\t\t\t\t\t\t\t\t{{ $t(\"default.MODULE.LIVE.HANGUPED\") }}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div v-if=\"status.code == 2\">\r\n\t\t\t\t\t\t\t\t{{ $t(\"default.MODULE.LIVE.BUSYED\") }}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div v-if=\"status.code == 3\">\r\n\t\t\t\t\t\t\t\t{{ $t(\"default.MODULE.LIVE.NORES\") }}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div v-if=\"status.code == 4\">\r\n\t\t\t\t\t\t\t\t{{ $t(\"default.MODULE.LIVE.CANCELED\") }}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<!-- 取消 -->\r\n\t\t\t\t\t\t<div style=\"margin-top: 115px;\">\r\n\t\t\t\t\t\t\t<el-button @click=\"cancel\" type=\"danger\">{{ $t(\"default.BASIC.CANCEL\") }}</el-button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-show=\"!loading\" class=\"el-dialog__body\" style=\"height:calc(100% - 115px);overflow: auto;background: #5d5d5d;\">\r\n\t\t\t\t\t<room></room>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\t\t\t\r\n\t\t</transition>\r\n\t\t<transition name=\"el-zoom-in-top\">\r\n\t\t\t<el-button v-show=\"!isOpenVideo\" type=\"primary\" circle style=\"position: absolute;\"> \r\n\t\t\t\t<i class=\"el-icon-video-camera\"></i>\r\n\t\t\t</el-button>\r\n\t\t</transition>\r\n\t</vue-drag-resize>\r\n</template>\r\n\r\n<script>\r\n\timport VueDragResize from 'vue-drag-resize';\r\n\timport loading from './loading.vue'\r\n\timport {mapState,mapMutations} from 'vuex'\r\n\timport conf from '@/conf/conf.js'\r\n\timport notice from '@/utils/mixins/notice.js'\r\n\timport room from './room.vue'\r\n\tvar msg = function(){\r\n\t\treturn {\r\n\t\t\tto:'',\r\n\t\t\tinfo:{\r\n\t\t\t\t'Answer':'',\r\n\t\t\t},\r\n\t\t\ttype:''\t\t\t\r\n\t\t}\r\n\t};\r\n\t\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tVueDragResize,\r\n\t\t\tloading,\r\n\t\t\troom\r\n\t\t},\r\n\t\tmixins:[notice],\r\n\t\tcomputed: {\r\n\t\t\t//...mapState([\"uInfo\"]),\r\n\t\t\t//...mapState([\"noticeEx\"]),\r\n\t\t\t...mapState([\"noticeRoom\"]),\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tgroup:\"\",\r\n\t\t\t\tloading:true,\r\n\t\t\t\tcanMedia:true,\r\n\t\t\t\t\r\n\t\t\t\tstatus:{\r\n\t\t\t\t\tmessage:\"\",\r\n\t\t\t\t\tcode:0,//0 正在呼叫 1 挂断 2 忙碌 3 超时 4 取消\r\n\t\t\t\t\ttimer:null,\r\n\t\t\t\t\tlen:60,\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\tloacalSteam:new MediaStream(),\r\n\t\t\t\tuserRtcs:{},\r\n\t\t\t\ttokens:{},\r\n\t\t\t\t\r\n\t\t\t\trtc:null,\r\n\t\t\t\tlocalStream:{},\r\n\t\t\t\t\r\n\t\t\t\tisShowVideo:false,\r\n\t\t\t\tnotifyList:[],\r\n\t\t\t\t\r\n\t\t\t\tisOpenVideo:true,\r\n\t\t\t\tisDragging:false,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations([\"update\"]),\r\n\t\t\tcancel(){\r\n\t\t\t\tthis.$even.$emit(\"user_live_cancel\");\r\n\t\t\t\tthis.closeLive(4)\r\n\t\t\t},\r\n\t\t\tcloseVideo:function(){\r\n\t\t\t\tvar msg = {\r\n\t\t\t\t\tinfo:\"Leave\",\r\n\t\t\t\t\ttype:'cancel'\t\t\t\r\n\t\t\t\t};\r\n\t\t\t\tif(this.noticeRoom && this.noticeRoom.relay){\r\n\t\t\t\t\tthis.noticeRoom.relay(msg.to,msg.info,'cancel')\r\n\t\t\t\t\tthis.noticeRoom.close();\r\n\t\t\t\t\tthis.update({\r\n\t\t\t\t\t\tnoticeRoom: {}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.$even.$emit(\"user_live_leave\")\r\n\t\t\t\t\tthis.isShowVideo = false;\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis.cancel()\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tdragging(){\r\n\t\t\t\tthis.isDragging = true;\r\n\t\t\t},\r\n\t\t\tdragstop(){\r\n\t\t\t\tthis.isDragging = false;\r\n\t\t\t},\r\n\t\t\topenVideo(){\r\n\t\t\t\tif(!this.isOpenVideo){\r\n\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\tif(!this.isDragging){\r\n\t\t\t\t\t\t\tthis.isOpenVideo = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},200)\t\t\r\n\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t},\r\n\t\t\tcloseLive(code){\r\n\t\t\t\tthis.status.code = code;\r\n\t\t\t\tif(this.status.timer != null){\r\n\t\t\t\t\tclearInterval(this.status.timer)\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tthis.isShowVideo = false;\r\n\t\t\t\t},2000)\r\n\t\t\t},\r\n\t\t\tevens(){\r\n\t\t\t\tthis.$even.$on(\"user_live_leave\",(info)=>{\r\n\t\t\t\t\tthis.loading = true;\r\n\t\t\t\t})\r\n\t\t\t\t//当对方选择以视频方式接通时\r\n\t\t\t\tthis.$even.$on(\"notice_live_connectall\",(info)=>{\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\tclearInterval(this.status.timer)\r\n\t\t\t\t\t//this.$even.$emit(\"user_room_start\",info)\r\n\t\t\t\t});\r\n\t\t\t\t//当用户发起一个视频邀请时\r\n\t\t\t\tthis.$even.$on(\"user_video_ready\",(info)=>{\r\n\t\t\t\t\tthis.status.code = 0;\r\n\t\t\t\t\tthis.isShowVideo = true;\r\n\t\t\t\t\tthis.group = info.to;\r\n\t\t\t\t\tthis.noticeEx.send(info.to,info.info,\"group\",true,\"\",\"视频邀请\",\"SET\");\r\n\t\t\t\t\tthis.status.timer = setInterval(()=>{\r\n\t\t\t\t\t\tif(this.status.len == 0){\r\n\t\t\t\t\t\t\tclearInterval(this.status.timer)\r\n\t\t\t\t\t\t\tthis.status.timer = null;\r\n\t\t\t\t\t\t\tthis.status.len = 60;\r\n\t\t\t\t\t\t\tthis.closeLive(3)\r\n\t\t\t\t\t\t\tthis.noticeEx.send(info.to,{'Creater':0},\"group\",true,\"\",\"视频通话未接听\",\"\");\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.status.len--;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},1000)\r\n\t\t\t\t})\r\n\t\t\t\t//当用户取消一个视频邀请时\r\n\t\t\t\tthis.$even.$on(\"user_live_cancel\",(info)=>{\r\n\t\t\t\t\tthis.noticeEx.send(this.group,{'Creater':0},\"group\",true,\"\",\"取消了视频邀请\",\"CANCEL\");\r\n\t\t\t\t})\r\n\t\t\t\t//当用户收到一个视频邀请时\r\n\t\t\t\tthis.$even.$on(\"notice_live_invitation\",(info)=>{\r\n\t\t\t\t\tthis.notify(info)\r\n\t\t\t\t\t//this.getMessage(info);\r\n\t\t\t\t})\r\n\t\t\t\t//当邀请被取消时\r\n\t\t\t\tthis.$even.$on(\"notice_live_cancelled\",(info)=>{\r\n\t\t\t\t\tthis.closeNotify(info.From.Guid);\r\n\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\ttitle: this.$t(\"default.BASIC.TIP\"),\r\n\t\t\t\t\t\tmessage: this.$t(\"default.MODULE.LIVE.CANCEL_INVITATION\"),\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t//当对方主动挂断时\r\n\t\t\t\tthis.$even.$on(\"notice_live_hangup\",(info)=>{\r\n\t\t\t\t\tthis.closeLive(1)\r\n\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\ttitle: this.$t(\"default.BASIC.TIP\"),\r\n\t\t\t\t\t\tmessage: this.$t(\"default.MODULE.LIVE.HANGUPED\"),\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t//当对方占线时\r\n\t\t\t\tthis.$even.$on(\"notice_live_busy\",(info)=>{\r\n\t\t\t\t\tthis.closeLive(2)\r\n\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\ttitle: this.$t(\"default.BASIC.TIP\"),\r\n\t\t\t\t\t\tmessage: this.$t(\"default.MODULE.LIVE.BUSYED\"),\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tthis.$even.$on(\"user_live_agree\",(data)=>{\r\n\t\t\t\t\tthis.isShowVideo = true;\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\tthis.$even.$emit(\"user_live_launch\")\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.initPlate();\r\n\t\t\tthis.evens();\r\n\t\t\tthis.update({\r\n\t\t\t\tnoticeRoom: {}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.content{\r\n\t\tposition: absolute;\r\n\t\theight:100%;\r\n\t\twidth:100%;\r\n\t\tbackground: #000;\r\n\t\tmin-width: 600px;\r\n\t\tmin-height:600px;\r\n\t\tbackground: #fff !important;\r\n\t\tborder-radius: 5px;\r\n\t\tbox-shadow: 0 1px 15px 5px rgba(0,0,0,.3);\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n</style>\r\n"]}]}