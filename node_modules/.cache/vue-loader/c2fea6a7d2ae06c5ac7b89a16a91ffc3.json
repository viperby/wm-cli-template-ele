{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GaeaProject\\jpn_medical_web\\pages\\main\\account\\scheduling.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\pages\\main\\account\\scheduling.vue","mtime":1601036333026},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKCXdhdGNoOnsKCQl0YXJnZXRZTSgpewoJCQkvL2NvbnNvbGUubG9nKHRoaXMudGFyZ2V0WU0pCgkJCXRoaXMucXVlcnlkb2N0b3JzY2hlZHVsZSgpCgkJfQoJfSwKCWRhdGEoKXsKCQlyZXR1cm4gewoJCQlsb2FkaW5nOmZhbHNlLAoJCQlpc0V4aXN0OmZhbHNlLAoJCQl0YXJnZXRZTTpuZXcgRGF0ZSgpLAoJCQl2aWV3OnsKCQkJCXNjaGVkdWxlOmZhbHNlCgkJCX0sCgkJCWRvY3RvcnNjaGVkdWxlOnsKCQkJCVdvcmtEYXRlOiIiLAoJCQkJRG9jdG9yR3VpZDpbXSwKCQkJCURvY3Rvck5hbWU6IiIKCQkJfSwKCQkJcGFnZXNQYXJhbXM6ewoJCQkJUGFnZUluZGV4OjEsCgkJCQlQYWdlU2l6ZToyMCwKCQkJCVRvdGFsOjAsCgkJCX0sCgkJCWRvY3RvcnM6W10sCgkJCXNjaGVkdWxlczpbXSwKCQl9Cgl9LAoJbWV0aG9kczp7CgkJZW50ZXJTY2hlZHVsZSgpewoJCQlpZih0aGlzLmlzRXhpc3QpewoJCQkJdGhpcy5yZW1vdmVkb2N0b3JzY2hlZHVsZSgpOwoJCQl9ZWxzZXsKCQkJCXRoaXMuc2F2ZURvY3RvcldvcmtTY2hlZHVsZSgpCgkJCX0KCQl9LAoJCXNldFNjaGVkdWxlKGRheSl7CgkJCWlmKHRoaXMuc2NoZWR1bGVzW2RheV0pewoJCQkJdGhpcy5pc0V4aXN0ID0gdHJ1ZTsKCQkJfWVsc2V7CgkJCQl0aGlzLmlzRXhpc3QgPSBmYWxzZTsJCQoJCQl9CgkJCXRoaXMuZG9jdG9yc2NoZWR1bGUuV29ya0RhdGUgPSBkYXk7CgkJCXRoaXMuZG9jdG9yc2NoZWR1bGUuRG9jdG9yTmFtZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LkRvY3Rvck5hbWU7CgkJCXRoaXMudmlldy5zY2hlZHVsZSA9IHRydWU7CgkJfSwKCQlhc3luYyBzYXZlRG9jdG9yV29ya1NjaGVkdWxlKCl7CgkJCWxldCBwYXJhbXMgPSB7CgkJCQlEb2N0b3JVc2VyR3VpZDogdGhpcy4kcm91dGUucXVlcnkuRG9jdG9yR3VpZCwKCQkJCVdvcmtEYXRlOnRoaXMuZG9jdG9yc2NoZWR1bGUuV29ya0RhdGUKCQkJfTsKCQkJdGhpcy5sb2FkaW5nID0gdHJ1ZTsKCQkJbGV0IHJlcyA9IGF3YWl0IHRoaXMuJGFwaS5wb3N0KCIvTWVkaWNhbC9TYXZlRG9jdG9yV29ya1NjaGVkdWxlIixwYXJhbXMpCgkJCXRoaXMubG9hZGluZyA9IGZhbHNlOwoJCQlpZighcmVzLklzUG9zaXRpdmUpewoJCQkJdGhpcy4kdGlwcy5jb2RlKHJlcy5FcnJvclNyYyxyZXMuRXJyb3JDb2RlKQoJCQkJcmV0dXJuOwoJCQl9CgkJCXRoaXMuJHRpcHMuc3VjY2Vzcygi5pu05paw5oiQ5YqfIikKCQkJdGhpcy52aWV3LnNjaGVkdWxlID0gZmFsc2U7CgkJCS8vdGhpcy5zY2hlZHVsZXNbdGhpcy5kb2N0b3JzY2hlZHVsZS5Xb3JrRGF0ZV0gPSByZXMuRGF0YTsKCQkJdGhpcy4kc2V0KHRoaXMuc2NoZWR1bGVzLHRoaXMuZG9jdG9yc2NoZWR1bGUuV29ya0RhdGUscmVzLkRhdGEpCgkJfSwKCQkvL+afpeivouaMh+WumuWMu+eUn+aOkuePreaOpeWPowoJCWFzeW5jIHF1ZXJ5ZG9jdG9yc2NoZWR1bGUoKSB7CgkJCXZhciBteURhdGUgPSBuZXcgRGF0ZSh0aGlzLnRhcmdldFlNKTsKCQkJdmFyIHRZZWFyID0gbXlEYXRlLmdldEZ1bGxZZWFyKCk7CgkJCXZhciB0TW9udGggPSBteURhdGUuZ2V0TW9udGgoKTsKCQkJdmFyIG0gPSB0TW9udGggKyAxOwoJCQltID0gbSA+IDkgPyBtIDogIjAiK207CgkJCWxldCB0YXJnZXQ9dFllYXIgKyctJysgbTsKCQkJCgkJCWxldCBwYXJhbXMgPSB7CgkJCQlEb2N0b3JVc2VyR3VpZDogdGhpcy4kcm91dGUucXVlcnkuRG9jdG9yR3VpZCwKCQkJCUN1cnJlbnRZZWFyTW9udGg6dGFyZ2V0CgkJCX07CgkJCXRoaXMubG9hZGluZyA9IHRydWU7CgkJCWxldCByZXMgPSBhd2FpdCB0aGlzLiRhcGkuZ2V0KCIvTWVkaWNhbC9RdWVyeVdvcmtTY2hlZHVsZUJ5RG9jdG9yIixwYXJhbXMpCgkJCXRoaXMubG9hZGluZyA9IGZhbHNlOwoJCQlpZighcmVzLklzUG9zaXRpdmUpewoJCQkJdGhpcy4kdGlwcy5jb2RlKHJlcy5FcnJvclNyYyxyZXMuRXJyb3JDb2RlKQoJCQkJcmV0dXJuOwoJCQl9CgkJCXRoaXMuc2NoZWR1bGVzID0gcmVzLkRhdGE7CgkJCQoJCX0sCgkJLy/liKDpmaTlvZPlpKnmjpLnj60KCQlhc3luYyByZW1vdmVkb2N0b3JzY2hlZHVsZSgpewoJCQlsZXQgcGFyYW1zID0gewoJCQkJV29ya1NjaGVkdWxlR3VpZDogdGhpcy5zY2hlZHVsZXNbdGhpcy5kb2N0b3JzY2hlZHVsZS5Xb3JrRGF0ZV0uV29ya1NjaGVkdWxlR3VpZCwKCQkJfTsKCQkJdGhpcy5sb2FkaW5nID0gdHJ1ZTsKCQkJbGV0IHJlcyA9IGF3YWl0IHRoaXMuJGFwaS5wb3N0KCIvTWVkaWNhbC9EZWxldGVEb2N0b3JXb3JrU2NoZWR1bGUiLHBhcmFtcykKCQkJdGhpcy5sb2FkaW5nID0gZmFsc2U7CgkJCWlmKCFyZXMuSXNQb3NpdGl2ZSl7CgkJCQl0aGlzLiR0aXBzLmNvZGUocmVzLkVycm9yU3JjLHJlcy5FcnJvckNvZGUpCgkJCQlyZXR1cm47CgkJCX0KCQkJdGhpcy4kdGlwcy5zdWNjZXNzKCLliKDpmaTmiJDlip8iKTsKCQkJdGhpcy52aWV3LnNjaGVkdWxlID0gZmFsc2U7CgkJCXRoaXMuJGRlbGV0ZSh0aGlzLnNjaGVkdWxlcyx0aGlzLmRvY3RvcnNjaGVkdWxlLldvcmtEYXRlKQoKCQl9Cgl9LAoJbW91bnRlZCgpewoJCXRoaXMucXVlcnlkb2N0b3JzY2hlZHVsZSgpOwoJfQp9Cg=="},{"version":3,"sources":["scheduling.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"scheduling.vue","sourceRoot":"pages/main/account","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-calendar v-model=\"targetYM\">\r\n\t\t<!-- 这里使用的是 2.5 slot 语法，对于新项目请使用 2.6 slot 语法-->\r\n\t\t\t<template slot=\"dateCell\" slot-scope=\"{date, data}\">\r\n\t\t\t\t<p @click=\"setSchedule(data.day)\">\r\n\t\t\t\t\t{{ data.day.split('-').slice(1).join('-') }} \r\n\t\t\t\t\t<span class=\"is-selected\">{{ schedules[data.day] ? '✔' : ''}}</span>\r\n\t\t\t\t</p>\r\n\t\t\t</template>\r\n\t\t</el-calendar>\r\n\t\t<!-- 排班选择框 -->\r\n\t\t<el-dialog v-loading=\"loading\" :title=\"isExist?'删除排班':'设置排班'\" :visible.sync=\"view.schedule\">\r\n\t\t\t\r\n\t\t\t<div v-if=\"!isExist\">确定在<strong>{{ doctorschedule.WorkDate }}</strong>为<strong>{{ doctorschedule.DoctorName }}</strong>排班?</div>\r\n\t\t\t<div v-if=\"isExist\">确定删除<strong>{{ doctorschedule.DoctorName }}</strong>在<strong>{{ doctorschedule.WorkDate }}</strong>的排班?</div>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"view.schedule=false\">取消</el-button>\r\n\t\t\t\t<el-button @click=\"enterSchedule\" type=\"primary\">确定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\twatch:{\r\n\t\t\ttargetYM(){\r\n\t\t\t\t//console.log(this.targetYM)\r\n\t\t\t\tthis.querydoctorschedule()\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tloading:false,\r\n\t\t\t\tisExist:false,\r\n\t\t\t\ttargetYM:new Date(),\r\n\t\t\t\tview:{\r\n\t\t\t\t\tschedule:false\r\n\t\t\t\t},\r\n\t\t\t\tdoctorschedule:{\r\n\t\t\t\t\tWorkDate:\"\",\r\n\t\t\t\t\tDoctorGuid:[],\r\n\t\t\t\t\tDoctorName:\"\"\r\n\t\t\t\t},\r\n\t\t\t\tpagesParams:{\r\n\t\t\t\t\tPageIndex:1,\r\n\t\t\t\t\tPageSize:20,\r\n\t\t\t\t\tTotal:0,\r\n\t\t\t\t},\r\n\t\t\t\tdoctors:[],\r\n\t\t\t\tschedules:[],\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tenterSchedule(){\r\n\t\t\t\tif(this.isExist){\r\n\t\t\t\t\tthis.removedoctorschedule();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.saveDoctorWorkSchedule()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsetSchedule(day){\r\n\t\t\t\tif(this.schedules[day]){\r\n\t\t\t\t\tthis.isExist = true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.isExist = false;\t\t\r\n\t\t\t\t}\r\n\t\t\t\tthis.doctorschedule.WorkDate = day;\r\n\t\t\t\tthis.doctorschedule.DoctorName = this.$route.query.DoctorName;\r\n\t\t\t\tthis.view.schedule = true;\r\n\t\t\t},\r\n\t\t\tasync saveDoctorWorkSchedule(){\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tDoctorUserGuid: this.$route.query.DoctorGuid,\r\n\t\t\t\t\tWorkDate:this.doctorschedule.WorkDate\r\n\t\t\t\t};\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tlet res = await this.$api.post(\"/Medical/SaveDoctorWorkSchedule\",params)\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t\tif(!res.IsPositive){\r\n\t\t\t\t\tthis.$tips.code(res.ErrorSrc,res.ErrorCode)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$tips.success(\"更新成功\")\r\n\t\t\t\tthis.view.schedule = false;\r\n\t\t\t\t//this.schedules[this.doctorschedule.WorkDate] = res.Data;\r\n\t\t\t\tthis.$set(this.schedules,this.doctorschedule.WorkDate,res.Data)\r\n\t\t\t},\r\n\t\t\t//查询指定医生排班接口\r\n\t\t\tasync querydoctorschedule() {\r\n\t\t\t\tvar myDate = new Date(this.targetYM);\r\n\t\t\t\tvar tYear = myDate.getFullYear();\r\n\t\t\t\tvar tMonth = myDate.getMonth();\r\n\t\t\t\tvar m = tMonth + 1;\r\n\t\t\t\tm = m > 9 ? m : \"0\"+m;\r\n\t\t\t\tlet target=tYear +'-'+ m;\r\n\t\t\t\t\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tDoctorUserGuid: this.$route.query.DoctorGuid,\r\n\t\t\t\t\tCurrentYearMonth:target\r\n\t\t\t\t};\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tlet res = await this.$api.get(\"/Medical/QueryWorkScheduleByDoctor\",params)\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t\tif(!res.IsPositive){\r\n\t\t\t\t\tthis.$tips.code(res.ErrorSrc,res.ErrorCode)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.schedules = res.Data;\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//删除当天排班\r\n\t\t\tasync removedoctorschedule(){\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tWorkScheduleGuid: this.schedules[this.doctorschedule.WorkDate].WorkScheduleGuid,\r\n\t\t\t\t};\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tlet res = await this.$api.post(\"/Medical/DeleteDoctorWorkSchedule\",params)\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t\tif(!res.IsPositive){\r\n\t\t\t\t\tthis.$tips.code(res.ErrorSrc,res.ErrorCode)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$tips.success(\"删除成功\");\r\n\t\t\t\tthis.view.schedule = false;\r\n\t\t\t\tthis.$delete(this.schedules,this.doctorschedule.WorkDate)\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t\tthis.querydoctorschedule();\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n  .is-selected {\r\n    color: #53aa49 !important;\r\n  }\r\n</style>"]}]}