{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GaeaProject\\jpn_medical_web\\pages\\main\\patients\\patientSelect.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\pages\\main\\patients\\patientSelect.vue","mtime":1596183640929},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKCW5hbWU6InBhcmllbnQiLAoJcHJvcHM6ewoJCXVzZXI6ewoJCQl0eXBlOlN0cmluZywKCQkJZGVmYXVsdDoiIiwKCQl9Cgl9LAoJZGF0YSgpewoJCXJldHVybiB7CgkJCWRhdGFMaXN0OltdLAoJCQlzZWxlY3RzOltdLAoJCQlyZXN1bHQ6W10sCgkJCWRlZnNlbGVjdDpbXSwKCQkJZGF0YVNlYXJjaDoiIiwKCQkJaXNMb2FkaW5nOmZhbHNlLAoJCQlwYWdlczp7CgkJCQlwYWdlOjEsCgkJCQlzaXplOjIwLAoJCQkJdG90YWw6MCwKCQkJfQoJCX0KCX0sCgl3YXRjaDp7CgkJdXNlcigpewoJCQlpZih0aGlzLnVzZXIpewoJCQkJdGhpcy5xdWVyeUFzc2lnbkN1c3RvbWVyUmVsYXRpb24oKTsKCQkJfWVsc2V7CgkJCQl0aGlzLmRlZnNlbGVjdCA9IFtdCgkJCX0KCQl9Cgl9LAoJbWV0aG9kczp7CgkJcGFnZVNpemVDaGFuZ2UoZSl7CgkJCXRoaXMucGFnZXMuc2l6ZSA9IGU7CgkJCXRoaXMucXVlcnlEYXRhKCkKCQl9LAoJCXBhZ2VzSW5kZXhDaGFuZ2UoZSl7CgkJCXRoaXMucGFnZXMucGFnZSA9IGU7CgkJCXRoaXMucXVlcnlEYXRhKCkKCQl9LAoJCWNoYW5nZVNlbGVjdChpdGVtLHRvLGFycil7CgkJCWlmKHRvID09ICJyaWdodCIpewoJCQkJZm9yKHZhciBpID0gMDtpIDwgaXRlbS5sZW5ndGg7aSsrKXsKCQkJCQlsZXQgY3VycmVudCA9IGl0ZW1baV07CgkJCQkJZm9yKHZhciBqID0gMDtqIDwgdGhpcy5kYXRhTGlzdC5sZW5ndGg7aisrKXsKCQkJCQkJaWYoY3VycmVudCA9PSB0aGlzLmRhdGFMaXN0W2pdLkN1c3RvbWVyR3VpZCl7CgkJCQkJCQl0aGlzLnJlc3VsdC5wdXNoKHRoaXMuZGF0YUxpc3Rbal0pCgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX1lbHNlewkJCQoJCQkJZm9yKHZhciB4ID0gMDt4IDwgYXJyLmxlbmd0aDt4KyspewoJCQkJCWxldCBjdXJyZW50ID0gYXJyW3hdOwoJCQkJCWZvcih2YXIgeSA9IDA7eSA8IHRoaXMucmVzdWx0Lmxlbmd0aDt5KyspewoJCQkJCQlpZihjdXJyZW50ID09IHRoaXMucmVzdWx0W3ldLkN1c3RvbWVyR3VpZCl7CgkJCQkJCQl0aGlzLnJlc3VsdC5yZW1vdmUodGhpcy5yZXN1bHRbeV0pCgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQl9LAoJCWFzeW5jIHF1ZXJ5QXNzaWduQ3VzdG9tZXJSZWxhdGlvbigpewoJCQlsZXQgcGFyYW1zID0gewoJCQkJVXNlckd1aWQ6dGhpcy51c2VyCgkJCX0KCQkJbGV0IHJlcyA9IGF3YWl0IHRoaXMuJGFwaS5nZXQoIi9NZWRpY2FsL1F1ZXJ5QXNzaWduQ3VzdG9tZXJSZWxhdGlvbiIscGFyYW1zKQoJCQlpZiAoIXJlcy5Jc1Bvc2l0aXZlKSB7CgkJCQl0aGlzLiR0aXBzLndhcm5pbmcoIuafpeivouW3suWIhumFjeWuouaIt+W8guW4uCIpOwoJCQkJcmV0dXJuOwoJCQl9CgkJCXRoaXMuZGVmc2VsZWN0ID0gW107CgkJCWZvcih2YXIgaSA9IDA7aTxyZXMuRGF0YS5EYXRhTGlzdC5sZW5ndGg7aSsrKXsKCQkJCXRoaXMuc2VsZWN0cy5wdXNoKHJlcy5EYXRhLkRhdGFMaXN0W2ldLkN1c3RvbWVyR3VpZCkKCQkJfQoJCX0sCgkJYXN5bmMgcXVlcnlEYXRhKCkgewoJCQljb25zdCBfcGFyYW1zID0gewoJCQkJa2V5d29yZDogdGhpcy5kYXRhU2VhcmNoLAoJCQkJcGFnZTogdGhpcy5wYWdlcy5wYWdlLAoJCQkJUGFnZVNpemU6IHRoaXMucGFnZXMuc2l6ZQoJCQl9OwoJCQl0aGlzLmlzTG9hZGluZz10cnVlOwoJCQlsZXQgcmVzID0gYXdhaXQgdGhpcy4kYXBpLmdldCgiL01lZGljYWwvUXVlcnlDdXN0b21lciIsIF9wYXJhbXMpOwoJCQl0aGlzLmlzTG9hZGluZz1mYWxzZTsKCQkJaWYgKCFyZXMuSXNQb3NpdGl2ZSkgewoJCQkJdGhpcy4kdGlwcy53YXJuaW5nKCLmn6Xor6LmlbDmja7lvILluLgiKTsKCQkJCXJldHVybjsKCQkJfQoJCQl0aGlzLmRhdGFMaXN0ID0gcmVzLkRhdGEuRGF0YTsKCQkJdGhpcy5wYWdlcy50b3RhbCA9IHJlcy5EYXRhLlRvdGFsQ291bnQ7CgkJfQoJfSwKCW1vdW50ZWQoKSB7CgkJdGhpcy5xdWVyeURhdGEoKTsKCQlpZih0aGlzLnVzZXIpewoJCQl0aGlzLnF1ZXJ5QXNzaWduQ3VzdG9tZXJSZWxhdGlvbigpOwoJCX1lbHNlewoJCQl0aGlzLmRlZnNlbGVjdCA9IFtdCgkJfQoJfQoJCn0K"},{"version":3,"sources":["patientSelect.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"patientSelect.vue","sourceRoot":"pages/main/patients","sourcesContent":["<template>\r\n\t<div v-loading=\"isLoading\">\r\n\t\t<el-transfer\r\n\t\t\tstyle=\"margin:0 auto\"\r\n\t\t\tv-model=\"selects\"\r\n\t\t\tfilterable\r\n\t\t\t@change=\"changeSelect\"\r\n\t\t\t:titles=\"['患者','已选']\"\r\n\t\t\t:props=\"{\r\n\t\t\t\tkey: 'CustomerGuid',\r\n\t\t\t\tlabel: 'CustomerName'\r\n\t\t\t}\"\r\n\t\t\t:data=\"dataList\">\r\n\t\t</el-transfer>\r\n\t\t<el-pagination\r\n\t\t\tstyle=\"margin:10px 0;\"\r\n\t\t\tbackground\r\n\t\t\tsmall\r\n\t\t\tlayout=\"total, prev, pager, next\"\r\n\t\t\t@size-change=\"pageSizeChange\"\r\n\t\t\t@current-change=\"pagesIndexChange\"\r\n\t\t\t@prev-click=\"pagesIndexChange\"\r\n\t\t\t@next-click=\"pagesIndexChange\"\r\n\t\t\t:current-page=\"pages.page\"\r\n\t\t\t:page-size=\"pages.size\"\r\n\t\t\t:total=\"pages.total\"\r\n\t\t></el-pagination>\r\n\t</div>\n</template>\n\n<script>\r\n\texport default {\r\n\t\tname:\"parient\",\r\n\t\tprops:{\r\n\t\t\tuser:{\r\n\t\t\t\ttype:String,\r\n\t\t\t\tdefault:\"\",\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tdataList:[],\r\n\t\t\t\tselects:[],\r\n\t\t\t\tresult:[],\r\n\t\t\t\tdefselect:[],\r\n\t\t\t\tdataSearch:\"\",\r\n\t\t\t\tisLoading:false,\r\n\t\t\t\tpages:{\r\n\t\t\t\t\tpage:1,\r\n\t\t\t\t\tsize:20,\r\n\t\t\t\t\ttotal:0,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\tuser(){\r\n\t\t\t\tif(this.user){\r\n\t\t\t\t\tthis.queryAssignCustomerRelation();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.defselect = []\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tpageSizeChange(e){\r\n\t\t\t\tthis.pages.size = e;\r\n\t\t\t\tthis.queryData()\r\n\t\t\t},\r\n\t\t\tpagesIndexChange(e){\r\n\t\t\t\tthis.pages.page = e;\r\n\t\t\t\tthis.queryData()\r\n\t\t\t},\r\n\t\t\tchangeSelect(item,to,arr){\r\n\t\t\t\tif(to == \"right\"){\r\n\t\t\t\t\tfor(var i = 0;i < item.length;i++){\r\n\t\t\t\t\t\tlet current = item[i];\r\n\t\t\t\t\t\tfor(var j = 0;j < this.dataList.length;j++){\r\n\t\t\t\t\t\t\tif(current == this.dataList[j].CustomerGuid){\r\n\t\t\t\t\t\t\t\tthis.result.push(this.dataList[j])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\t\t\t\r\n\t\t\t\t\tfor(var x = 0;x < arr.length;x++){\r\n\t\t\t\t\t\tlet current = arr[x];\r\n\t\t\t\t\t\tfor(var y = 0;y < this.result.length;y++){\r\n\t\t\t\t\t\t\tif(current == this.result[y].CustomerGuid){\r\n\t\t\t\t\t\t\t\tthis.result.remove(this.result[y])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync queryAssignCustomerRelation(){\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tUserGuid:this.user\r\n\t\t\t\t}\r\n\t\t\t\tlet res = await this.$api.get(\"/Medical/QueryAssignCustomerRelation\",params)\r\n\t\t\t\tif (!res.IsPositive) {\r\n\t\t\t\t\tthis.$tips.warning(\"查询已分配客户异常\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.defselect = [];\r\n\t\t\t\tfor(var i = 0;i<res.Data.DataList.length;i++){\r\n\t\t\t\t\tthis.selects.push(res.Data.DataList[i].CustomerGuid)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync queryData() {\r\n\t\t\t\tconst _params = {\r\n\t\t\t\t\tkeyword: this.dataSearch,\r\n\t\t\t\t\tpage: this.pages.page,\r\n\t\t\t\t\tPageSize: this.pages.size\r\n\t\t\t\t};\r\n\t\t\t\tthis.isLoading=true;\r\n\t\t\t\tlet res = await this.$api.get(\"/Medical/QueryCustomer\", _params);\r\n\t\t\t\tthis.isLoading=false;\r\n\t\t\t\tif (!res.IsPositive) {\r\n\t\t\t\t\tthis.$tips.warning(\"查询数据异常\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.dataList = res.Data.Data;\r\n\t\t\t\tthis.pages.total = res.Data.TotalCount;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.queryData();\r\n\t\t\tif(this.user){\r\n\t\t\t\tthis.queryAssignCustomerRelation();\r\n\t\t\t}else{\r\n\t\t\t\tthis.defselect = []\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\n</script>\n\n<style>\n</style>\n"]}]}