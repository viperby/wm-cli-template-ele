{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GaeaProject\\jpn_medical_web\\pages\\main\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\pages\\main\\index.vue","mtime":1591846200097},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBicmVhZGNydW1iIGZyb20gJ0Avc3JjL2NvbXBvbmVudHMvYnJlYWRjcnVtYi52dWUnOwppbXBvcnQgewoJbWFwU3RhdGUsCgltYXBNdXRhdGlvbnMKfSBmcm9tICd2dWV4JwppbXBvcnQgbGl2ZSBmcm9tICdAL3BhZ2VzL2NvbW1vbi9saXZlLnZ1ZScKCmltcG9ydCBOb3RpY2VTREsgZnJvbSAnLi4vLi4vdXRpbHMvbm90aWNlU0RLL2luZGV4LmpzJwppbXBvcnQgUnRjU0RLIGZyb20gJy4uLy4uL3V0aWxzL3J0Y1NESy9ydGMuanMnCmltcG9ydCBjb25mIGZyb20gJ0AvY29uZi9jb25mLmpzJwoKaW1wb3J0IHsKCW1ha2VHdWlkCn0gZnJvbSAnLi4vLi4vc3JjL3V0aWxzL21ha2VHdWlkLmpzJzsKCnZhciBjb21tb24gPSBmdW5jdGlvbigpIHsKCXJldHVybiB7CgkJcGxhdGU6ICdqcG5fcGxhdGUnLAoJCWNvZGU6ICIwNzk0OTgiLAoJfQp9CgpleHBvcnQgZGVmYXVsdCB7Cgljb21wb25lbnRzOiB7CgkJYnJlYWRjcnVtYiwKCQlsaXZlCgl9LAoJY29tcHV0ZWQ6IHsKCQkuLi5tYXBTdGF0ZShbInVJbmZvIl0pLAoJCS4uLm1hcFN0YXRlKFsibm90aWNlRXgiXSksCgkJLi4ubWFwU3RhdGUoWyJub3RpY2VSb29tIl0pLAoJfSwKCWRhdGEoKSB7CgkJcmV0dXJuIHsKCQkJaXNDb2xsYXBzZTogZmFsc2UsCgkJCW1lc3NhZ2U6IG51bGwsCgkJCQoJCQljYW5NZWRpYTp0cnVlLAoJCQlsb2FjYWxTdGVhbTpuZXcgTWVkaWFTdHJlYW0oKSwKCQkJdXNlclJ0Y3M6e30sCgkJCXVzZXJTdHJlYW1zOnt9LAoJCQl0b2tlbnM6e30sCgkJfQoJfSwKCW1ldGhvZHM6IHsKCQkuLi5tYXBNdXRhdGlvbnMoWyJ1cGRhdGUiXSksCgkJc3dpdGNoTGFuZ3VhZXMoZSkgewoJCQl0aGlzLiRpMThuLmxvY2FsZSA9IGU7CgkJfSwKCQloYW5kbGVTZWxlY3QoZSwga2V5cGF0aCkgewoJCQlpZiAoZSA9PSAxKSB7CgkJCQkvL3RoaXMuaXNDb2xsYXBzZSA9ICF0aGlzLmlzQ29sbGFwc2U7CgkJCX0KCQl9LAkJCQoJCWluaXROb3RpY2UocGxhdGUsIGluaXQpIHsKCQkJdmFyIHRoYXQgPSB0aGlzOwoJCQl2YXIgcGFyYW1zID0gewoJCQkJc2VydmU6IGNvbmYuZ2V0Q3VycmVudFNlcnZlKCkubm90aWNlLmFyZWEsCgkJCQlwbGF0ZTogcGxhdGUucGxhdGUsCgkJCQluYW1lOiB0aGlzLnVJbmZvLlVzZXJOYW1lLAoJCQkJdXNlcjogdGhpcy51SW5mby5Vc2VyR3VpZCwKCQkJCWNvZGU6IHBsYXRlLmNvZGUsCgkJCQlpc1RUTDogY29uZi5nZXRDdXJyZW50U2VydmUoKS50eXBlID09ICJUVEwiCgkJCX0KCQkJdmFyIG5vdGljZSA9IG5ldyBOb3RpY2VTREsocGFyYW1zKTsKCQkJaWYgKGluaXQpIHsKCQkJCXRoaXMudXBkYXRlKHsKCQkJCQlub3RpY2VFeDogbm90aWNlCgkJCQl9KTsKCQkJCXRoaXMubm90aWNlRXguY29tcGxhdGUoKS50aGVuKCgpID0+IHsKCQkJCQl0aGF0LnVwZGF0ZSh7CgkJCQkJCW5vdGljZTogdGhhdC5ub3RpY2VFeAoJCQkJCX0pCgkJCQl9KQoJCQkJdGhpcy5ub3RpY2VFeC5tZXNzYWdlID0gZnVuY3Rpb24oaW5mbykgewoJCQkJCWlmIChpbmZvLlR5cGUgPT09ICJzeXMiKSB7CgkJCQkJCWluZm8uRGF0YS5NZXNzYWdlID0gSlNPTi5wYXJzZShpbmZvLkRhdGEuTWVzc2FnZSkKCQkJCQkJaWYgKGluZm8uRGF0YS5NZXNzYWdlID09ICJKT0lOIikgewoJCQkJCQkJLy90aGF0Lm1lc3NhZ2UgPSBpbmZvCgkJCQkJCX0KCQkJCQl9CgkJCQkJaWYgKGluZm8uVHlwZSA9PT0gImluZm8iKSB7CgkJCQkJCWluZm8uRGF0YS5NZXNzYWdlID0gSlNPTi5wYXJzZShpbmZvLkRhdGEuTWVzc2FnZSk7CgkJCQkJCWlmIChpbmZvLkRhdGEuTWVzc2FnZS5DcmVhdGVyID09IDEpIHsgLy/ojrflvpfpgoDor7cKCQkJCQkJCXRoYXQubWVzc2FnZSA9IGluZm87CgkJCQkJCQlyZXR1cm47CgkJCQkJCX0KCQkJCQkJaWYgKGluZm8uRGF0YS5NZXNzYWdlLkFuc3dlciAhPSB1bmRlZmluZWQpIHsgLy/ojrflvpflm57lpI0KCQkJCQkJCXZhciBBbnN3ZXIgPSBpbmZvLkRhdGEuTWVzc2FnZS5BbnN3ZXI7CgkJCQkJCQlpZiAoQW5zd2VyID09ICcwMDEnKSB7IC8v5oyC5pat5aSE55CGCgkJCQkJCQkJdGhhdC4kbm90aWZ5KHsKCQkJCQkJCQkJdGl0bGU6ICfmj5DnpLonLAoJCQkJCQkJCQltZXNzYWdlOiAn5a+55pa55bey5oyC5patIScsCgkJCQkJCQkJfSk7CgkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJfQoJCQkJCQkJaWYgKEFuc3dlciA9PSAnMDAyJykgeyAvL+mCgOivt+iAheinhumikeS4reeahOWkhOeQhgoJCQkJCQkJCXRoYXQuJG5vdGlmeSh7CgkJCQkJCQkJCXRpdGxlOiAn5o+Q56S6JywKCQkJCQkJCQkJbWVzc2FnZTogJ+WvueaWueato+WcqOinhumikeS4re+8gScsCgkJCQkJCQkJfSk7CgkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJfQoJCQkJCQkJaWYgKHRoYXQubm90aWNlUm9vbS5pbmZvICE9IHVuZGVmaW5lZCkgeyAvL+W9k+WJjeWcqOaIv+mXtOS4re+8jOebtOaOpeWPkeaIv+mXtOS/oeaBr+e7meiiq+mCgOivt+S6ugoJCQkJCQkJCXZhciBtc2cgPSB7CgkJCQkJCQkJCXRvOiBpbmZvLkZyb20uR3VpZCwKCQkJCQkJCQkJaW5mbzogewoJCQkJCQkJCQkJUGxhdGU6IHRoYXQubm90aWNlUm9vbS5pbmZvLnBsYXRlLAoJCQkJCQkJCQkJQ29kZTogdGhhdC5ub3RpY2VSb29tLmluZm8uY29kZSwKCQkJCQkJCQkJCVZpZGVvVHlwZTogQW5zd2VyCgkJCQkJCQkJCX0sCgkJCQkJCQkJCXR5cGU6ICcnCgkJCQkJCQkJfTsKCgkJCQkJCQkJdGhhdC5ub3RpY2VFeC5zZW5kKG1zZy50bywgbXNnLmluZm8pOwoJCQkJCQkJfSBlbHNlIHsgLy/kuI3lnKjmiL/pl7TnmoTlpITnkIYt5Yib5bu65oi/6Ze05bm25Y+R6YCB5oi/6Ze05L+h5oGv57uZ6KKr6YKA6K+35Lq6CgkJCQkJCQkJdGhhdC5jcmVhdGVSb29tKGluZm8pCgkJCQkJCQl9CgkJCQkJCQlyZXR1cm47CgkJCQkJCX0KCQkJCQkJaWYgKGluZm8uRGF0YS5NZXNzYWdlLlBsYXRlICE9IHVuZGVmaW5lZCAmJiBpbmZvLkRhdGEuTWVzc2FnZS5Db2RlICE9IHVuZGVmaW5lZCkgeyAvL+iOt+W+l+aIv+mXtOWSjGNvZGUKCQkJCQkJCXRoYXQuaW5pdE5vdGljZSh7CgkJCQkJCQkJcGxhdGU6IGluZm8uRGF0YS5NZXNzYWdlLlBsYXRlLAoJCQkJCQkJCWNvZGU6IGluZm8uRGF0YS5NZXNzYWdlLkNvZGUsCgkJCQkJCQl9LCBmYWxzZSkKCQkJCQkJfQoJCQkJCX0KCgkJCQl9OwoJCQl9IGVsc2UgewoJCQkJdGhpcy51cGRhdGUoewoJCQkJCW5vdGljZVJvb206IG5vdGljZQoJCQkJfSk7CgkJCQl0aGlzLm5vdGljZVJvb20ubWVzc2FnZSA9IGZ1bmN0aW9uKGluZm8pIHsKCQkJCQlpZiAoaW5mby5UeXBlID09PSAic3lzIikgewoJCQkJCQlpbmZvLkRhdGEuTWVzc2FnZSA9IEpTT04ucGFyc2UoaW5mby5EYXRhLk1lc3NhZ2UpCgkJCQkJCWlmIChpbmZvLkRhdGEuTWVzc2FnZS5NZXNzYWdlID09ICJMRUFWRSIpIHsKCQkJCQkJCXRoYXQuJG5vdGlmeSh7CgkJCQkJCQkJdGl0bGU6ICfmj5DnpLonLAoJCQkJCQkJCW1lc3NhZ2U6IGluZm8uRGF0YS5BY2NlcHQuTmFtZSArICfpgIDlh7rop4bpopHvvIEnLAoJCQkJCQkJfSk7CgkJCQkJCQl2YXIgcmVtb3ZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW5mby5EYXRhLkFjY2VwdC5HdWlkKTsKCQkJCQkJCXJlbW92ZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHJlbW92ZSk7CgkJCQkJCQkvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKGluZm8uRGF0YS5BY2NlcHQuR3VpZCkuaW5uZXJIVE1MID0gIiI7CQkKCQkJCQkJCS8vdGhhdC51c2VyU3RyZWFtc1tpbmZvLkRhdGEuQWNjZXB0Lkd1aWRdID0gbnVsbDsKCQkJCQkJCWRlbGV0ZSB0aGF0LnVzZXJTdHJlYW1zW2luZm8uRGF0YS5BY2NlcHQuR3VpZF0KCQkJCQkJCXJldHVybjsKCQkJCQkJfQoJCQkJCQlpZihpbmZvLkRhdGEuTWVzc2FnZS5NZXNzYWdlID09ICJKT0lOIil7CgkJCQkJCQkvL3JldHVybjsKCQkJCQkJCXRoYXQuY3JlYXRlUnRjU2VuZGVyKGluZm8uRGF0YS5BY2NlcHQuR3VpZCwnZGVzaycpLnRoZW4oKG9mZmVyKT0+ewoJCQkJCQkJCS8v5Y+R6YCB5pys5Zyw5L+h5LukCgkJCQkJCQkJbGV0IHJ0YyA9IHRoYXQudXNlclJ0Y3NbaW5mby5EYXRhLkFjY2VwdC5HdWlkXS5kZXNrOwoJCQkJCQkJCXJ0Yy5yZWFkeSA9ICh0b2tlbik9PnsKCQkJCQkJCQkJbGV0IHNlbmRNc2cgPSB7CgkJCQkJCQkJCQl0eXBlOidwdXNoJywKCQkJCQkJCQkJCWpzZXA6b2ZmZXIsCgkJCQkJCQkJCQl0b2tlbjpydGMuY2FuZGlkYXRlCgkJCQkJCQkJCX0KCQkJCQkJCQkJdGhhdC5ub3RpY2VSb29tLnNlbmQoaW5mby5EYXRhLkFjY2VwdC5HdWlkLCBzZW5kTXNnKTsKCQkJCQkJCQl9CgkJCQkJCQkJCgkJCQkJCQl9KQoJCQkJCQl9CgkJCQkJfQoJCQkJCWlmIChpbmZvLlR5cGUgPT09ICJpbmZvIikgewoJCQkJCQlpbmZvLkRhdGEuTWVzc2FnZSA9IEpTT04ucGFyc2UoaW5mby5EYXRhLk1lc3NhZ2UpOwoJCQkJCQlpZihpbmZvLkRhdGEuTWVzc2FnZS50eXBlID09ICdwdXNoJyl7CgkJCQkJCQlsZXQgcmVjID0gaW5mby5EYXRhLk1lc3NhZ2U7CgkJCQkJCQkKCQkJCQkJCXRoYXQuY3JlYXRlUnRjUmV2aWNlKGluZm8uRnJvbS5HdWlkLCdkZXNrJykudGhlbigocnRjKT0+ewoJCQkJCQkJCXJ0Yy5jcmVhdGVBbnN3ZXIocmVjLmpzZXApLnRoZW4oKGFuc3dlcik9PnsKCQkJCQkJCQkJLy/lupTnrZTlr7nmlrnkv6Hku6QKCQkJCQkJCQkJcnRjLnJlYWR5PSh0b2tlbik9PnsKCQkJCQkJCQkJCWxldCBzZW5kTXNnID0gewoJCQkJCQkJCQkJCQl0eXBlOidzdWJzY3JpYmUnLAoJCQkJCQkJCQkJCQlqc2VwOmFuc3dlciwKCQkJCQkJCQkJCQkJdG9rZW46cnRjLmNhbmRpZGF0ZQoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQlydGMuYWRkSWNlQ2FuZGlkYXRlKHJlYy50b2tlbik7CgkJCQkJCQkJCQkJdGhhdC5ub3RpY2VSb29tLnNlbmQoaW5mby5Gcm9tLkd1aWQsIHNlbmRNc2cpOwoJCQkJCQkJCQl9CgkJCQkJCQkJfSkKCQkJCQkJCQlydGMucmVhZHkgPSAodG9rZW4pPT57CgkJCQkJCQkJCWNvbnNvbGUubG9nKCJ0b2tlbiBpczoiLHRva2VuKQoJCQkJCQkJCQlsZXQgc2VuZE1zZyA9IHsKCQkJCQkJCQkJCXR5cGU6J3JlYWR5JywKCQkJCQkJCQkJCXRva2VuOnRva2VuLAoJCQkJCQkJCQl9CgkJCQkJCQkJCXRoYXQubm90aWNlUm9vbS5zZW5kKGluZm8uRnJvbS5HdWlkLCBzZW5kTXNnKTsKCQkJCQkJCQl9CgkJCQkJCQl9KQoJCQkJCQl9CgkJCQkJCWlmKGluZm8uRGF0YS5NZXNzYWdlLnR5cGUgPT0gJ3N1YnNjcmliZScpewoJCQkJCQkJbGV0IHJlYyA9IGluZm8uRGF0YS5NZXNzYWdlOwoJCQkJCQkJbGV0IHJ0YyA9IHRoYXQudXNlclJ0Y3NbaW5mby5Gcm9tLkd1aWRdLmRlc2s7CgkJCQkJCQkvL2NvbnNvbGUubG9nKCJzdWJzY3JpYmV0b2tlbiIscmVjLnRva2VuKQoJCQkJCQkJLy9jb25zb2xlLmxvZyhydGMpCgkJCQkJCQlydGMuc2V0UmVtb3RlKHJlYy5qc2VwKQoJCQkJCQkJcnRjLmFkZEljZUNhbmRpZGF0ZShyZWMudG9rZW4pOwoJCQkJCQl9CgkJCQkJfQoJCQkJfTsKCQkJfQoKCQl9LAoJCWNyZWF0ZVJvb20oZGF0YSkgewoJCQl2YXIgdGhhdCA9IHRoaXM7CgkJCXZhciBzdGF0dXMgPSBkYXRhLkRhdGEuTWVzc2FnZS5BbnN3ZXI7CgkJCXZhciByb29tR3VpZCA9IG1ha2VHdWlkKCk7CgkJCWxldCBwYXJhbXMgPSB7CgkJCQlzZXJ2ZTogY29uZi5nZXRDdXJyZW50U2VydmUoKS5ub3RpY2UuYXJlYSwKCQkJCXBsYXRlOiByb29tR3VpZCwKCQkJCW5hbWU6IHRoaXMudUluZm8uVXNlck5hbWUsCgkJCQl1c2VyOiB0aGlzLnVJbmZvLlVzZXJHdWlkLAoJCQkJaXNUVEw6IGNvbmYuZ2V0Q3VycmVudFNlcnZlKCkudHlwZSA9PSAiVFRMIgoJCQl9CgkJCXZhciBub3RpY2UgPSBuZXcgTm90aWNlU0RLKHBhcmFtcykKCQkJc2V0VGltZW91dChmdW5jdGlvbigpIHsKCQkJCXRoYXQuaW5pdE5vdGljZSh7CgkJCQkJcGxhdGU6IG5vdGljZS5pbmZvLnBsYXRlLAoJCQkJCWNvZGU6IG5vdGljZS5pbmZvLmNvZGUKCQkJCX0sIGZhbHNlKTsKCQkJCXZhciBtc2cgPSB7CgkJCQkJdG86IGRhdGEuRnJvbS5HdWlkLAoJCQkJCWluZm86IHsKCQkJCQkJUGxhdGU6IG5vdGljZS5pbmZvLnBsYXRlLAoJCQkJCQlDb2RlOiBub3RpY2UuaW5mby5jb2RlLAoJCQkJCQlWaWRlb1R5cGU6IHN0YXR1cwoJCQkJCX0sCgkJCQkJdHlwZTogJycKCQkJCX07CgoJCQkJdGhhdC5ub3RpY2VFeC5zZW5kKG1zZy50bywgbXNnLmluZm8pOwoJCQkJcmV0dXJuCgkJCQl0aGF0LmNyZWF0ZVJ0Y1NlbmRlcihkYXRhLkZyb20uR3VpZCwnZGVzaycpLnRoZW4oKG9mZmVyKT0+ewoJCQkJCS8v5Y+R6YCB5pys5Zyw5L+h5LukCgkJCQkJbGV0IHJ0YyA9IHRoYXQudXNlclJ0Y3NbZGF0YS5Gcm9tLkd1aWRdLmRlc2s7CgkJCQkJcnRjLnJlYWR5ID0gKHRva2VuKT0+ewoJCQkJCQlsZXQgc2VuZE1zZyA9IHsKCQkJCQkJCXR5cGU6J3B1c2gnLAoJCQkJCQkJanNlcDpvZmZlciwKCQkJCQkJCXRva2VuOnJ0Yy5jYW5kaWRhdGUKCQkJCQkJfQoJCQkJCQl0aGF0Lm5vdGljZVJvb20uc2VuZChkYXRhLkZyb20uR3VpZCwgc2VuZE1zZyk7CgkJCQkJfQoJCQkJCQoJCQkJfSkKCQkJCQoJCQl9LCAxNTAwKQoJCX0sCgkJY2xvc2VSb29tKCl7CgkJCXRoaXMudXNlclN0cmVhbXMgPSB7fTsKCQl9LAoJCWFzeW5jIGNyZWF0ZVJ0Y1JldmljZSh1aWQsdHlwZSl7CgkJCWxldCB0aGF0ID0gdGhpczsKCQkJbGV0IHJ0YyA9IG5ldyBSdGNTREsoe3NlcnZlOiJzdHVuOnN0dW4uc3R1bnByb3RvY29sLm9yZzozNDc4In0pOwoJCQkvL3J0Yy5zb2N1cmUuYWRkVHJhbnNjZWl2ZXIoJ2F1ZGlvJywgeyAnZGlyZWN0aW9uJzogJ3JlY3Zvbmx5JyB9KTsKCQkJLy9ydGMuc29jdXJlLmFkZFRyYW5zY2VpdmVyKCd2aWRlbycsIHsgJ2RpcmVjdGlvbic6ICdyZWN2b25seScgfSk7CgkJCS8vcnRjLnNlbmRPZmZlciA9IGZhbHNlOwoJCQlpZih0aGlzLmNhbk1lZGlhKXsKCQkJCS8v5riF56m65YaF5a65CgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVzdCcpLmlubmVySFRNTCA9ICIiOwoJCQkJCgkJCQlsZXQgc3RyZWFtID0gYXdhaXQgdGhpcy5jcmVhdGVMb2NhbFN0ZWFtKCk7CgkJCQljb25zdCB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7CgkJCQl2aWRlby53aWR0aCA9IDMwMDsKCQkJCXZpZGVvLmhlaWdodCA9IDMwMDsKCQkJCXZpZGVvLmF1dG9wbGF5ID0gdHJ1ZTsKCQkJCXZpZGVvLnBsYXlzaW5saW5lID0gdHJ1ZTsKCQkJCXZpZGVvLmNvbnRyb2xzID0gZmFsc2U7CgkJCQl2aWRlby5zcmNPYmplY3QgPSBzdHJlYW07CgkJCQlsZXQgcGFyZW50RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0ZXN0Iik7CgkJCQlwYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHZpZGVvKTsKCQkJCXJ0Yy5hZGRTdGVhbShzdHJlYW0pOwoJCQl9CgkJCQkJCQoJCQlydGMuam9pbj0oc3RyZWFtKT0+ewoJCQkJY29uc29sZS5sb2coImluIGpvaW4iLHN0cmVhbSkKCQkJCXRoaXMuJHNldCh0aGF0LnVzZXJTdHJlYW1zLHVpZCxzdHJlYW0uc3RyZWFtKQoJCQkJLy90aGF0LnVzZXJTdHJlYW1zW3VpZF09c3RyZWFtLnN0cmVhbTsKCQkJCWNvbnNvbGUubG9nKCJ0aGF0Iix0aGF0LnVzZXJTdHJlYW1zKQoJCQl9CgkJCXRoaXMuc2V0VXNlclJ0Y3MocnRjLHVpZCx0eXBlKTsJCQoJCQlyZXR1cm4gYXdhaXQgcnRjOwoJCQkvL3JldHVybiBhd2FpdCBydGMuY3JlYXRlT2ZmZXIoeyBvZmZlclRvUmVjZWl2ZVZpZGVvOiB0cnVlLCBvZmZlclRvUmVjZWl2ZUF1ZGlvOiB0cnVlIH0pOwoJCX0sCgkJc2V0VXNlclJ0Y3MocnRjLHVpZCx0eXBlKXsKCQkJaWYoIXRoaXMudXNlclJ0Y3NbdWlkXSl7CgkJCQl0aGlzLnVzZXJSdGNzW3VpZF0gPSBuZXcgT2JqZWN0KCk7CgkJCX0KCQkJdGhpcy51c2VyUnRjc1t1aWRdW3R5cGVdID0gcnRjOwkKCQl9LAoJCWFzeW5jIGNyZWF0ZVJ0Y1NlbmRlcih1aWQsIHR5cGUpIHsKCQkJbGV0IHRoYXQgPSB0aGlzOwoJCQlsZXQgcnRjID0gbmV3IFJ0Y1NESyh7CgkJCQlzZXJ2ZTogInN0dW46c3R1bi5zdHVucHJvdG9jb2wub3JnOjM0NzgiCgkJCX0pOwoJCQkvL3J0Yy5zZW5kT2ZmZXIgPSBmYWxzZTsKCQkJaWYgKHRoaXMuY2FuTWVkaWEpIHsKCQkJCS8v5riF56m65YaF5a65CgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVzdCcpLmlubmVySFRNTCA9ICIiOwoJCQkJCgkJCQlsZXQgc3RyZWFtID0gYXdhaXQgdGhpcy5jcmVhdGVMb2NhbFN0ZWFtKCk7CgkJCQljb25zdCB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7CgkJCQl2aWRlby53aWR0aCA9IDMwMDsKCQkJCXZpZGVvLmhlaWdodCA9IDMwMDsKCQkJCXZpZGVvLmF1dG9wbGF5ID0gdHJ1ZTsKCQkJCXZpZGVvLnBsYXlzaW5saW5lID0gdHJ1ZTsKCQkJCXZpZGVvLmNvbnRyb2xzID0gdHJ1ZTsKCQkJCXZpZGVvLnNyY09iamVjdCA9IHN0cmVhbTsKCQkJCWxldCBwYXJlbnRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRlc3QiKTsKCQkJCXBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodmlkZW8pOwoJCQkJCgkJCQlydGMuYWRkU3RlYW0oc3RyZWFtKTsKCQkJfQoJCQoJCQlydGMuam9pbiA9IChzdHJlYW0pID0+IHsKCQkJCWNvbnNvbGUubG9nKCJpbiBqb2luIiwgc3RyZWFtKQoJCQkJdGhpcy4kc2V0KHRoYXQudXNlclN0cmVhbXMsIHVpZCwgc3RyZWFtLnN0cmVhbSkKCQkJCWNvbnNvbGUubG9nKCJ0aGF0IiwgdGhhdC51c2VyU3RyZWFtcykKCQkJfQoJCQl0aGlzLnNldFVzZXJSdGNzKHJ0YywgdWlkLCB0eXBlKTsKCQkJcmV0dXJuIGF3YWl0IHJ0Yy5jcmVhdGVPZmZlcih7CgkJCQlvZmZlclRvUmVjZWl2ZVZpZGVvOiB0cnVlLAoJCQkJb2ZmZXJUb1JlY2VpdmVBdWRpbzogdHJ1ZQoJCQl9KTsKCQl9LAoJCWFzeW5jIGNyZWF0ZUxvY2FsU3RlYW0oKSB7CgkJCWxldCB0aGF0ID0gdGhpczsKCQkJaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSB7CgkJCQl0aGlzLmNhbk1lZGlhID0gZmFsc2U7CgkJCQlyZXR1cm4KCQkJfQoJCQlyZXR1cm4gYXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoewoJCQkJYXVkaW86IHRydWUsCgkJCQl2aWRlbzogewoJCQkJCXdpZHRoOiB7CgkJCQkJCWlkZWFsOiAxMjgwCgkJCQkJfSwKCQkJCQloZWlnaHQ6IHsKCQkJCQkJaWRlYWw6IDcyMAoJCQkJCX0KCQkJCX0KCQkJfSk7CgkJfSwKCX0sCgltb3VudGVkKCkgewoJCS8qdGhpcy5pbml0Tm90aWNlKGNvbW1vbigpLCB0cnVlKTsKCQl0aGlzLnVwZGF0ZSh7CgkJCW5vdGljZVJvb206IHt9CgkJfSk7Ki8KCX0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"pages/main","sourcesContent":["<template>\r\n\t<el-container>\r\n\t\t<el-aside style=\"width:auto;padding-top:60px\">\r\n\t\t\t<el-menu router class=\"el-menu-vertical\" :collapse=\"isCollapse\">\r\n\t\t\t\t<el-menu-item index=\"/main/patients\">\r\n\t\t\t\t\t<i class=\"el-icon-user\"></i>\r\n\t\t\t\t\t<span slot=\"title\">{{ $t(\"default.NAV.PATIENTS\") }}</span>\r\n\t\t\t\t</el-menu-item>\r\n\t\t\t\t<el-menu-item index=\"/main/appointment\">\r\n\t\t\t\t\t<i class=\"el-icon-watch\"></i>\r\n\t\t\t\t\t<span slot=\"title\">{{ $t(\"default.NAV.APPOINTMENT\") }}</span>\r\n\t\t\t\t</el-menu-item>\r\n\t\t\t\t<el-menu-item index=\"/main/departent\">\r\n\t\t\t\t\t<i class=\"el-icon-suitcase-1\"></i>\r\n\t\t\t\t\t<span slot=\"title\">{{ $t(\"default.NAV.DEPARTMENT\") }}</span>\r\n\t\t\t\t</el-menu-item>\r\n\t\t\t\t<el-menu-item @click=\"isCollapse = !isCollapse\">\r\n\t\t\t\t\t<div style=\"text-align: right;\">\r\n\t\t\t\t\t\t<transition name=\"el-fade-in-linear\">\r\n\t\t\t\t\t\t\t<i v-if=\"isCollapse\" class=\"el-icon-menu\"></i>\r\n\t\t\t\t\t\t\t<i v-if=\"!isCollapse\" class=\"el-icon-s-grid\"></i>\r\n\t\t\t\t\t\t</transition>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-menu-item>\r\n\t\t\t</el-menu>\r\n\t\t</el-aside>\r\n\t\t<el-container>\r\n\t\t\t<el-header>\r\n\t\t\t\t<el-menu class=\"el-menu-demo\" mode=\"horizontal\" @select=\"handleSelect\">\r\n\t\t\t\t\t<el-submenu index=\"2\" style=\"float: right;\">\r\n\t\t\t\t\t\t<template slot=\"title\">\r\n\t\t\t\t\t\t\t<el-avatar size=\"small\" src=\"http://img2.imgtn.bdimg.com/it/u=2421351453,1852348871&fm=26&gp=0.jpg\"></el-avatar>\r\n\t\t\t\t\t\t\t{{ uInfo.UserName }}\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<el-menu-item index=\"2-1\">{{ $t(\"default.INFOS.INFO\")}}</el-menu-item>\r\n\t\t\t\t\t\t<el-menu-item index=\"2-3\">{{ $t(\"default.BASIC.LOGIN_OUT\")}}</el-menu-item>\r\n\t\t\t\t\t</el-submenu>\r\n\t\t\t\t\t<el-submenu index=\"1\" style=\"float: right;\">\r\n\t\t\t\t\t\t<template slot=\"title\">{{ $t(\"default.EVENTS.SWITCH_LANGUAGES\")}}</template>\r\n\t\t\t\t\t\t<el-menu-item @click=\"switchLanguaes('zh-CN')\" index=\"1-1\">简体中文</el-menu-item>\r\n\t\t\t\t\t\t<el-menu-item index=\"1-2\">English</el-menu-item>\r\n\t\t\t\t\t\t<el-menu-item @click=\"switchLanguaes('ja-JP')\" index=\"1-3\">日本語</el-menu-item>\r\n\t\t\t\t\t</el-submenu>\r\n\t\t\t\t</el-menu>\r\n\t\t\t</el-header>\r\n\t\t\t<el-main>\r\n\t\t\t\t<breadcrumb style=\"margin-bottom:15px\"></breadcrumb>\r\n\t\t\t\t<router-view></router-view>\r\n\t\t\t</el-main>\r\n\t\t</el-container>\r\n\t\t<!-- video -->\r\n\t\t<live @close=\"closeRoom\" :message=\"message\" :userStreams=\"userStreams\"></live>\r\n\t</el-container>\r\n</template>\r\n\r\n<script>\r\n\timport breadcrumb from '@/src/components/breadcrumb.vue';\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapMutations\r\n\t} from 'vuex'\r\n\timport live from '@/pages/common/live.vue'\r\n\r\n\timport NoticeSDK from '../../utils/noticeSDK/index.js'\r\n\timport RtcSDK from '../../utils/rtcSDK/rtc.js'\r\n\timport conf from '@/conf/conf.js'\r\n\t\r\n\timport {\r\n\t\tmakeGuid\r\n\t} from '../../src/utils/makeGuid.js';\r\n\r\n\tvar common = function() {\r\n\t\treturn {\r\n\t\t\tplate: 'jpn_plate',\r\n\t\t\tcode: \"079498\",\r\n\t\t}\r\n\t}\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tbreadcrumb,\r\n\t\t\tlive\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState([\"uInfo\"]),\r\n\t\t\t...mapState([\"noticeEx\"]),\r\n\t\t\t...mapState([\"noticeRoom\"]),\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisCollapse: false,\r\n\t\t\t\tmessage: null,\r\n\t\t\t\t\r\n\t\t\t\tcanMedia:true,\r\n\t\t\t\tloacalSteam:new MediaStream(),\r\n\t\t\t\tuserRtcs:{},\r\n\t\t\t\tuserStreams:{},\r\n\t\t\t\ttokens:{},\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations([\"update\"]),\r\n\t\t\tswitchLanguaes(e) {\r\n\t\t\t\tthis.$i18n.locale = e;\r\n\t\t\t},\r\n\t\t\thandleSelect(e, keypath) {\r\n\t\t\t\tif (e == 1) {\r\n\t\t\t\t\t//this.isCollapse = !this.isCollapse;\r\n\t\t\t\t}\r\n\t\t\t},\t\t\t\r\n\t\t\tinitNotice(plate, init) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tvar params = {\r\n\t\t\t\t\tserve: conf.getCurrentServe().notice.area,\r\n\t\t\t\t\tplate: plate.plate,\r\n\t\t\t\t\tname: this.uInfo.UserName,\r\n\t\t\t\t\tuser: this.uInfo.UserGuid,\r\n\t\t\t\t\tcode: plate.code,\r\n\t\t\t\t\tisTTL: conf.getCurrentServe().type == \"TTL\"\r\n\t\t\t\t}\r\n\t\t\t\tvar notice = new NoticeSDK(params);\r\n\t\t\t\tif (init) {\r\n\t\t\t\t\tthis.update({\r\n\t\t\t\t\t\tnoticeEx: notice\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.noticeEx.complate().then(() => {\r\n\t\t\t\t\t\tthat.update({\r\n\t\t\t\t\t\t\tnotice: that.noticeEx\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.noticeEx.message = function(info) {\r\n\t\t\t\t\t\tif (info.Type === \"sys\") {\r\n\t\t\t\t\t\t\tinfo.Data.Message = JSON.parse(info.Data.Message)\r\n\t\t\t\t\t\t\tif (info.Data.Message == \"JOIN\") {\r\n\t\t\t\t\t\t\t\t//that.message = info\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (info.Type === \"info\") {\r\n\t\t\t\t\t\t\tinfo.Data.Message = JSON.parse(info.Data.Message);\r\n\t\t\t\t\t\t\tif (info.Data.Message.Creater == 1) { //获得邀请\r\n\t\t\t\t\t\t\t\tthat.message = info;\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (info.Data.Message.Answer != undefined) { //获得回复\r\n\t\t\t\t\t\t\t\tvar Answer = info.Data.Message.Answer;\r\n\t\t\t\t\t\t\t\tif (Answer == '001') { //挂断处理\r\n\t\t\t\t\t\t\t\t\tthat.$notify({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\t\tmessage: '对方已挂断!',\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (Answer == '002') { //邀请者视频中的处理\r\n\t\t\t\t\t\t\t\t\tthat.$notify({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\t\tmessage: '对方正在视频中！',\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (that.noticeRoom.info != undefined) { //当前在房间中，直接发房间信息给被邀请人\r\n\t\t\t\t\t\t\t\t\tvar msg = {\r\n\t\t\t\t\t\t\t\t\t\tto: info.From.Guid,\r\n\t\t\t\t\t\t\t\t\t\tinfo: {\r\n\t\t\t\t\t\t\t\t\t\t\tPlate: that.noticeRoom.info.plate,\r\n\t\t\t\t\t\t\t\t\t\t\tCode: that.noticeRoom.info.code,\r\n\t\t\t\t\t\t\t\t\t\t\tVideoType: Answer\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\ttype: ''\r\n\t\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t\tthat.noticeEx.send(msg.to, msg.info);\r\n\t\t\t\t\t\t\t\t} else { //不在房间的处理-创建房间并发送房间信息给被邀请人\r\n\t\t\t\t\t\t\t\t\tthat.createRoom(info)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (info.Data.Message.Plate != undefined && info.Data.Message.Code != undefined) { //获得房间和code\r\n\t\t\t\t\t\t\t\tthat.initNotice({\r\n\t\t\t\t\t\t\t\t\tplate: info.Data.Message.Plate,\r\n\t\t\t\t\t\t\t\t\tcode: info.Data.Message.Code,\r\n\t\t\t\t\t\t\t\t}, false)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t};\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.update({\r\n\t\t\t\t\t\tnoticeRoom: notice\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.noticeRoom.message = function(info) {\r\n\t\t\t\t\t\tif (info.Type === \"sys\") {\r\n\t\t\t\t\t\t\tinfo.Data.Message = JSON.parse(info.Data.Message)\r\n\t\t\t\t\t\t\tif (info.Data.Message.Message == \"LEAVE\") {\r\n\t\t\t\t\t\t\t\tthat.$notify({\r\n\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\tmessage: info.Data.Accept.Name + '退出视频！',\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tvar remove = document.getElementById(info.Data.Accept.Guid);\r\n\t\t\t\t\t\t\t\tremove.parentNode.removeChild(remove);\r\n\t\t\t\t\t\t\t\t//document.getElementById(info.Data.Accept.Guid).innerHTML = \"\";\t\t\r\n\t\t\t\t\t\t\t\t//that.userStreams[info.Data.Accept.Guid] = null;\r\n\t\t\t\t\t\t\t\tdelete that.userStreams[info.Data.Accept.Guid]\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(info.Data.Message.Message == \"JOIN\"){\r\n\t\t\t\t\t\t\t\t//return;\r\n\t\t\t\t\t\t\t\tthat.createRtcSender(info.Data.Accept.Guid,'desk').then((offer)=>{\r\n\t\t\t\t\t\t\t\t\t//发送本地信令\r\n\t\t\t\t\t\t\t\t\tlet rtc = that.userRtcs[info.Data.Accept.Guid].desk;\r\n\t\t\t\t\t\t\t\t\trtc.ready = (token)=>{\r\n\t\t\t\t\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\t\t\t\t\ttype:'push',\r\n\t\t\t\t\t\t\t\t\t\t\tjsep:offer,\r\n\t\t\t\t\t\t\t\t\t\t\ttoken:rtc.candidate\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tthat.noticeRoom.send(info.Data.Accept.Guid, sendMsg);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (info.Type === \"info\") {\r\n\t\t\t\t\t\t\tinfo.Data.Message = JSON.parse(info.Data.Message);\r\n\t\t\t\t\t\t\tif(info.Data.Message.type == 'push'){\r\n\t\t\t\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthat.createRtcRevice(info.From.Guid,'desk').then((rtc)=>{\r\n\t\t\t\t\t\t\t\t\trtc.createAnswer(rec.jsep).then((answer)=>{\r\n\t\t\t\t\t\t\t\t\t\t//应答对方信令\r\n\t\t\t\t\t\t\t\t\t\trtc.ready=(token)=>{\r\n\t\t\t\t\t\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype:'subscribe',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tjsep:answer,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttoken:rtc.candidate\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\trtc.addIceCandidate(rec.token);\r\n\t\t\t\t\t\t\t\t\t\t\t\tthat.noticeRoom.send(info.From.Guid, sendMsg);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\trtc.ready = (token)=>{\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"token is:\",token)\r\n\t\t\t\t\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\t\t\t\t\ttype:'ready',\r\n\t\t\t\t\t\t\t\t\t\t\ttoken:token,\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tthat.noticeRoom.send(info.From.Guid, sendMsg);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(info.Data.Message.type == 'subscribe'){\r\n\t\t\t\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\t\t\t\tlet rtc = that.userRtcs[info.From.Guid].desk;\r\n\t\t\t\t\t\t\t\t//console.log(\"subscribetoken\",rec.token)\r\n\t\t\t\t\t\t\t\t//console.log(rtc)\r\n\t\t\t\t\t\t\t\trtc.setRemote(rec.jsep)\r\n\t\t\t\t\t\t\t\trtc.addIceCandidate(rec.token);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tcreateRoom(data) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tvar status = data.Data.Message.Answer;\r\n\t\t\t\tvar roomGuid = makeGuid();\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tserve: conf.getCurrentServe().notice.area,\r\n\t\t\t\t\tplate: roomGuid,\r\n\t\t\t\t\tname: this.uInfo.UserName,\r\n\t\t\t\t\tuser: this.uInfo.UserGuid,\r\n\t\t\t\t\tisTTL: conf.getCurrentServe().type == \"TTL\"\r\n\t\t\t\t}\r\n\t\t\t\tvar notice = new NoticeSDK(params)\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tthat.initNotice({\r\n\t\t\t\t\t\tplate: notice.info.plate,\r\n\t\t\t\t\t\tcode: notice.info.code\r\n\t\t\t\t\t}, false);\r\n\t\t\t\t\tvar msg = {\r\n\t\t\t\t\t\tto: data.From.Guid,\r\n\t\t\t\t\t\tinfo: {\r\n\t\t\t\t\t\t\tPlate: notice.info.plate,\r\n\t\t\t\t\t\t\tCode: notice.info.code,\r\n\t\t\t\t\t\t\tVideoType: status\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttype: ''\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tthat.noticeEx.send(msg.to, msg.info);\r\n\t\t\t\t\treturn\r\n\t\t\t\t\tthat.createRtcSender(data.From.Guid,'desk').then((offer)=>{\r\n\t\t\t\t\t\t//发送本地信令\r\n\t\t\t\t\t\tlet rtc = that.userRtcs[data.From.Guid].desk;\r\n\t\t\t\t\t\trtc.ready = (token)=>{\r\n\t\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\t\ttype:'push',\r\n\t\t\t\t\t\t\t\tjsep:offer,\r\n\t\t\t\t\t\t\t\ttoken:rtc.candidate\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthat.noticeRoom.send(data.From.Guid, sendMsg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t}, 1500)\r\n\t\t\t},\r\n\t\t\tcloseRoom(){\r\n\t\t\t\tthis.userStreams = {};\r\n\t\t\t},\r\n\t\t\tasync createRtcRevice(uid,type){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet rtc = new RtcSDK({serve:\"stun:stun.stunprotocol.org:3478\"});\r\n\t\t\t\t//rtc.socure.addTransceiver('audio', { 'direction': 'recvonly' });\r\n\t\t\t\t//rtc.socure.addTransceiver('video', { 'direction': 'recvonly' });\r\n\t\t\t\t//rtc.sendOffer = false;\r\n\t\t\t\tif(this.canMedia){\r\n\t\t\t\t\t//清空内容\r\n\t\t\t\t\tdocument.getElementById('test').innerHTML = \"\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet stream = await this.createLocalSteam();\r\n\t\t\t\t\tconst video = document.createElement('video');\r\n\t\t\t\t\tvideo.width = 300;\r\n\t\t\t\t\tvideo.height = 300;\r\n\t\t\t\t\tvideo.autoplay = true;\r\n\t\t\t\t\tvideo.playsinline = true;\r\n\t\t\t\t\tvideo.controls = false;\r\n\t\t\t\t\tvideo.srcObject = stream;\r\n\t\t\t\t\tlet parentElement = document.getElementById(\"test\");\r\n\t\t\t\t\tparentElement.appendChild(video);\r\n\t\t\t\t\trtc.addSteam(stream);\r\n\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\trtc.join=(stream)=>{\r\n\t\t\t\t\tconsole.log(\"in join\",stream)\r\n\t\t\t\t\tthis.$set(that.userStreams,uid,stream.stream)\r\n\t\t\t\t\t//that.userStreams[uid]=stream.stream;\r\n\t\t\t\t\tconsole.log(\"that\",that.userStreams)\r\n\t\t\t\t}\r\n\t\t\t\tthis.setUserRtcs(rtc,uid,type);\t\t\r\n\t\t\t\treturn await rtc;\r\n\t\t\t\t//return await rtc.createOffer({ offerToReceiveVideo: true, offerToReceiveAudio: true });\r\n\t\t\t},\r\n\t\t\tsetUserRtcs(rtc,uid,type){\r\n\t\t\t\tif(!this.userRtcs[uid]){\r\n\t\t\t\t\tthis.userRtcs[uid] = new Object();\r\n\t\t\t\t}\r\n\t\t\t\tthis.userRtcs[uid][type] = rtc;\t\r\n\t\t\t},\r\n\t\t\tasync createRtcSender(uid, type) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet rtc = new RtcSDK({\r\n\t\t\t\t\tserve: \"stun:stun.stunprotocol.org:3478\"\r\n\t\t\t\t});\r\n\t\t\t\t//rtc.sendOffer = false;\r\n\t\t\t\tif (this.canMedia) {\r\n\t\t\t\t\t//清空内容\r\n\t\t\t\t\tdocument.getElementById('test').innerHTML = \"\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet stream = await this.createLocalSteam();\r\n\t\t\t\t\tconst video = document.createElement('video');\r\n\t\t\t\t\tvideo.width = 300;\r\n\t\t\t\t\tvideo.height = 300;\r\n\t\t\t\t\tvideo.autoplay = true;\r\n\t\t\t\t\tvideo.playsinline = true;\r\n\t\t\t\t\tvideo.controls = true;\r\n\t\t\t\t\tvideo.srcObject = stream;\r\n\t\t\t\t\tlet parentElement = document.getElementById(\"test\");\r\n\t\t\t\t\tparentElement.appendChild(video);\r\n\t\t\t\t\t\r\n\t\t\t\t\trtc.addSteam(stream);\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\trtc.join = (stream) => {\r\n\t\t\t\t\tconsole.log(\"in join\", stream)\r\n\t\t\t\t\tthis.$set(that.userStreams, uid, stream.stream)\r\n\t\t\t\t\tconsole.log(\"that\", that.userStreams)\r\n\t\t\t\t}\r\n\t\t\t\tthis.setUserRtcs(rtc, uid, type);\r\n\t\t\t\treturn await rtc.createOffer({\r\n\t\t\t\t\tofferToReceiveVideo: true,\r\n\t\t\t\t\tofferToReceiveAudio: true\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync createLocalSteam() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif (!navigator.mediaDevices) {\r\n\t\t\t\t\tthis.canMedia = false;\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\treturn await navigator.mediaDevices.getUserMedia({\r\n\t\t\t\t\taudio: true,\r\n\t\t\t\t\tvideo: {\r\n\t\t\t\t\t\twidth: {\r\n\t\t\t\t\t\t\tideal: 1280\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\theight: {\r\n\t\t\t\t\t\t\tideal: 720\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t/*this.initNotice(common(), true);\r\n\t\t\tthis.update({\r\n\t\t\t\tnoticeRoom: {}\r\n\t\t\t});*/\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.el-menu-vertical:not(.el-menu--collapse) {\r\n\t\twidth: 200px;\r\n\t\tmin-height: 800px;\r\n\t}\r\n</style>\r\n"]}]}