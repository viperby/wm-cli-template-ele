{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GaeaProject\\jpn_medical_web\\pages\\main\\patients\\patientSelect.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\pages\\main\\patients\\patientSelect.vue","mtime":1596183694201},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKCW5hbWU6InBhcmllbnQiLAoJcHJvcHM6ewoJCXVzZXI6ewoJCQl0eXBlOlN0cmluZywKCQkJZGVmYXVsdDoiIiwKCQl9Cgl9LAoJZGF0YSgpewoJCXJldHVybiB7CgkJCWRhdGFMaXN0OltdLAoJCQlzZWxlY3RzOltdLAoJCQlyZXN1bHQ6W10sCgkJCWRhdGFTZWFyY2g6IiIsCgkJCWlzTG9hZGluZzpmYWxzZSwKCQkJcGFnZXM6ewoJCQkJcGFnZToxLAoJCQkJc2l6ZToyMCwKCQkJCXRvdGFsOjAsCgkJCX0KCQl9Cgl9LAoJd2F0Y2g6ewoJCXVzZXIoKXsKCQkJaWYodGhpcy51c2VyKXsKCQkJCXRoaXMucXVlcnlBc3NpZ25DdXN0b21lclJlbGF0aW9uKCk7CgkJCX1lbHNlewoJCQkJdGhpcy5zZWxlY3RzID0gW10KCQkJfQoJCX0KCX0sCgltZXRob2RzOnsKCQlwYWdlU2l6ZUNoYW5nZShlKXsKCQkJdGhpcy5wYWdlcy5zaXplID0gZTsKCQkJdGhpcy5xdWVyeURhdGEoKQoJCX0sCgkJcGFnZXNJbmRleENoYW5nZShlKXsKCQkJdGhpcy5wYWdlcy5wYWdlID0gZTsKCQkJdGhpcy5xdWVyeURhdGEoKQoJCX0sCgkJY2hhbmdlU2VsZWN0KGl0ZW0sdG8sYXJyKXsKCQkJaWYodG8gPT0gInJpZ2h0Iil7CgkJCQlmb3IodmFyIGkgPSAwO2kgPCBpdGVtLmxlbmd0aDtpKyspewoJCQkJCWxldCBjdXJyZW50ID0gaXRlbVtpXTsKCQkJCQlmb3IodmFyIGogPSAwO2ogPCB0aGlzLmRhdGFMaXN0Lmxlbmd0aDtqKyspewoJCQkJCQlpZihjdXJyZW50ID09IHRoaXMuZGF0YUxpc3Rbal0uQ3VzdG9tZXJHdWlkKXsKCQkJCQkJCXRoaXMucmVzdWx0LnB1c2godGhpcy5kYXRhTGlzdFtqXSkKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfWVsc2V7CQkJCgkJCQlmb3IodmFyIHggPSAwO3ggPCBhcnIubGVuZ3RoO3grKyl7CgkJCQkJbGV0IGN1cnJlbnQgPSBhcnJbeF07CgkJCQkJZm9yKHZhciB5ID0gMDt5IDwgdGhpcy5yZXN1bHQubGVuZ3RoO3krKyl7CgkJCQkJCWlmKGN1cnJlbnQgPT0gdGhpcy5yZXN1bHRbeV0uQ3VzdG9tZXJHdWlkKXsKCQkJCQkJCXRoaXMucmVzdWx0LnJlbW92ZSh0aGlzLnJlc3VsdFt5XSkKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCX0sCgkJYXN5bmMgcXVlcnlBc3NpZ25DdXN0b21lclJlbGF0aW9uKCl7CgkJCWxldCBwYXJhbXMgPSB7CgkJCQlVc2VyR3VpZDp0aGlzLnVzZXIKCQkJfQoJCQlsZXQgcmVzID0gYXdhaXQgdGhpcy4kYXBpLmdldCgiL01lZGljYWwvUXVlcnlBc3NpZ25DdXN0b21lclJlbGF0aW9uIixwYXJhbXMpCgkJCWlmICghcmVzLklzUG9zaXRpdmUpIHsKCQkJCXRoaXMuJHRpcHMud2FybmluZygi5p+l6K+i5bey5YiG6YWN5a6i5oi35byC5bi4Iik7CgkJCQlyZXR1cm47CgkJCX0KCQkJdGhpcy5zZWxlY3RzID0gW107CgkJCWZvcih2YXIgaSA9IDA7aTxyZXMuRGF0YS5EYXRhTGlzdC5sZW5ndGg7aSsrKXsKCQkJCXRoaXMuc2VsZWN0cy5wdXNoKHJlcy5EYXRhLkRhdGFMaXN0W2ldLkN1c3RvbWVyR3VpZCkKCQkJfQoJCX0sCgkJYXN5bmMgcXVlcnlEYXRhKCkgewoJCQljb25zdCBfcGFyYW1zID0gewoJCQkJa2V5d29yZDogdGhpcy5kYXRhU2VhcmNoLAoJCQkJcGFnZTogdGhpcy5wYWdlcy5wYWdlLAoJCQkJUGFnZVNpemU6IHRoaXMucGFnZXMuc2l6ZQoJCQl9OwoJCQl0aGlzLmlzTG9hZGluZz10cnVlOwoJCQlsZXQgcmVzID0gYXdhaXQgdGhpcy4kYXBpLmdldCgiL01lZGljYWwvUXVlcnlDdXN0b21lciIsIF9wYXJhbXMpOwoJCQl0aGlzLmlzTG9hZGluZz1mYWxzZTsKCQkJaWYgKCFyZXMuSXNQb3NpdGl2ZSkgewoJCQkJdGhpcy4kdGlwcy53YXJuaW5nKCLmn6Xor6LmlbDmja7lvILluLgiKTsKCQkJCXJldHVybjsKCQkJfQoJCQl0aGlzLmRhdGFMaXN0ID0gcmVzLkRhdGEuRGF0YTsKCQkJdGhpcy5wYWdlcy50b3RhbCA9IHJlcy5EYXRhLlRvdGFsQ291bnQ7CgkJfQoJfSwKCW1vdW50ZWQoKSB7CgkJdGhpcy5xdWVyeURhdGEoKTsKCQlpZih0aGlzLnVzZXIpewoJCQl0aGlzLnF1ZXJ5QXNzaWduQ3VzdG9tZXJSZWxhdGlvbigpOwoJCX1lbHNlewoJCQl0aGlzLnNlbGVjdHMgPSBbXQoJCX0KCX0KCQp9Cg=="},{"version":3,"sources":["patientSelect.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"patientSelect.vue","sourceRoot":"pages/main/patients","sourcesContent":["<template>\r\n\t<div v-loading=\"isLoading\">\r\n\t\t<el-transfer\r\n\t\t\tstyle=\"margin:0 auto\"\r\n\t\t\tv-model=\"selects\"\r\n\t\t\tfilterable\r\n\t\t\t@change=\"changeSelect\"\r\n\t\t\t:titles=\"['患者','已选']\"\r\n\t\t\t:props=\"{\r\n\t\t\t\tkey: 'CustomerGuid',\r\n\t\t\t\tlabel: 'CustomerName'\r\n\t\t\t}\"\r\n\t\t\t:data=\"dataList\">\r\n\t\t</el-transfer>\r\n\t\t<el-pagination\r\n\t\t\tstyle=\"margin:10px 0;\"\r\n\t\t\tbackground\r\n\t\t\tsmall\r\n\t\t\tlayout=\"total, prev, pager, next\"\r\n\t\t\t@size-change=\"pageSizeChange\"\r\n\t\t\t@current-change=\"pagesIndexChange\"\r\n\t\t\t@prev-click=\"pagesIndexChange\"\r\n\t\t\t@next-click=\"pagesIndexChange\"\r\n\t\t\t:current-page=\"pages.page\"\r\n\t\t\t:page-size=\"pages.size\"\r\n\t\t\t:total=\"pages.total\"\r\n\t\t></el-pagination>\r\n\t</div>\n</template>\n\n<script>\r\n\texport default {\r\n\t\tname:\"parient\",\r\n\t\tprops:{\r\n\t\t\tuser:{\r\n\t\t\t\ttype:String,\r\n\t\t\t\tdefault:\"\",\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tdataList:[],\r\n\t\t\t\tselects:[],\r\n\t\t\t\tresult:[],\r\n\t\t\t\tdataSearch:\"\",\r\n\t\t\t\tisLoading:false,\r\n\t\t\t\tpages:{\r\n\t\t\t\t\tpage:1,\r\n\t\t\t\t\tsize:20,\r\n\t\t\t\t\ttotal:0,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\tuser(){\r\n\t\t\t\tif(this.user){\r\n\t\t\t\t\tthis.queryAssignCustomerRelation();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.selects = []\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tpageSizeChange(e){\r\n\t\t\t\tthis.pages.size = e;\r\n\t\t\t\tthis.queryData()\r\n\t\t\t},\r\n\t\t\tpagesIndexChange(e){\r\n\t\t\t\tthis.pages.page = e;\r\n\t\t\t\tthis.queryData()\r\n\t\t\t},\r\n\t\t\tchangeSelect(item,to,arr){\r\n\t\t\t\tif(to == \"right\"){\r\n\t\t\t\t\tfor(var i = 0;i < item.length;i++){\r\n\t\t\t\t\t\tlet current = item[i];\r\n\t\t\t\t\t\tfor(var j = 0;j < this.dataList.length;j++){\r\n\t\t\t\t\t\t\tif(current == this.dataList[j].CustomerGuid){\r\n\t\t\t\t\t\t\t\tthis.result.push(this.dataList[j])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\t\t\t\r\n\t\t\t\t\tfor(var x = 0;x < arr.length;x++){\r\n\t\t\t\t\t\tlet current = arr[x];\r\n\t\t\t\t\t\tfor(var y = 0;y < this.result.length;y++){\r\n\t\t\t\t\t\t\tif(current == this.result[y].CustomerGuid){\r\n\t\t\t\t\t\t\t\tthis.result.remove(this.result[y])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync queryAssignCustomerRelation(){\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tUserGuid:this.user\r\n\t\t\t\t}\r\n\t\t\t\tlet res = await this.$api.get(\"/Medical/QueryAssignCustomerRelation\",params)\r\n\t\t\t\tif (!res.IsPositive) {\r\n\t\t\t\t\tthis.$tips.warning(\"查询已分配客户异常\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.selects = [];\r\n\t\t\t\tfor(var i = 0;i<res.Data.DataList.length;i++){\r\n\t\t\t\t\tthis.selects.push(res.Data.DataList[i].CustomerGuid)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync queryData() {\r\n\t\t\t\tconst _params = {\r\n\t\t\t\t\tkeyword: this.dataSearch,\r\n\t\t\t\t\tpage: this.pages.page,\r\n\t\t\t\t\tPageSize: this.pages.size\r\n\t\t\t\t};\r\n\t\t\t\tthis.isLoading=true;\r\n\t\t\t\tlet res = await this.$api.get(\"/Medical/QueryCustomer\", _params);\r\n\t\t\t\tthis.isLoading=false;\r\n\t\t\t\tif (!res.IsPositive) {\r\n\t\t\t\t\tthis.$tips.warning(\"查询数据异常\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.dataList = res.Data.Data;\r\n\t\t\t\tthis.pages.total = res.Data.TotalCount;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.queryData();\r\n\t\t\tif(this.user){\r\n\t\t\t\tthis.queryAssignCustomerRelation();\r\n\t\t\t}else{\r\n\t\t\t\tthis.selects = []\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\n</script>\n\n<style>\n</style>\n"]}]}