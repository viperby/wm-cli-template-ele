{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GaeaProject\\jpn_medical_web\\pages\\main\\treatment\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\pages\\main\\treatment\\index.vue","mtime":1601036333191},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBjb25mIGZyb20gJ0AvY29uZi9jb25mLmpzJwppbXBvcnQgaGVhbHRoUmVjb3JkRGV0YWlsIGZyb20gIkAvcGFnZXMvbWFpbi9hcHBvaW50bWVudC9oZWFsdGhfcmVjb3JkX2RldGFpbC52dWUiOwppbXBvcnQgcHJlc2NyaXB0aW9uRHRsIGZyb20gIkAvcGFnZXMvbWFpbi90cmVhdG1lbnQvcHJlc2NyaXB0aW9uRHRsLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKCWNvbXBvbmVudHM6ewoJCWhlYWx0aFJlY29yZERldGFpbCwKCQlwcmVzY3JpcHRpb25EdGwKCX0sCglkYXRhKCl7CgkJcmV0dXJuIHsKCQkJdXBsb2FkVXJsOmNvbmYuZ2V0Q3VycmVudFVwbG9hZEFkZHIoKSwKCQkJdXBsb2FkRGF0YTp7CgkJCQltb2RlOiJ1cGxvYWQiCgkJCX0sCgkJCXZpZXc6ewoJCQkJdGFibGVIZWlnaHQ6NjUwLAoJCQkJcGF5U3RhdHVzOmZhbHNlLAoJCQkJcHJlc2NyaXB0aW9uOmZhbHNlLAoJCQkJcGF0aWVudHM6ZmFsc2UsCgkJCQl0cmVhdG1lbnQ6ZmFsc2UsCgkJCQlmZWU6ZmFsc2UsCgkJCQlvcmRlcjpmYWxzZSwKCQkJfSwKCQkJa2V5d29yZDoiIiwKCQkJY3VzdG9tZXJzOltdLAoJCQlzZWxlY3RDdXN0b21lcjp7fSwKCQkJZmVlOnsKCQkJCUFwcG9pbnRtZW50R3VpZDoiIiwKCQkJCUF0dGFjaG1lbnRzOiIiLAoJCQkJRmVlSXRlbXM6W3tJdGVtTmFtZToiIixJdGVtQW1vdW50OiIiLFNob3dPcmRlcjowfV0sCgkJCQlGaWxlUGF0aDoiIiwKCQkJfSwKCQkJcGFnZXM6ewoJCQkJc2l6ZToyMCwKCQkJCXBhZ2U6MSwKCQkJCXRvdGFsOjAKCQkJfSwKCQkJdHJlYXQ6ewoJCQkJQXBwb2ludG1lbnRHdWlkOiIiLAoJCQkJRGlhZ25vc2lzRGVzYzoiIiwKCQkJCUF0dGFjaG1lbnRzOiIiLAoJCQl9LAoJCQlmZWVJc0VkaXQ6ZmFsc2UsCgkJCW9yZGVyRGF0YTp7CgkJCQlBdHRhY2htZW50OiBbXQoJCQl9LAoJCQl0cmVhdFJ1bGVzOnsKCQkJCURpYWdub3Npc0Rlc2M6IFsKCQkJCQl7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl55yL6K+K5oOF5Ya1JywgdHJpZ2dlcjogJ2JsdXInIH0sCgkJCQkJeyBtaW46IDUsIG1heDogMjAwLCBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDUg5YiwIDIwMCDkuKrlrZfnrKYnLCB0cmlnZ2VyOiAnYmx1cicgfQoJCQkJXSwKCQkJCUF0dGFjaG1lbnRzOlsKCQkJCQl7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup6KaB5LiK5Lyg55qE5aSE5pa5JywgdHJpZ2dlcjogJ2NoYW5nZScgfSwKCQkJCV0sCgkJCQlJdGVtTmFtZTpbCgkJCQkJeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeaUtui0uemhueebruWQjeensCcsIHRyaWdnZXI6ICdibHVyJyB9LAoJCQkJCXsgbWluOiAxLCBtYXg6IDUwLCBtZXNzYWdlOiAn6ZW/5bqm6L+H6ZW/JywgdHJpZ2dlcjogJ2JsdXInIH0KCQkJCV0sCgkJCQlJdGVtQW1vdW50OlsKCQkJCQl7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5pS26LS56aG555uu6YeR6aKdJywgdHJpZ2dlcjogJ2JsdXInIH0sCgkJCQkJeyB0eXBlOiJudW1iZXIiLCBtZXNzYWdlOiAn6K+36L6T5YWl5q2j56Gu55qE5pWw5a2XJywgdHJpZ2dlcjogJ2JsdXInIH0sCgkJCQldCgkJCX0KCQl9OwoJfSwKCW1ldGhvZHM6ewoJCXBhZ2VTaXplQ2hhbmdlKGUpewoJCQl0aGlzLnBhZ2VzLnNpemUgPSBlOwoJCQl0aGlzLnBhZ2VzLnBhZ2UgPSAxOwoJCQl0aGlzLnF1ZXJ5RGF0YSgpCgkJfSwKCQlwYWdlc0luZGV4Q2hhbmdlKGUpewoJCQl0aGlzLnBhZ2VzLnBhZ2UgPSBlOwoJCQl0aGlzLnF1ZXJ5RGF0YSgpCgkJfSwKCQlzZWFyY2goKXsKCQkJdGhpcy5wYWdlcy5wYWdlID0gMTsKCQkJdGhpcy5xdWVyeURhdGEoKQoJCX0sCgkJaW52aXRhdGlvbihpZCkgewoJCQl2YXIgbXNnID0gewoJCQkJdG86IGlkLAoJCQkJaW5mbzogewoJCQkJCUNyZWF0ZXI6IDEKCQkJCX0sCgkJCQl0eXBlOiAiIgoJCQl9OwoJCQl0aGlzLiRldmVuLiRlbWl0KCJ1c2VyX2xpdmVfbGF1bmNoIiwgbXNnKTsKCQl9LAoJCXN3aXRjaEZlZVN0YXR1cyhkYXRhKXsKCQkJaWYoIWRhdGEuRmVlT3JkZXJHdWlkKXsKCQkJCXRoaXMuJHRpcHMud2FybmluZygi5rKh5pyJ5pyJ5pWI55qE5Y2V5o2uIik7CgkJCQlyZXR1cm4gCgkJCX0KCQkJdGhpcy5zZWxlY3RDdXN0b21lciA9IGRhdGE7CgkJCXRoaXMudmlldy5wYXlTdGF0dXMgPSB0cnVlOwoJCX0sCgkJZG93bmxvYWRGaWxlKHBhdGgpewoJCQlwYXRoLmZvckVhY2goaXRlbSA9PiB7CgkJCQl3aW5kb3cub3Blbihjb25mLmdldEN1cnJlbnRTZXJ2ZUFkZHIoIm1haW4iKSArIGl0ZW0uRmlsZVBhdGgpOwoJCQl9KQoJCX0sCgkJc2F2ZUZlZSgpewoJCQlpZih0aGlzLmZlZUlzRWRpdCl7CgkJCQl0aGlzLnVwZGF0ZUZlZU9yZGVyKCk7CgkJCX1lbHNlewoJCQkJdGhpcy5jcmVhdGVGZWVPcmRlcigpOwoJCQl9CgkJfSwKCQkvLyDmlLbotLnljZXmja4g56e76Zmk5YiX6KGo5paH5Lu2CgkJb25GZWVPcmRlclJlbW92ZShmaWxlLCBmaWxlTGlzdCl7CgkJCXRoaXMuZmVlLkF0dGFjaG1lbnRzID0gIiI7CgkJfSwKCQkvLyDmlLbotLnljZXmja4g5LiK5Lyg5oiQ5YqfCgkJb25GZWVPcmRlcihlLCBmaWxlLCBmaWxlTGlzdCl7CgkJCS8vIGxldCBkYXRhID0gSlNPTi5wYXJzZShlLkRhdGEpCgkJCS8vIHRoaXMuZmVlLkF0dGFjaG1lbnQgPSBlLkRhdGEuaWRzdHI7CgkJCS8vIHRoaXMuZmVlLkZpbGVQYXRoID0gZS5EYXRhLnBhdGg7CgkJCWxldCBpZHN0ciA9IFtdCgkJCWZvcih2YXIgaSA9IDA7IGkgPCBmaWxlTGlzdC5sZW5ndGg7IGkrKykgewoJCQkJbGV0IGl0ZW0gPSBmaWxlTGlzdFtpXS5yZXNwb25zZS5EYXRhCgkJCQlpZHN0ci5wdXNoKGl0ZW0uaWRzdHIpCgkJCX0KCQkJdGhpcy5mZWUuQXR0YWNobWVudHMgPSBpZHN0ci5qb2luKCJ8IikKCQl9LAoJCS8vIOW8gOaUtui0ueWNlQoJCWNvbnRpbnVlRmVlKCl7CgkJCXRoaXMuJHJlZnMuZmVlLnZhbGlkYXRlKCh2YWxpZCk9PnsKCQkJCWlmKHZhbGlkKXsKCQkJCQkvL+W9k+mqjOivgemAmui/h++8jOi/m+WFpeWIsOaUtui0ueWNleivpuaDhemhtQoJCQkJCXRoaXMub3JkZXJEYXRhLkZlZUl0ZW1zID0gdGhpcy5mZWUuRmVlSXRlbXM7CgkJCQkJbGV0IHRvdGFsQW1vdW50ID0gMDsKCQkJCQlmb3IodmFyIGkgPSAwO2kgPCB0aGlzLmZlZS5GZWVJdGVtcy5sZW5ndGg7aSsrKXsKCQkJCQkJbGV0IGl0ZW0gPSB0aGlzLmZlZS5GZWVJdGVtc1tpXTsKCQkJCQkJdG90YWxBbW91bnQgKz0gaXRlbS5JdGVtQW1vdW50OwoJCQkJCX0KCQkJCQl0aGlzLm9yZGVyRGF0YS5Ub3RhbFBheWFibGVBbW91bnQgPSB0b3RhbEFtb3VudDsKCQkJCQkvLyB0aGlzLm9yZGVyRGF0YS5BdHRhY2htZW50ID0ge0ZpbGVQYXRoOnRoaXMuZmVlLkZpbGVQYXRofQoJCQkJCXRoaXMuZmVlSXNFZGl0ID0gZmFsc2U7CgkJCQkJdGhpcy52aWV3LmZlZSA9IGZhbHNlOwoJCQkJCXRoaXMudmlldy5vcmRlciA9IHRydWU7CgkJCQkJLy90aGlzLmNyZWF0ZVByZXNjcmlwdGlvbigpOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCX0pCgkJfSwKCQllZGl0RmVlKCl7CgkJCS8vZmVlSXNFZGl0IOeUqOS7peaOp+WItuW9k+WJjeaUtui0ueWNleaYr+adpeiHquS6juacquS/neWtmOWNleaNruaIluiAheW3suS/neWtmOWNleaNrueahOWGjeS/ruaUuQoJCQlpZih0aGlzLmZlZUlzRWRpdCl7CgkJCQkvL3RvZG8gZWRpdAoJCQkJdGhpcy5mZWUuRmVlSXRlbXMgPSB0aGlzLm9yZGVyRGF0YS5GZWVJdGVtczsKCQkJCQoJCQl9ZWxzZXsKCQkJCS8vdG9kbyByZXR1cm4KCQkJfQoJCQl0aGlzLnZpZXcub3JkZXIgPSBmYWxzZTsKCQkJdGhpcy52aWV3LmZlZSA9IHRydWU7CgkJfSwKCQlzYXZlUHJlc2NyaXB0aW9uKCl7CgkJCXRoaXMuJHJlZnMudHJlYXRGb3JtLnZhbGlkYXRlKCh2YWxpZCk9PnsKCQkJCWlmKHZhbGlkKXsKCQkJCQl0aGlzLmNyZWF0ZVByZXNjcmlwdGlvbigpOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCX0pCgkJfSwKCQkvLyDlvIDmlrkg5paH5Lu25YiX6KGo56e76ZmkCgkJb25QcmVzY3JpcHRpb25SZW1vdmUoZmlsZSwgZmlsZUxpc3QpewoJCQkvLyBjb25zb2xlLmxvZyhmaWxlLCBmaWxlTGlzdCkKCQkJLy8gbGV0IGlkc3RyID0gW107CgkJCS8vIGZvcih2YXIgaSA9IDA7aSA8IGZpbGVMaXN0Lmxlbmd0aDtpKyspewoJCQkvLyAJbGV0IGl0ZW0gPSBmaWxlTGlzdFtpXS5yZXNwb25zZS5EYXRhOwoJCQkvLyAJaWRzdHIucHVzaChpdGVtLmlkc3RyKTsKCQkJLy8gfQoJCQkvLyB0aGlzLnRyZWF0LkF0dGFjaG1lbnRzID0gaWRzdHIuam9pbigifCIpCgkJCXRoaXMudHJlYXQuQXR0YWNobWVudHMgPSAiIgoJCX0sCgkJLy8g5byA5pa5IOaWh+S7tuS4iuS8oOaIkOWKnwoJCW9uUHJlc2NyaXB0aW9uKGUsIGZpbGUsIGZpbGVMaXN0KXsKCQkJLy8gY29uc29sZS5sb2coZSxmaWxlLCBmaWxlTGlzdCkKCQkJLy9sZXQgZGF0YSA9IEpTT04ucGFyc2UoZS5EYXRhKTsKCQkJLy90aGlzLnRyZWF0LkF0dGFjaG1lbnRzID0gZGF0YS5pZHN0cjsKCQkJbGV0IGlkc3RyID0gW107CgkJCWZvcih2YXIgaSA9IDA7aSA8IGZpbGVMaXN0Lmxlbmd0aDtpKyspewoJCQkJbGV0IGl0ZW0gPSBmaWxlTGlzdFtpXS5yZXNwb25zZS5EYXRhOwoJCQkJaWRzdHIucHVzaChpdGVtLmlkc3RyKTsKCQkJfQoJCQl0aGlzLnRyZWF0LkF0dGFjaG1lbnRzID0gaWRzdHIuam9pbigifCIpCgkJfSwKCQlyZW1vdmVGZWVJdGVtKGl0ZW0pewoJCQl0aGlzLmZlZS5GZWVJdGVtcy5yZW1vdmUoaXRlbSk7CgkJfSwKCQkvLyDlvIDmlLbotLnljZUKCQl2aWV3RmVlKGl0ZW0pewoJCQl0aGlzLnNlbGVjdEN1c3RvbWVyID0gaXRlbTsKCQkJdGhpcy5mZWUgPSB7CgkJCQlGZWVJdGVtczpbewoJCQkJCUl0ZW1OYW1lOiIiLAoJCQkJCUl0ZW1BbW91bnQ6IiIsCgkJCQkJU2hvd09yZGVyOjAKCQkJCX1dLAoJCQl9CgkJCXRoaXMudmlldy5mZWUgPSB0cnVlOwoJCX0sCgkJLy8g5byA5pa5CgkJdmlld1RyZWF0bWVudChpdGVtKXsKCQkJdGhpcy50cmVhdCA9IHsKCQkJCUFwcG9pbnRtZW50R3VpZDoiIiwKCQkJCURpYWdub3Npc0Rlc2M6IiIsCgkJCQlBdHRhY2htZW50czoiIiwKCQkJfQoJCQl0aGlzLnNlbGVjdEN1c3RvbWVyID0gaXRlbTsKCQkJdGhpcy52aWV3LnRyZWF0bWVudCA9IHRydWU7CgkJfSwKCQkvLyDlvIDmlrnor6bmg4UKCQl2aWV3RGV0YWlscyhpdGVtKSB7CgkJCXRoaXMuc2VsZWN0Q3VzdG9tZXIgPSBpdGVtOwoJCQl0aGlzLnZpZXcucHJlc2NyaXB0aW9uPXRydWUKCQl9LAoJCWFkZEZlZUl0ZW0oKXsKCQkJdGhpcy5mZWUuRmVlSXRlbXMucHVzaCh7SXRlbU5hbWU6IiIsSXRlbUFtb3VudDoiIixTaG93T3JkZXI6dGhpcy5mZWUuRmVlSXRlbXMubGVuZ3RoLTF9KTsKCQl9LAoJCS8vIOafpeeci+aUtui0ueWNlQoJCWdldE9yZGVyQ29udGVudChkYXRhKXsKCQkJLy8gY29uc29sZS5sb2coZGF0YSk7CgkJCXRoaXMuZmVlSXNFZGl0ID0gdHJ1ZTsKCQkJdGhpcy5zZWxlY3RDdXN0b21lciA9IGRhdGE7CgkJCXRoaXMucXVlcnlPcmRlcihkYXRhLkFwcG9pbnRtZW50R3VpZCk7CgkJCXRoaXMudmlldy5vcmRlciA9IHRydWU7CQoJCQkvLyB0aGlzLm9yZGVyRGF0YSA9IHt9IC8vIOS8mOWMlua4suafk+aViOaenAkKCQl9LAoJCS8v5pu05paw5pSv5LuY54q25oCBCgkJYXN5bmMgdXBkYXRlRmVlU3RhdHVzKCl7CgkJCWxldCBwYXJhbXMgPSB7CgkJCQlGZWVPcmRlckd1aWQ6dGhpcy5zZWxlY3RDdXN0b21lci5GZWVPcmRlckd1aWQsCgkJCQlQYXlTdGF0dXM6dGhpcy5zZWxlY3RDdXN0b21lci5QYXlTdGF0dXMgPT0gMD8xOjAsCgkJCX0KCQkJbGV0IHJlcyA9IGF3YWl0IHRoaXMuJGFwaS5wb3N0KCIvTWVkaWNhbC9VcGRhdGVQYXltZW50U3RhdHVzIixwYXJhbXMpOwoJCQlpZighcmVzLklzUG9zaXRpdmUpewoJCQkJdGhpcy4kdGlwcy53YXJuaW5nKCLmm7TmlrDmlbDmja7lvILluLgiKTsKCQkJCXJldHVybjsKCQkJfQoJCQl0aGlzLiR0aXBzLnN1Y2Nlc3MoIuabtOaWsOaIkOWKnyIpOwoJCQl0aGlzLnZpZXcucGF5U3RhdHVzID0gZmFsc2U7CgkJCXRoaXMuc2VsZWN0Q3VzdG9tZXIuUGF5U3RhdHVzID0gcGFyYW1zLlBheVN0YXR1czsKCQl9LAoJCS8v5pu05paw5pS26LS55Y2VCgkJYXN5bmMgdXBkYXRlRmVlT3JkZXIoKXsKCQkJbGV0IHBhcmFtcyA9IHsKCQkJCUZlZU9yZGVyR3VpZDp0aGlzLm9yZGVyRGF0YS5GZWVPcmRlckd1aWQsCgkJCQlBcHBvaW50bWVudEd1aWQ6dGhpcy5zZWxlY3RDdXN0b21lci5BcHBvaW50bWVudEd1aWQsCgkJCQlBdHRhY2htZW50czp0aGlzLm9yZGVyRGF0YS5BdHRhY2htZW50LAoJCQkJRmVlSXRlbXM6SlNPTi5zdHJpbmdpZnkodGhpcy5vcmRlckRhdGEuRmVlSXRlbXMpLAoJCQl9CgkJCWxldCByZXMgPSBhd2FpdCB0aGlzLiRhcGkucG9zdCgiL0ZpbmFuY2VNYW5hZ2UvVXBkYXRlRmVlT3JkZXIiLHBhcmFtcykKCQkJaWYoIXJlcy5Jc1Bvc2l0aXZlKXsKCQkJCXRoaXMuJHRpcHMud2FybmluZygi5pu05paw5pWw5o2u5byC5bi4Iik7CgkJCQlyZXR1cm47CgkJCX0KCQkJdGhpcy4kdGlwcy5zdWNjZXNzKCLmm7TmlrDmiJDlip8iKTsKCQkJdGhpcy52aWV3Lm9yZGVyID0gZmFsc2U7CgkJCXRoaXMucXVlcnlEYXRhKCk7CgkJfSwKCQkvL+WIm+W7uuaUtui0ueWNlQoJCWFzeW5jIGNyZWF0ZUZlZU9yZGVyKCl7CgkJCWxldCBwYXJhbXMgPSB7CgkJCQlGZWVJdGVtczpKU09OLnN0cmluZ2lmeSh0aGlzLmZlZS5GZWVJdGVtcyksCgkJCQlBcHBvaW50bWVudEd1aWQ6dGhpcy5zZWxlY3RDdXN0b21lci5BcHBvaW50bWVudEd1aWQsCgkJCQlBdHRhY2htZW50OiB0aGlzLmZlZS5BdHRhY2htZW50cwoJCQl9OwoJCQlsZXQgcmVzID0gYXdhaXQgdGhpcy4kYXBpLnBvc3QoIi9GaW5hbmNlTWFuYWdlL0NyZWF0ZUZlZU9yZGVyIixwYXJhbXMpOwoJCQlpZiAoIXJlcy5Jc1Bvc2l0aXZlKXsKCQkJCXRoaXMuJHRpcHMud2FybmluZygi5L+d5a2Y5pWw5o2u5byC5bi4Iik7CgkJCQlyZXR1cm47CgkJCX0KCQkJdGhpcy4kdGlwcy5zdWNjZXNzKCLkv53lrZjmiJDlip8iKTsKCQkJdGhpcy52aWV3Lm9yZGVyID0gZmFsc2U7CgkJCXRoaXMucXVlcnlEYXRhKCk7CgkJfSwKCQkvLyDlvIDmlrkKCQlhc3luYyBjcmVhdGVQcmVzY3JpcHRpb24oKXsKCQkJbGV0IHBhcmFtcyA9IHRoaXMudHJlYXQ7CgkJCXBhcmFtcy5BcHBvaW50bWVudEd1aWQgPSB0aGlzLnNlbGVjdEN1c3RvbWVyLkFwcG9pbnRtZW50R3VpZDsKCQkJbGV0IHJlcyA9IGF3YWl0IHRoaXMuJGFwaS5wb3N0KCIvTWVkaWNhbC9DcmVhdGVQcmVzY3JpcHRpb24iLHBhcmFtcyk7CgkJCWlmICghcmVzLklzUG9zaXRpdmUpIHsKCQkJCXRoaXMuJHRpcHMud2FybmluZygi5L+d5a2Y5pWw5o2u5byC5bi4Iik7CgkJCQlyZXR1cm47CgkJCX0KCQkJdGhpcy52aWV3LnRyZWF0bWVudCA9IGZhbHNlOwoJCQl0aGlzLnF1ZXJ5RGF0YSgpCgkJfSwKCQkvLyDmn6Xor6LmlLbotLnor6bmg4UKCQlhc3luYyBxdWVyeU9yZGVyKGFwSWQpewoJCQljb25zdCBwYXJhbXMgPSB7CgkJCQlBcHBvaW50bWVudEd1aWQ6YXBJZCwKCQkJfQoJCQlsZXQgcmVzID0gYXdhaXQgdGhpcy4kYXBpLmdldCgiL0ZpbmFuY2VNYW5hZ2UvR2V0RmVlT3JkZXJEZXRhaWwiLHBhcmFtcykKCQkJaWYgKCFyZXMuSXNQb3NpdGl2ZSkgewoJCQkJdGhpcy4kdGlwcy53YXJuaW5nKCLmn6Xor6LmlbDmja7lvILluLgiKTsKCQkJCXJldHVybjsKCQkJfQoJCQl0aGlzLm9yZGVyRGF0YSA9IHJlcy5EYXRhOwoJCQkvLyBjb25zb2xlLmxvZyhyZXMpOwoJCX0sCgkJYXN5bmMgcXVlcnlEYXRhKCl7CgkJCWNvbnN0IHBhcmFtcyA9IHsKCQkJCWtleXdvcmQ6IHRoaXMua2V5d29yZCwKCQkJCXBhZ2U6IHRoaXMucGFnZXMucGFnZSwKCQkJCVBhZ2VTaXplOiB0aGlzLnBhZ2VzLnNpemUsCgkJCX07CgkJCXRoaXMuJGxvYWRpbmcoKTsKCQkJbGV0IHJlcyA9IGF3YWl0IHRoaXMuJGFwaS5nZXQoIi9NZWRpY2FsL1F1ZXJ5TWVkaWNhbFZpc2l0IiwgcGFyYW1zKQoJCQl0aGlzLiRsb2FkaW5nKCkuY2xvc2UoKTsKCQkJaWYgKCFyZXMuSXNQb3NpdGl2ZSkgewoJCQkJdGhpcy4kdGlwcy53YXJuaW5nKCLmn6Xor6LmlbDmja7lvILluLgiKTsKCQkJCXJldHVybjsKCQkJfQoJCQl0aGlzLmN1c3RvbWVycyA9IHJlcy5EYXRhLkRhdGFMaXN0OwoJCQl0aGlzLnBhZ2VzLnRvdGFsID0gcmVzLkRhdGEuVG90YWxDb3VudDsKCQl9Cgl9LAoJY3JlYXRlZCgpIHsKCQl0aGlzLnZpZXcudGFibGVIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQvMTAwICogNzA7Cgl9LAoJbW91bnRlZCgpIHsKCQl0aGlzLnF1ZXJ5RGF0YSgpCgl9CgkKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"index.vue","sourceRoot":"pages/main/treatment","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-row>\r\n\t\t\t<el-col :span=\"24\" style=\"margin-bottom: 15px;\">\r\n\t\t\t\t<el-row type=\"flex\">\r\n\t\t\t\t\t<el-col :span=\"10\">\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"8\">\r\n\t\t\t\t\t\t<el-input @keyup.enter.native=\"search()\" :placeholder=\"$t('default.TIPS.CLIENT.INPUT_SEARCH')\" v-model=\"keyword\"></el-input>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"2\" style=\"margin-left:5px\">\r\n\t\t\t\t\t\t<el-button @click=\"search()\" type=\"primary\">搜索</el-button>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t</el-col>\r\n\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t<el-table :height=\"view.tableHeight\" :data=\"customers\" border>\r\n\t\t\t\t\t<el-table-column type=\"index\" label=\"序号\" width=\"80\"></el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"CustomerName\" label=\"约诊患者\"></el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"DoctorName\" label=\"预约医生\"></el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"ConfirmDate\" label=\"预约看诊时间\"></el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"SeekAppointmentCount\" label=\"患者病例\">\r\n\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t<el-link @click=\"selectCustomer = scope.row;view.patients = true;\" type=\"primary\">附件</el-link>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t<el-table-column prop=\"OfficeTypeName\" label=\"诊疗情况\"></el-table-column>\r\n\t\t\t\t\t<el-table-column label=\"医生处方\">\r\n\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t<el-link v-if=\"scope.row.IsCreatedPrescription == 1\" @click=\"selectCustomer = scope.row;view.prescription=true\" type=\"primary\">附件</el-link>&zwnj;\r\n\t\t\t\t\t\t\t<el-link v-if=\"scope.row.IsCreatedPrescription == 0\" type=\"info\">待诊</el-link>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t<el-table-column label=\"支付状态\">\r\n\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t<el-link v-if=\"scope.row.PayStatus == 0\" @click=\"switchFeeStatus(scope.row)\" type=\"info\">待支付</el-link>&zwnj;\r\n\t\t\t\t\t\t\t<el-link v-if=\"scope.row.PayStatus == 1\" @click=\"switchFeeStatus(scope.row)\" type=\"primary\">支付成功</el-link>&zwnj;\r\n\t\t\t\t\t\t\t<el-link v-if=\"scope.row.PayStatus == 2\" type=\"danger\">支付失败</el-link>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t\t<el-table-column label=\"操作\" align=\"center\">\r\n\t\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t\t<el-link \r\n\t\t\t\t\t\t\t\tv-if=\"scope.row.IsVisited == 0\" \r\n\t\t\t\t\t\t\t\t@click=\"invitation(scope.row.CustomerUserGuid)\" \r\n\t\t\t\t\t\t\t\ttype=\"primary\">看诊</el-link>&zwnj;\r\n\t\t\t\t\t\t\t<!-- <el-link @click=\"invitation(scope.row.CustomerUserGuid)\" type=\"primary\">看诊</el-link>&zwnj; -->\r\n\t\t\t\t\t\t\t<el-link \r\n\t\t\t\t\t\t\t\tv-if=\"scope.row.IsCreatedPrescription == 0\"\r\n\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\t@click=\"viewTreatment(scope.row)\">开方</el-link>&zwnj;\r\n\t\t\t\t\t\t\t<el-link \r\n\t\t\t\t\t\t\t\tv-if=\"scope.row.IsCreatedPrescription == 1\"\r\n\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\t@click=\"viewDetails(scope.row)\">开方详情</el-link>&zwnj;\r\n\t\t\t\t\t\t\t<el-link \r\n\t\t\t\t\t\t\t\tv-if=\"scope.row.IsCreatedFeeOrder == 0\"\r\n\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\t@click=\"viewFee(scope.row)\">开收费单</el-link>\r\n\t\t\t\t\t\t\t<el-link \r\n\t\t\t\t\t\t\t\tv-if=\"scope.row.IsCreatedFeeOrder == 1\"\r\n\t\t\t\t\t\t\t\t@click=\"getOrderContent(scope.row)\"\r\n\t\t\t\t\t\t\t\ttype=\"primary\">查看收费单</el-link>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</el-table-column>\r\n\t\t\t\t</el-table>\r\n\r\n\t\t\t\t<el-pagination\r\n\t\t\t\t\tstyle=\"margin:10px 0;\"\r\n\t\t\t\t\tbackground\r\n\t\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t\t\t@size-change=\"pageSizeChange\"\r\n\t\t\t\t\t@current-change=\"pagesIndexChange\"\r\n\t\t\t\t\t@prev-click=\"pagesIndexChange\"\r\n\t\t\t\t\t@next-click=\"pagesIndexChange\"\r\n\t\t\t\t\t:page-sizes=\"[20,50,100,200]\"\r\n\t\t\t\t\t:page-size=\"pages.size\"\r\n\t\t\t\t\t:total=\"pages.total\"\r\n\t\t\t\t></el-pagination>\r\n\t\t\t</el-col>\r\n\t\t</el-row>\r\n\t\t<!-- 开方弹窗 -->\r\n\t\t<el-dialog title=\"看诊\" :fullscreen=\"false\" :visible.sync=\"view.treatment\" :destroy-on-close=\"true\">\r\n\t\t\t<el-form ref=\"treatForm\" :model=\"treat\" :rules=\"treatRules\">\r\n\t\t\t\t<el-form-item label=\"诊疗情况\">\r\n\t\t\t\t\t<el-input rows=\"6\" style=\"width:80%\" maxlength=\"200\" show-word-limit resize=\"none\" type=\"textarea\" v-model=\"treat.DiagnosisDesc\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"上传处方\" prop=\"Attachments\">\r\n\t\t\t\t\t<el-upload\r\n\t\t\t\t\t\tref=\"PrescriptionUpload\"\r\n\t\t\t\t\t\t:action=\"uploadUrl\"\r\n\t\t\t\t\t\taccept=\"image/jpeg, image/jpg, image/png,application/pdf\"\r\n\t\t\t\t\t\tlist-type=\"picture-card\"\r\n\t\t\t\t\t\t:multiple=\"true\"\r\n\t\t\t\t\t\t:data=\"uploadData\"\r\n\t\t\t\t\t\t:on-success=\"onPrescription\"\r\n\t\t\t\t\t\t:on-remove=\"onPrescriptionRemove\">\r\n\t\t\t\t\t\t<i class=\"el-icon-plus\"></i>\r\n\t\t\t\t\t</el-upload>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button>修改</el-button>\r\n\t\t\t\t<el-button @click=\"savePrescription()\" type=\"primary\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t\t<!-- 费用收取弹窗 -->\r\n\t\t<el-dialog title=\"诊疗费用\" :visible.sync=\"view.fee\" :destroy-on-close=\"true\">\r\n\t\t\t<el-form :model=\"fee\" :rules=\"treatRules\" ref=\"fee\">\r\n\t\t\t\t<el-form-item v-for=\"(item,index) in fee.FeeItems\" :key=\"index\" :label=\"'收费项目'+(index+1)\">\r\n\t\t\t\t\t<el-col :span=\"4\">\r\n\t\t\t\t\t\t<el-form-item :prop=\"`FeeItems[${index}].ItemName`\" :rules=\"treatRules.ItemName\">\r\n\t\t\t\t\t\t\t<el-input v-model=\"item.ItemName\" type=\"text\" placeholder=\"收费项目\" style=\"width: 100%;\"></el-input>\r\n\t\t\t\t\t\t</el-form-item>\t\t\t\t\t\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col class=\"line\" :span=\"1\" style=\"text-align:center\">-</el-col>\r\n\t\t\t\t\t<el-col :span=\"4\">\r\n\t\t\t\t\t\t<el-form-item :prop=\"`FeeItems[${index}].ItemAmount`\" :rules=\"treatRules.ItemAmount\">\r\n\t\t\t\t\t\t\t<el-input v-model.number=\"item.ItemAmount\" type=\"text\" placeholder=\"金额\" style=\"width: 100%;\"></el-input>\r\n\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"2\" :offset=\"1\">\r\n\t\t\t\t\t\t<el-button @click=\"removeFeeItem(item)\" v-if=\"index != fee.FeeItems.length - 1\" type=\"danger\" icon=\"el-icon-minus\" circle size=\"small\"></el-button>\r\n\t\t\t\t\t\t<el-button @click=\"addFeeItem\" v-if=\"index == fee.FeeItems.length - 1\" type=\"primary\" icon=\"el-icon-plus\" circle size=\"small\"></el-button>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"收费单据\">\r\n\t\t\t\t\t<br/>\r\n\t\t\t\t\t<el-upload\r\n\t\t\t\t\t\tclass=\"upload-demo\"\r\n\t\t\t\t\t\tdrag\r\n\t\t\t\t\t\taccept=\"image/jpeg, image/jpg, image/png,application/pdf\"\r\n\t\t\t\t\t\t:action=\"uploadUrl\"\r\n\t\t\t\t\t\t:data=\"uploadData\"\r\n\t\t\t\t\t\t:on-success=\"onFeeOrder\"\r\n\t\t\t\t\t\t:on-remove=\"onFeeOrderRemove\"\r\n\t\t\t\t\t\t:multiple=\"false\"\r\n\t\t\t\t\t\tstyle=\"margin-left:72px\">\r\n\t\t\t\t\t\t<i class=\"el-icon-upload\"></i>\r\n\t\t\t\t\t\t<div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\r\n\t\t\t\t\t\t<div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png/pdf文件，且不超过500kb</div>\r\n\t\t\t\t\t</el-upload>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"view.fee = false\">取消</el-button>\r\n\t\t\t\t<el-button @click=\"continueFee()\" type=\"primary\">继续</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t\t<!-- 费用详情 -->\r\n\t\t<el-dialog title=\"看诊费用\" :visible.sync=\"view.order\" width=\"30%\">\r\n\t\t\t<el-form size=\"mini\" style=\"padding-left: 50px;\" label-position=\"left\" label-width=\"70%\">\r\n\t\t\t\t<el-form-item v-for=\"(item,index) in orderData.FeeItems\" :key=\"index\" :label=\"item.ItemName\">\r\n\t\t\t\t\t{{ item.ItemAmount }}\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"收费单据\">\r\n\t\t\t\t\t<el-link v-show=\"orderData.Attachment.length > 0\" @click=\"downloadFile(orderData.Attachment)\" type=\"primary\">下载单据</el-link>\r\n\t\t\t\t\t<span v-show=\"orderData.Attachment == 0\">无单据</span>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-divider></el-divider>\r\n\t\t\t\t<el-form-item label=\"实付金额\">\r\n\t\t\t\t\t{{ orderData.TotalPayableAmount }}\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button v-if=\"selectCustomer.PayStatus == 0\" @click=\"editFee\">修改</el-button>\r\n\t\t\t\t<el-button @click=\"saveFee\" type=\"primary\">确 定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t\t<!-- 患者病例 -->\r\n\t\t<el-dialog title=\"患者病历\" :visible.sync=\"view.patients\">\r\n\t\t\t<health-record-detail :id=\"selectCustomer.MedicalRecordGuid\"></health-record-detail>\r\n\t\t</el-dialog>\r\n\t\t<!-- 处方附件 -->\r\n\t\t<el-dialog title=\"处方\" :visible.sync=\"view.prescription\">\r\n\t\t\t<prescriptionDtl :apId=\"selectCustomer.AppointmentGuid\"></prescriptionDtl>\r\n\t\t</el-dialog>\r\n\t\t<!-- 切换支付状态 -->\r\n\t\t<el-dialog title=\"支付状态\" :visible.sync=\"view.payStatus\">\r\n\t\t\t确定切换为{{ selectCustomer.PayStatus == 0?'已支付':'待支付' }}\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"view.payStatus = false\">{{ $t('default.BASIC.CANCEL') }}</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"updateFeeStatus()\">{{ $t('default.BASIC.ENTER') }}</el-button>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport conf from '@/conf/conf.js'\r\n\timport healthRecordDetail from \"@/pages/main/appointment/health_record_detail.vue\";\r\n\timport prescriptionDtl from \"@/pages/main/treatment/prescriptionDtl.vue\";\r\n\texport default {\r\n\t\tcomponents:{\r\n\t\t\thealthRecordDetail,\r\n\t\t\tprescriptionDtl\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tuploadUrl:conf.getCurrentUploadAddr(),\r\n\t\t\t\tuploadData:{\r\n\t\t\t\t\tmode:\"upload\"\r\n\t\t\t\t},\r\n\t\t\t\tview:{\r\n\t\t\t\t\ttableHeight:650,\r\n\t\t\t\t\tpayStatus:false,\r\n\t\t\t\t\tprescription:false,\r\n\t\t\t\t\tpatients:false,\r\n\t\t\t\t\ttreatment:false,\r\n\t\t\t\t\tfee:false,\r\n\t\t\t\t\torder:false,\r\n\t\t\t\t},\r\n\t\t\t\tkeyword:\"\",\r\n\t\t\t\tcustomers:[],\r\n\t\t\t\tselectCustomer:{},\r\n\t\t\t\tfee:{\r\n\t\t\t\t\tAppointmentGuid:\"\",\r\n\t\t\t\t\tAttachments:\"\",\r\n\t\t\t\t\tFeeItems:[{ItemName:\"\",ItemAmount:\"\",ShowOrder:0}],\r\n\t\t\t\t\tFilePath:\"\",\r\n\t\t\t\t},\r\n\t\t\t\tpages:{\r\n\t\t\t\t\tsize:20,\r\n\t\t\t\t\tpage:1,\r\n\t\t\t\t\ttotal:0\r\n\t\t\t\t},\r\n\t\t\t\ttreat:{\r\n\t\t\t\t\tAppointmentGuid:\"\",\r\n\t\t\t\t\tDiagnosisDesc:\"\",\r\n\t\t\t\t\tAttachments:\"\",\r\n\t\t\t\t},\r\n\t\t\t\tfeeIsEdit:false,\r\n\t\t\t\torderData:{\r\n\t\t\t\t\tAttachment: []\r\n\t\t\t\t},\r\n\t\t\t\ttreatRules:{\r\n\t\t\t\t\tDiagnosisDesc: [\r\n\t\t\t\t\t\t{ required: true, message: '请输入看诊情况', trigger: 'blur' },\r\n\t\t\t\t\t\t{ min: 5, max: 200, message: '长度在 5 到 200 个字符', trigger: 'blur' }\r\n\t\t\t\t\t],\r\n\t\t\t\t\tAttachments:[\r\n\t\t\t\t\t\t{ required: true, message: '请选择要上传的处方', trigger: 'change' },\r\n\t\t\t\t\t],\r\n\t\t\t\t\tItemName:[\r\n\t\t\t\t\t\t{ required: true, message: '请输入收费项目名称', trigger: 'blur' },\r\n\t\t\t\t\t\t{ min: 1, max: 50, message: '长度过长', trigger: 'blur' }\r\n\t\t\t\t\t],\r\n\t\t\t\t\tItemAmount:[\r\n\t\t\t\t\t\t{ required: true, message: '请输入收费项目金额', trigger: 'blur' },\r\n\t\t\t\t\t\t{ type:\"number\", message: '请输入正确的数字', trigger: 'blur' },\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tpageSizeChange(e){\r\n\t\t\t\tthis.pages.size = e;\r\n\t\t\t\tthis.pages.page = 1;\r\n\t\t\t\tthis.queryData()\r\n\t\t\t},\r\n\t\t\tpagesIndexChange(e){\r\n\t\t\t\tthis.pages.page = e;\r\n\t\t\t\tthis.queryData()\r\n\t\t\t},\r\n\t\t\tsearch(){\r\n\t\t\t\tthis.pages.page = 1;\r\n\t\t\t\tthis.queryData()\r\n\t\t\t},\r\n\t\t\tinvitation(id) {\r\n\t\t\t\tvar msg = {\r\n\t\t\t\t\tto: id,\r\n\t\t\t\t\tinfo: {\r\n\t\t\t\t\t\tCreater: 1\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttype: \"\"\r\n\t\t\t\t};\r\n\t\t\t\tthis.$even.$emit(\"user_live_launch\", msg);\r\n\t\t\t},\r\n\t\t\tswitchFeeStatus(data){\r\n\t\t\t\tif(!data.FeeOrderGuid){\r\n\t\t\t\t\tthis.$tips.warning(\"没有有效的单据\");\r\n\t\t\t\t\treturn \r\n\t\t\t\t}\r\n\t\t\t\tthis.selectCustomer = data;\r\n\t\t\t\tthis.view.payStatus = true;\r\n\t\t\t},\r\n\t\t\tdownloadFile(path){\r\n\t\t\t\tpath.forEach(item => {\r\n\t\t\t\t\twindow.open(conf.getCurrentServeAddr(\"main\") + item.FilePath);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsaveFee(){\r\n\t\t\t\tif(this.feeIsEdit){\r\n\t\t\t\t\tthis.updateFeeOrder();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.createFeeOrder();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 收费单据 移除列表文件\r\n\t\t\tonFeeOrderRemove(file, fileList){\r\n\t\t\t\tthis.fee.Attachments = \"\";\r\n\t\t\t},\r\n\t\t\t// 收费单据 上传成功\r\n\t\t\tonFeeOrder(e, file, fileList){\r\n\t\t\t\t// let data = JSON.parse(e.Data)\r\n\t\t\t\t// this.fee.Attachment = e.Data.idstr;\r\n\t\t\t\t// this.fee.FilePath = e.Data.path;\r\n\t\t\t\tlet idstr = []\r\n\t\t\t\tfor(var i = 0; i < fileList.length; i++) {\r\n\t\t\t\t\tlet item = fileList[i].response.Data\r\n\t\t\t\t\tidstr.push(item.idstr)\r\n\t\t\t\t}\r\n\t\t\t\tthis.fee.Attachments = idstr.join(\"|\")\r\n\t\t\t},\r\n\t\t\t// 开收费单\r\n\t\t\tcontinueFee(){\r\n\t\t\t\tthis.$refs.fee.validate((valid)=>{\r\n\t\t\t\t\tif(valid){\r\n\t\t\t\t\t\t//当验证通过，进入到收费单详情页\r\n\t\t\t\t\t\tthis.orderData.FeeItems = this.fee.FeeItems;\r\n\t\t\t\t\t\tlet totalAmount = 0;\r\n\t\t\t\t\t\tfor(var i = 0;i < this.fee.FeeItems.length;i++){\r\n\t\t\t\t\t\t\tlet item = this.fee.FeeItems[i];\r\n\t\t\t\t\t\t\ttotalAmount += item.ItemAmount;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.orderData.TotalPayableAmount = totalAmount;\r\n\t\t\t\t\t\t// this.orderData.Attachment = {FilePath:this.fee.FilePath}\r\n\t\t\t\t\t\tthis.feeIsEdit = false;\r\n\t\t\t\t\t\tthis.view.fee = false;\r\n\t\t\t\t\t\tthis.view.order = true;\r\n\t\t\t\t\t\t//this.createPrescription();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\teditFee(){\r\n\t\t\t\t//feeIsEdit 用以控制当前收费单是来自于未保存单据或者已保存单据的再修改\r\n\t\t\t\tif(this.feeIsEdit){\r\n\t\t\t\t\t//todo edit\r\n\t\t\t\t\tthis.fee.FeeItems = this.orderData.FeeItems;\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//todo return\r\n\t\t\t\t}\r\n\t\t\t\tthis.view.order = false;\r\n\t\t\t\tthis.view.fee = true;\r\n\t\t\t},\r\n\t\t\tsavePrescription(){\r\n\t\t\t\tthis.$refs.treatForm.validate((valid)=>{\r\n\t\t\t\t\tif(valid){\r\n\t\t\t\t\t\tthis.createPrescription();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 开方 文件列表移除\r\n\t\t\tonPrescriptionRemove(file, fileList){\r\n\t\t\t\t// console.log(file, fileList)\r\n\t\t\t\t// let idstr = [];\r\n\t\t\t\t// for(var i = 0;i < fileList.length;i++){\r\n\t\t\t\t// \tlet item = fileList[i].response.Data;\r\n\t\t\t\t// \tidstr.push(item.idstr);\r\n\t\t\t\t// }\r\n\t\t\t\t// this.treat.Attachments = idstr.join(\"|\")\r\n\t\t\t\tthis.treat.Attachments = \"\"\r\n\t\t\t},\r\n\t\t\t// 开方 文件上传成功\r\n\t\t\tonPrescription(e, file, fileList){\r\n\t\t\t\t// console.log(e,file, fileList)\r\n\t\t\t\t//let data = JSON.parse(e.Data);\r\n\t\t\t\t//this.treat.Attachments = data.idstr;\r\n\t\t\t\tlet idstr = [];\r\n\t\t\t\tfor(var i = 0;i < fileList.length;i++){\r\n\t\t\t\t\tlet item = fileList[i].response.Data;\r\n\t\t\t\t\tidstr.push(item.idstr);\r\n\t\t\t\t}\r\n\t\t\t\tthis.treat.Attachments = idstr.join(\"|\")\r\n\t\t\t},\r\n\t\t\tremoveFeeItem(item){\r\n\t\t\t\tthis.fee.FeeItems.remove(item);\r\n\t\t\t},\r\n\t\t\t// 开收费单\r\n\t\t\tviewFee(item){\r\n\t\t\t\tthis.selectCustomer = item;\r\n\t\t\t\tthis.fee = {\r\n\t\t\t\t\tFeeItems:[{\r\n\t\t\t\t\t\tItemName:\"\",\r\n\t\t\t\t\t\tItemAmount:\"\",\r\n\t\t\t\t\t\tShowOrder:0\r\n\t\t\t\t\t}],\r\n\t\t\t\t}\r\n\t\t\t\tthis.view.fee = true;\r\n\t\t\t},\r\n\t\t\t// 开方\r\n\t\t\tviewTreatment(item){\r\n\t\t\t\tthis.treat = {\r\n\t\t\t\t\tAppointmentGuid:\"\",\r\n\t\t\t\t\tDiagnosisDesc:\"\",\r\n\t\t\t\t\tAttachments:\"\",\r\n\t\t\t\t}\r\n\t\t\t\tthis.selectCustomer = item;\r\n\t\t\t\tthis.view.treatment = true;\r\n\t\t\t},\r\n\t\t\t// 开方详情\r\n\t\t\tviewDetails(item) {\r\n\t\t\t\tthis.selectCustomer = item;\r\n\t\t\t\tthis.view.prescription=true\r\n\t\t\t},\r\n\t\t\taddFeeItem(){\r\n\t\t\t\tthis.fee.FeeItems.push({ItemName:\"\",ItemAmount:\"\",ShowOrder:this.fee.FeeItems.length-1});\r\n\t\t\t},\r\n\t\t\t// 查看收费单\r\n\t\t\tgetOrderContent(data){\r\n\t\t\t\t// console.log(data);\r\n\t\t\t\tthis.feeIsEdit = true;\r\n\t\t\t\tthis.selectCustomer = data;\r\n\t\t\t\tthis.queryOrder(data.AppointmentGuid);\r\n\t\t\t\tthis.view.order = true;\t\r\n\t\t\t\t// this.orderData = {} // 优化渲染效果\t\r\n\t\t\t},\r\n\t\t\t//更新支付状态\r\n\t\t\tasync updateFeeStatus(){\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tFeeOrderGuid:this.selectCustomer.FeeOrderGuid,\r\n\t\t\t\t\tPayStatus:this.selectCustomer.PayStatus == 0?1:0,\r\n\t\t\t\t}\r\n\t\t\t\tlet res = await this.$api.post(\"/Medical/UpdatePaymentStatus\",params);\r\n\t\t\t\tif(!res.IsPositive){\r\n\t\t\t\t\tthis.$tips.warning(\"更新数据异常\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$tips.success(\"更新成功\");\r\n\t\t\t\tthis.view.payStatus = false;\r\n\t\t\t\tthis.selectCustomer.PayStatus = params.PayStatus;\r\n\t\t\t},\r\n\t\t\t//更新收费单\r\n\t\t\tasync updateFeeOrder(){\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tFeeOrderGuid:this.orderData.FeeOrderGuid,\r\n\t\t\t\t\tAppointmentGuid:this.selectCustomer.AppointmentGuid,\r\n\t\t\t\t\tAttachments:this.orderData.Attachment,\r\n\t\t\t\t\tFeeItems:JSON.stringify(this.orderData.FeeItems),\r\n\t\t\t\t}\r\n\t\t\t\tlet res = await this.$api.post(\"/FinanceManage/UpdateFeeOrder\",params)\r\n\t\t\t\tif(!res.IsPositive){\r\n\t\t\t\t\tthis.$tips.warning(\"更新数据异常\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$tips.success(\"更新成功\");\r\n\t\t\t\tthis.view.order = false;\r\n\t\t\t\tthis.queryData();\r\n\t\t\t},\r\n\t\t\t//创建收费单\r\n\t\t\tasync createFeeOrder(){\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tFeeItems:JSON.stringify(this.fee.FeeItems),\r\n\t\t\t\t\tAppointmentGuid:this.selectCustomer.AppointmentGuid,\r\n\t\t\t\t\tAttachment: this.fee.Attachments\r\n\t\t\t\t};\r\n\t\t\t\tlet res = await this.$api.post(\"/FinanceManage/CreateFeeOrder\",params);\r\n\t\t\t\tif (!res.IsPositive){\r\n\t\t\t\t\tthis.$tips.warning(\"保存数据异常\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$tips.success(\"保存成功\");\r\n\t\t\t\tthis.view.order = false;\r\n\t\t\t\tthis.queryData();\r\n\t\t\t},\r\n\t\t\t// 开方\r\n\t\t\tasync createPrescription(){\r\n\t\t\t\tlet params = this.treat;\r\n\t\t\t\tparams.AppointmentGuid = this.selectCustomer.AppointmentGuid;\r\n\t\t\t\tlet res = await this.$api.post(\"/Medical/CreatePrescription\",params);\r\n\t\t\t\tif (!res.IsPositive) {\r\n\t\t\t\t\tthis.$tips.warning(\"保存数据异常\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.view.treatment = false;\r\n\t\t\t\tthis.queryData()\r\n\t\t\t},\r\n\t\t\t// 查询收费详情\r\n\t\t\tasync queryOrder(apId){\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tAppointmentGuid:apId,\r\n\t\t\t\t}\r\n\t\t\t\tlet res = await this.$api.get(\"/FinanceManage/GetFeeOrderDetail\",params)\r\n\t\t\t\tif (!res.IsPositive) {\r\n\t\t\t\t\tthis.$tips.warning(\"查询数据异常\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.orderData = res.Data;\r\n\t\t\t\t// console.log(res);\r\n\t\t\t},\r\n\t\t\tasync queryData(){\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tkeyword: this.keyword,\r\n\t\t\t\t\tpage: this.pages.page,\r\n\t\t\t\t\tPageSize: this.pages.size,\r\n\t\t\t\t};\r\n\t\t\t\tthis.$loading();\r\n\t\t\t\tlet res = await this.$api.get(\"/Medical/QueryMedicalVisit\", params)\r\n\t\t\t\tthis.$loading().close();\r\n\t\t\t\tif (!res.IsPositive) {\r\n\t\t\t\t\tthis.$tips.warning(\"查询数据异常\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.customers = res.Data.DataList;\r\n\t\t\t\tthis.pages.total = res.Data.TotalCount;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.view.tableHeight = window.innerHeight/100 * 70;\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.queryData()\r\n\t\t}\r\n\t\t\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.i-setting:hover {\r\n\tcolor: #409EFF;\r\n\tcursor: pointer;\r\n}\r\n.audioItem {\r\n\t.el-select {\r\n\t\tmargin-left: 10px;\r\n\t}\r\n\t.block {\r\n\t\tdisplay: flex;\r\n\t\tspan {\r\n\t\t\tline-height: 40px;\r\n\t\t}\r\n\t}\r\n\t.el-slider {\r\n\t\twidth: 250px;\r\n\t\tmargin-left: 10px;\r\n\t}\r\n}\r\n\r\n.vidioItem {\r\n\t.el-select {\r\n\t\tmargin-left: 10px;\r\n\t}\r\n\t\r\n}\r\n</style>\r\n"]}]}