{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GaeaProject\\jpn_medical_web\\pages\\common\\room.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\pages\\common\\room.vue","mtime":1596526245171},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB2aWRlb0VsZW1lbnQgZnJvbSAnQC9wYWdlcy9jb21tb24vdmlkZW9FbGVtZW50LnZ1ZScKaW1wb3J0IE5vdGljZVNESyBmcm9tICdAL3V0aWxzL25vdGljZVNESy9pbmRleC5qcycKaW1wb3J0IFJ0Y1NESyBmcm9tICdAL3V0aWxzL3J0Y1NESy9ydGMuanMnCmltcG9ydCBjb25mIGZyb20gJ0AvY29uZi9jb25mLmpzJwppbXBvcnQge21ha2VHdWlkfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvbWFrZUd1aWQuanMnOwppbXBvcnQge21hcFN0YXRlLG1hcE11dGF0aW9uc30gZnJvbSAndnVleCcKaW1wb3J0IG5vdGljZSBmcm9tICdAL3V0aWxzL21peGlucy9ub3RpY2UuanMnCgpleHBvcnQgZGVmYXVsdCB7Cgljb21wdXRlZDogewoJCS4uLm1hcFN0YXRlKFsidUluZm8iXSksCgkJLi4ubWFwU3RhdGUoWyJub3RpY2VSb29tIl0pLAoJfSwKCW1peGluczpbbm90aWNlXSwKCWNvbXBvbmVudHM6ewoJCXZpZGVvRWxlbWVudAoJfSwKCWRhdGEoKXsKCQlyZXR1cm4gewoJCQl1c2VyU3RyZWFtczp7fSwKCQkJdXNlclJ0Y3M6e30sCgkJCXRva2Vuczp7fSwKCQkJbG9jYWxTdHJlYW06bnVsbCwKCQkJbWVkaWFTdHJlYW1UcmFjazpudWxsLAoJCX0KCX0sCgltZXRob2RzOnsKCQljaGVja01lZGlhKCl7CgkJCXJldHVybiB7CgkJCQltZWRpYURldmljZXM6bmF2aWdhdG9yICE9IHVuZGVmaW5lZCAmJiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzICE9IHVuZGVmaW5lZCwKCQkJfQoJCX0sCgkJYXN5bmMgY3JlYXRlVmlkZW8oaW5mbyl7CQkJCgkJCWxldCBzdHJlYW0gPSBhd2FpdCB0aGlzLmNyZWF0ZUxvY2FsU3RlYW0oKTsKCQkJaWYoc3RyZWFtKXsKCQkJCXRoaXMubWVkaWFTdHJlYW1UcmFjaz0gdHlwZW9mIHN0cmVhbS5zdG9wPT09J2Z1bmN0aW9uJz9zdHJlYW06c3RyZWFtLmdldFRyYWNrcygpWzBdOwoJCQkJdGhpcy5sb2NhbFN0cmVhbSA9IHN0cmVhbTsKCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2NhbFN0cmVhbScpLmlubmVySFRNTCA9ICIiOwoJCQkJY29uc3QgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpOwoJCQkJdmlkZW8ud2lkdGggPSAzMDA7CgkJCQl2aWRlby5oZWlnaHQgPSAzMDA7CgkJCQl2aWRlby5hdXRvcGxheSA9IHRydWU7CgkJCQl2aWRlby5wbGF5c2lubGluZSA9IGZhbHNlOwoJCQkJdmlkZW8uY29udHJvbHMgPSBmYWxzZTsKCQkJCXZpZGVvLm11dGVkID0gIm11dGVkIjsKCQkJCXZpZGVvLnNyY09iamVjdCA9IHRoaXMubG9jYWxTdHJlYW07CgkJCQlsZXQgcGFyZW50RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsb2NhbFN0cmVhbSIpOwoJCQkJcGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh2aWRlbyk7CgkJCX0KCQkJaWYoaW5mbykKCQkJCXRoaXMuJGV2ZW4uJGVtaXQoInVzZXJfdmlkZW9fcmVhZHkiLGluZm8pCgkJfSwKCQlhc3luYyBjcmVhdGVMb2NhbFN0ZWFtKGluZm8pIHsKCQkJaWYgKCF0aGlzLmNoZWNrTWVkaWEoKS5tZWRpYURldmljZXMpIHsKCQkJCXRoaXMuJHRpcHMud2Fybigi5oKo55qE6K6+5aSH5LiN5pSv5oyB5aqS5L2T5bGe5oCnLOivt+WFiOaOpeWFpeehrOS7tuiuvuWkhyEiKQoJCQkJcmV0dXJuCgkJCX0KCQkJdHJ5ewoJCQkJcmV0dXJuIGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsKCQkJCQlhdWRpbzogdHJ1ZSwKCQkJCQl2aWRlbzogewoJCQkJCQl3aWR0aDogewoJCQkJCQkJaWRlYWw6IDEwODAKCQkJCQkJfSwKCQkJCQkJaGVpZ2h0OiB7CgkJCQkJCQlpZGVhbDogNzIwCgkJCQkJCX0KCQkJCQl9CgkJCQl9KTsKCQkJfWNhdGNoKGUpewoJCQkJcmV0dXJuIG51bGw7CgkJCX0KCQl9LAoJCWFzeW5jIGNyZWF0ZVJ0Y1NlbmRlcih1aWQsIHR5cGUscmVhZHkpIHsKCQkJbGV0IHRoYXQgPSB0aGlzOwoJCQlsZXQgcnRjID0gbmV3IFJ0Y1NESyh7CgkJCQlzZXJ2ZTogInN0dW46c3R1bi5zdHVucHJvdG9jb2wub3JnOjM0NzgiLAoJCQkJcmVhZHk6cmVhZHksCgkJCQlqb2luKHN0cmVhbSl7CgkJCQkJY29uc29sZS5sb2coIm9uIHN0cmVhbSBqb2luOiIsc3RyZWFtKQoJCQkJCXRoYXQuJHNldCh0aGF0LnVzZXJTdHJlYW1zLCB1aWQsIHN0cmVhbS5zdHJlYW0pCgkJCQl9LAoJCQl9KTsKCQkJcnRjLmRpc2Nvbm5lY3RlZD0gYXN5bmMgKCk9PnsKCQkJCWxldCBvZmZlciA9IGF3YWl0IHJ0Yy5jcmVhdGVPZmZlcih7CgkJCQkJb2ZmZXJUb1JlY2VpdmVWaWRlbzogdHJ1ZSwKCQkJCQlvZmZlclRvUmVjZWl2ZUF1ZGlvOiB0cnVlCgkJCQl9KTsKCQkJCWxldCBzZW5kTXNnID0gewoJCQkJCXR5cGU6J3B1c2gnLAoJCQkJCWpzZXA6b2ZmZXIsCgkJCQl9CgkJCQl0aGF0Lm5vdGljZVJvb20uc2VuZCh1aWQsIHNlbmRNc2cpOwoJCQl9CgkJCXJ0Yy5hZGRTdGVhbSh0aGlzLmxvY2FsU3RyZWFtKTsKCQkJdGhpcy5zZXRVc2VyUnRjcyhydGMsIHVpZCwgdHlwZSk7CgkJCXJldHVybiBhd2FpdCBydGMuY3JlYXRlT2ZmZXIoewoJCQkJb2ZmZXJUb1JlY2VpdmVWaWRlbzogdHJ1ZSwKCQkJCW9mZmVyVG9SZWNlaXZlQXVkaW86IHRydWUKCQkJfSk7CgkJfSwKCQlzZXRVc2VyUnRjcyhydGMsdWlkLHR5cGUpewoJCQlpZighdGhpcy51c2VyUnRjc1t1aWRdKXsKCQkJCXRoaXMudXNlclJ0Y3NbdWlkXSA9IG5ldyBPYmplY3QoKTsKCQkJfQoJCQl0aGlzLnVzZXJSdGNzW3VpZF1bdHlwZV0gPSBydGM7CQoJCX0sCgkJY3JlYXRlUm9vbShpbmZvLHBhcil7CgkJCXRoaXMuaW5pdFJvb20oaW5mbyxwYXIpOwoJCX0sCgkJYXN5bmMgY3JlYXRlUnRjUmV2aWNlKHVpZCx0eXBlLHJlYWR5KXsKCQkJbGV0IHRoYXQgPSB0aGlzOwoJCQlsZXQgcnRjID0gbnVsbDsKCQkJaWYodGhpcy51c2VyUnRjc1t1aWRdICYmIHRoaXMudXNlclJ0Y3NbdWlkXVt0eXBlXSl7CgkJCQlydGMgPSB0aGlzLnVzZXJSdGNzW3VpZF1bdHlwZV07CgkJCX1lbHNlewoJCQkJcnRjID0gbmV3IFJ0Y1NESyh7CgkJCQkJc2VydmU6InN0dW46c3R1bi5zdHVucHJvdG9jb2wub3JnOjM0NzgiLAoJCQkJCXJlYWR5OnJlYWR5LAoJCQkJCWpvaW4oc3RyZWFtKXsKCQkJCQkJdGhhdC4kc2V0KHRoYXQudXNlclN0cmVhbXMsdWlkLHN0cmVhbS5zdHJlYW0pCgkJCQkJfSwKCQkJCX0pOwoJCQl9CgkJCQoJCQkvL3J0Yy5zb2N1cmUuYWRkVHJhbnNjZWl2ZXIoJ2F1ZGlvJywgeyAnZGlyZWN0aW9uJzogJ3JlY3Zvbmx5JyB9KTsKCQkJLy9ydGMuc29jdXJlLmFkZFRyYW5zY2VpdmVyKCd2aWRlbycsIHsgJ2RpcmVjdGlvbic6ICdyZWN2b25seScgfSk7CgkJCS8vcnRjLnNlbmRPZmZlciA9IGZhbHNlOwoJCQlydGMuYWRkU3RlYW0odGhpcy5sb2NhbFN0cmVhbSk7CQkJCgkJCWlmKCF0aGlzLnVzZXJSdGNzW3VpZF0gfHwgIXRoaXMudXNlclJ0Y3NbdWlkXVt0eXBlXSl7CgkJCQl0aGlzLnNldFVzZXJSdGNzKHJ0Yyx1aWQsdHlwZSk7CgkJCX0KCQkJcmV0dXJuIGF3YWl0IHJ0YzsKCQkJLy9yZXR1cm4gYXdhaXQgcnRjLmNyZWF0ZU9mZmVyKHsgb2ZmZXJUb1JlY2VpdmVWaWRlbzogdHJ1ZSwgb2ZmZXJUb1JlY2VpdmVBdWRpbzogdHJ1ZSB9KTsKCQl9LAoJCWV2ZW5zKCl7CgkJCWxldCBzZWxmID0gdGhpczsKCQkJLy90aGlzLmNyZWF0ZVZpZGVvKCk7CgkJCXRoaXMuJGV2ZW4uJG9uKCJ1c2VyX2xpdmVfbGVhdmUiLChpbmZvKT0+ewoJCQkJY29uc29sZS5sb2codGhpcy5tZWRpYVN0cmVhbVRyYWNrKQoJCQkJdGhpcy5tZWRpYVN0cmVhbVRyYWNrICYmIHRoaXMubWVkaWFTdHJlYW1UcmFjay5zdG9wKCk7CgkJCQl0aGlzLm1lZGlhU3RyZWFtVHJhY2sgPSBudWxsOwoJCQkJdGhpcy5sb2NhbFN0cmVhbS5nZXRUcmFja3MoKVswXS5zdG9wKCk7CgkJCQl0aGlzLmxvY2FsU3RyZWFtLmdldFRyYWNrcygpWzFdLnN0b3AoKTsKCQkJCXRoaXMubG9jYWxTdHJlYW0gPSBudWxsOwoJCQl9KQoJCQl0aGlzLiRldmVuLiRvbigidXNlcl9saXZlX2xhdW5jaCIsKGluZm8pPT57CgkJCQl0aGlzLmNyZWF0ZVZpZGVvKGluZm8pOwoJCQl9KQoJCQkvL+W9k+WJjeeUqOaIt+S4u+WKqOmAgOWHugoJCQl0aGlzLiRldmVuLiRvbigidXNlcl9saXZlX2xlYXZlIiwoaW5mbyk9PnsKCQkJCXRoaXMudXNlclJ0Y3MgPSB7fTsKCQkJCWxldCBib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdqcy12aWRlb2JveCcpWzBdOwoJCQkJYm94LmlubmVySFRNTCA9ICIiOwoJCQkJdGhpcy51c2VyU3RyZWFtcyA9IHt9OwoJCQl9KQoJCQkvL+W9k+WvueaWuemAieaLqeS7peinhumikeaWueW8j+aOpemAmuaXtgoJCQl0aGlzLiRldmVuLiRvbigibm90aWNlX2xpdmVfY29ubmVjdGFsbCIsKGluZm8pPT57CgkJCQkvL+W9k+WJjeeUqOaIt+W3suWcqOaIv+mXtAoJCQkJaWYodGhpcy5ub3RpY2VSb29tJiZ0aGlzLm5vdGljZVJvb20uaW5mbyAhPSB1bmRlZmluZWQpewoJCQkJCXZhciBtc2cgPSB7CgkJCQkJCXRvOiBpbmZvLkZyb20uR3VpZCwKCQkJCQkJaW5mbzogewoJCQkJCQkJUGxhdGU6IHRoaXMubm90aWNlUm9vbS5pbmZvLnBsYXRlLAoJCQkJCQkJQ29kZTogdGhpcy5ub3RpY2VSb29tLmluZm8uY29kZSwKCQkJCQkJCVZpZGVvVHlwZTogIGluZm8uRGF0YS5NZXNzYWdlLkFuc3dlcgoJCQkJCQl9LAoJCQkJCQl0eXBlOiAnJwoJCQkJCX07CgkJCQkJCgkJCQkJdGhpcy5ub3RpY2VFeC5zZW5kKG1zZy50bywgbXNnLmluZm8pOwoJCQkJfSBlbHNlIHsKCQkJCQkvL+W9k+WJjeeUqOaIt+S4jeWcqOaIv+mXtAoJCQkJCXRoaXMuY3JlYXRlUm9vbShpbmZvKQoJCQkJfQoJCQl9KTsKCQkJLy/lvZPmiL/pl7Tlt7Llu7rnq4sKCQkJdGhpcy4kZXZlbi4kb24oInVzZXJfcm9vbV9jcmVhdGUiLChpbmZvLG5vdGljZSk9PnsKCQkJCXZhciBtc2cgPSB7CgkJCQkJdG86IGluZm8uRnJvbS5HdWlkLAoJCQkJCWluZm86IHsKCQkJCQkJUGxhdGU6IG5vdGljZS5pbmZvLnBsYXRlLAoJCQkJCQlDb2RlOiBub3RpY2UuaW5mby5jb2RlLAoJCQkJCQlWaWRlb1R5cGU6IGluZm8uRGF0YS5NZXNzYWdlLkFuc3dlciwKCQkJCQl9LAoJCQkJCXR5cGU6ICcnCgkJCQl9OwkKCQkJCXRoaXMubm90aWNlRXguc2VuZChtc2cudG8sIG1zZy5pbmZvKTsKCQkJfSk7CgkJCS8v5pS25Yiw5Yib5bu65oi/6Ze05oyH5LukCgkJCXRoaXMuJGV2ZW4uJG9uKCJub3RpY2Vfcm9vbV9idWlsZCIsKGluZm8pPT57CgkJCQl0aGlzLmNyZWF0ZVJvb20oaW5mbyx7cGxhdGU6aW5mby5EYXRhLk1lc3NhZ2UuUGxhdGV9KQoJCQl9KTsKCQkJLy/mlLbliLDliqDlhaXmiL/pl7TmjIfku6QKCQkJdGhpcy4kZXZlbi4kb24oIm5vdGljZV9yb29tX2pvaW4iLChpbmZvKT0+ewoJCQkJbGV0IHJlYWR5ID0gKHRva2VuKSA9PiB7CgkJCQkJbGV0IHJ0YyA9IHNlbGYudXNlclJ0Y3NbaW5mby5EYXRhLkFjY2VwdC5HdWlkXS5kZXNrOwoJCQkJCWxldCBzZW5kTXNnID0gewoJCQkJCQl0eXBlOid0b2tlbicsCgkJCQkJCXRva2VuOnRva2VuLAoJCQkJCX0KCQkJCQkvL+ajgOafpeaYr+WQpuWtmOWcqOetieW+heaOpeaUtueahHRva2VuCgkJCQkJaWYodGhpcy50b2tlbnNbaW5mby5Gcm9tLkd1aWRdKXsKCQkJCQkJcnRjLmFkZEljZUNhbmRpZGF0ZSh0aGlzLnRva2Vuc1tpbmZvLkZyb20uR3VpZF0pOwoJCQkJCQlkZWxldGUgdGhpcy50b2tlbnNbaW5mby5Gcm9tLkd1aWRdOwoJCQkJCX0KCQkJCQlzZWxmLm5vdGljZVJvb20uc2VuZChpbmZvLkRhdGEuQWNjZXB0Lkd1aWQsIHNlbmRNc2cpOwoJCQkJfQoJCQkJdHJ5ewoJCQkJdGhpcy5jcmVhdGVSdGNTZW5kZXIoaW5mby5EYXRhLkFjY2VwdC5HdWlkLCdkZXNrJyxyZWFkeSkudGhlbigob2ZmZXIpPT57CgkJCQkJbGV0IHNlbmRNc2cgPSB7CgkJCQkJCXR5cGU6J3B1c2gnLAoJCQkJCQlqc2VwOm9mZmVyLAoJCQkJCX0KCQkJCQlzZWxmLm5vdGljZVJvb20uc2VuZChpbmZvLkRhdGEuQWNjZXB0Lkd1aWQsIHNlbmRNc2cpOwoJCQkJfSkKCQkJCX1jYXRjaChlKXsKCQkJCQljb25zb2xlLmxvZyhlKQoJCQkJfQoJCQl9KTsKCQkJLy/kupLmjaJ0b2tlbuaMh+S7pAoJCQl0aGlzLiRldmVuLiRvbigibm90aWNlX2NoYW5uZWxfdG9rZW4iLChpbmZvKT0+ewoJCQkJbGV0IHJlYyA9IGluZm8uRGF0YS5NZXNzYWdlOwoJCQkJLy/lvZPov5nmnaHmtojmga/mjqXlj5fml7bvvIzmnInlj6/og73mnKzlnLDlupTnrZTkv6Hku6Tov5jmnKrliJvlu7rlrozmiJAKCQkJCWlmKHRoaXMudXNlclJ0Y3NbaW5mby5Gcm9tLkd1aWRdKXsKCQkJCQlsZXQgcnRjID0gdGhpcy51c2VyUnRjc1tpbmZvLkZyb20uR3VpZF0uZGVzazsKCQkJCQlydGMuYWRkSWNlQ2FuZGlkYXRlKHJlYy50b2tlbik7CgkJCQl9ZWxzZXsKCQkJCQkvL+aaguWtmAoJCQkJCXRoaXMudG9rZW5zW2luZm8uRnJvbS5HdWlkXSA9IHJlYy50b2tlbjsKCQkJCX0KCQkJfSk7CgkJCS8v5pS25Yiw6YCA5Ye65oi/6Ze05oyH5LukCgkJCXRoaXMuJGV2ZW4uJG9uKCJub3RpY2Vfcm9vbV9sZWF2ZSIsKGluZm8pPT57CgkJCQl0aGlzLiRub3RpZnkoewoJCQkJCXRpdGxlOiAn5o+Q56S6JywKCQkJCQltZXNzYWdlOiBpbmZvLkRhdGEuQWNjZXB0Lk5hbWUgKyAn6YCA5Ye66KeG6aKR77yBJywKCQkJCX0pOwoJCQkJbGV0IHJ0YyA9IHRoaXMudXNlclJ0Y3NbaW5mby5EYXRhLkFjY2VwdC5HdWlkXS5kZXNrOwoJCQkJcnRjLnNvY3VyZS5jbG9zZSgpOwoJCQkJZGVsZXRlIHRoaXMudXNlclJ0Y3NbaW5mby5EYXRhLkFjY2VwdC5HdWlkXTsKCQkJCXZhciByZW1vdmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpbmZvLkRhdGEuQWNjZXB0Lkd1aWQpOwoJCQkJcmVtb3ZlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocmVtb3ZlKTsKCQkJCWRlbGV0ZSB0aGlzLnVzZXJTdHJlYW1zW2luZm8uRGF0YS5BY2NlcHQuR3VpZF0KCQkJfSk7CgkJCS8v5b2T5pS25YiwcHVzaOa2iOaBrwoJCQl0aGlzLiRldmVuLiRvbigibm90aWNlX2NoYW5uZWxfcHVzaCIsKGluZm8pPT57CgkJCQlsZXQgcmVjID0gaW5mby5EYXRhLk1lc3NhZ2U7CgkJCQlsZXQgcmVhZHkgPSAodG9rZW4pID0+IHsKCQkJCQlsZXQgcnRjID0gc2VsZi51c2VyUnRjc1tpbmZvLkZyb20uR3VpZF0uZGVzazsKCQkJCQlsZXQgc2VuZE1zZyA9IHsKCQkJCQkJCXR5cGU6J3Rva2VuJywKCQkJCQkJCXRva2VuOnRva2VuCgkJCQkJCX0KCQkJCQkvL+ajgOafpeaYr+WQpuWtmOWcqOetieW+heaOpeaUtueahHRva2VuCgkJCQkJaWYodGhpcy50b2tlbnNbaW5mby5Gcm9tLkd1aWRdKXsKCQkJCQkJcnRjLmFkZEljZUNhbmRpZGF0ZSh0aGlzLnRva2Vuc1tpbmZvLkZyb20uR3VpZF0pOwoJCQkJCQlkZWxldGUgdGhpcy50b2tlbnNbaW5mby5Gcm9tLkd1aWRdOwoJCQkJCX0KCQkJCQl0aGlzLm5vdGljZVJvb20uc2VuZChpbmZvLkZyb20uR3VpZCwgc2VuZE1zZyk7CgkJCQl9CgkJCQl0cnl7CgkJCQl0aGlzLmNyZWF0ZVJ0Y1JldmljZShpbmZvLkZyb20uR3VpZCwnZGVzaycscmVhZHkpLnRoZW4oKHJ0Yyk9PnsKCQkJCQlydGMuY3JlYXRlQW5zd2VyKHJlYy5qc2VwKS50aGVuKChhbnN3ZXIpPT57CgkJCQkJCWxldCBzZW5kTXNnID0gewoJCQkJCQkJCXR5cGU6J3N1YnNjcmliZScsCgkJCQkJCQkJanNlcDphbnN3ZXIsCgkJCQkJCQl9CgkJCQkJCXRoaXMubm90aWNlUm9vbS5zZW5kKGluZm8uRnJvbS5HdWlkLCBzZW5kTXNnKTsKCQkJCQl9KQoJCQkJfSkKCQkJCX1jYXRjaChlKXsKCQkJCQljb25zb2xlLmxvZyhlKQoJCQkJfQoJCQl9KTsKCQkJLy/lvZPmlLbliLDorqLpmIXmtojmga8KCQkJdGhpcy4kZXZlbi4kb24oIm5vdGljZV9jaGFubmVsX3N1YnNjcmliZSIsKGluZm8pPT57CgkJCQlsZXQgcmVjID0gaW5mby5EYXRhLk1lc3NhZ2U7CgkJCQlsZXQgcnRjID0gdGhpcy51c2VyUnRjc1tpbmZvLkZyb20uR3VpZF0uZGVzazsKCQkJCXJ0Yy5zZXRSZW1vdGUocmVjLmpzZXApCgkJCX0pOwoJCX0KCX0sCgltb3VudGVkKCl7CgkJdGhpcy5ldmVucygpOwoJfQp9Cg=="},{"version":3,"sources":["room.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"room.vue","sourceRoot":"pages/common","sourcesContent":["<template>\r\n\t<el-row>\r\n\t\t<el-col :span=\"24\">\r\n\t\t\t<el-row>\r\n\t\t\t\t<el-col :span=\"8\">\r\n\t\t\t\t\t<el-card id=\"localStream\" style=\"display: inline-block;margin:10px\">\r\n\t\t\t\t\t</el-card>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"16\">\r\n\t\t\t\t\t<div class=\"js-videobox\">\r\n\t\t\t\t\t\t<videoElement v-for=\"(item,key,i) in userStreams\" :key=\"i\" :mid=\"key\" :stream=\"item\"></videoElement>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\t\t</el-col>\r\n\t</el-row>\n</template>\n\n<script>\r\n\timport videoElement from '@/pages/common/videoElement.vue'\r\n\timport NoticeSDK from '@/utils/noticeSDK/index.js'\r\n\timport RtcSDK from '@/utils/rtcSDK/rtc.js'\r\n\timport conf from '@/conf/conf.js'\r\n\timport {makeGuid} from '../../src/utils/makeGuid.js';\r\n\timport {mapState,mapMutations} from 'vuex'\r\n\timport notice from '@/utils/mixins/notice.js'\r\n\t\r\n\texport default {\r\n\t\tcomputed: {\r\n\t\t\t...mapState([\"uInfo\"]),\r\n\t\t\t...mapState([\"noticeRoom\"]),\r\n\t\t},\r\n\t\tmixins:[notice],\r\n\t\tcomponents:{\r\n\t\t\tvideoElement\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tuserStreams:{},\r\n\t\t\t\tuserRtcs:{},\r\n\t\t\t\ttokens:{},\r\n\t\t\t\tlocalStream:null,\r\n\t\t\t\tmediaStreamTrack:null,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tcheckMedia(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tmediaDevices:navigator != undefined && navigator.mediaDevices != undefined,\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync createVideo(info){\t\t\t\r\n\t\t\t\tlet stream = await this.createLocalSteam();\r\n\t\t\t\tif(stream){\r\n\t\t\t\t\tthis.mediaStreamTrack= typeof stream.stop==='function'?stream:stream.getTracks()[0];\r\n\t\t\t\t\tthis.localStream = stream;\r\n\t\t\t\t\tdocument.getElementById('localStream').innerHTML = \"\";\r\n\t\t\t\t\tconst video = document.createElement('video');\r\n\t\t\t\t\tvideo.width = 300;\r\n\t\t\t\t\tvideo.height = 300;\r\n\t\t\t\t\tvideo.autoplay = true;\r\n\t\t\t\t\tvideo.playsinline = false;\r\n\t\t\t\t\tvideo.controls = false;\r\n\t\t\t\t\tvideo.muted = \"muted\";\r\n\t\t\t\t\tvideo.srcObject = this.localStream;\r\n\t\t\t\t\tlet parentElement = document.getElementById(\"localStream\");\r\n\t\t\t\t\tparentElement.appendChild(video);\r\n\t\t\t\t}\r\n\t\t\t\tif(info)\r\n\t\t\t\t\tthis.$even.$emit(\"user_video_ready\",info)\r\n\t\t\t},\r\n\t\t\tasync createLocalSteam(info) {\r\n\t\t\t\tif (!this.checkMedia().mediaDevices) {\r\n\t\t\t\t\tthis.$tips.warn(\"您的设备不支持媒体属性,请先接入硬件设备!\")\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\ttry{\r\n\t\t\t\t\treturn await navigator.mediaDevices.getUserMedia({\r\n\t\t\t\t\t\taudio: true,\r\n\t\t\t\t\t\tvideo: {\r\n\t\t\t\t\t\t\twidth: {\r\n\t\t\t\t\t\t\t\tideal: 1080\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\theight: {\r\n\t\t\t\t\t\t\t\tideal: 720\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync createRtcSender(uid, type,ready) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet rtc = new RtcSDK({\r\n\t\t\t\t\tserve: \"stun:stun.stunprotocol.org:3478\",\r\n\t\t\t\t\tready:ready,\r\n\t\t\t\t\tjoin(stream){\r\n\t\t\t\t\t\tconsole.log(\"on stream join:\",stream)\r\n\t\t\t\t\t\tthat.$set(that.userStreams, uid, stream.stream)\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\trtc.disconnected= async ()=>{\r\n\t\t\t\t\tlet offer = await rtc.createOffer({\r\n\t\t\t\t\t\tofferToReceiveVideo: true,\r\n\t\t\t\t\t\tofferToReceiveAudio: true\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\ttype:'push',\r\n\t\t\t\t\t\tjsep:offer,\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.noticeRoom.send(uid, sendMsg);\r\n\t\t\t\t}\r\n\t\t\t\trtc.addSteam(this.localStream);\r\n\t\t\t\tthis.setUserRtcs(rtc, uid, type);\r\n\t\t\t\treturn await rtc.createOffer({\r\n\t\t\t\t\tofferToReceiveVideo: true,\r\n\t\t\t\t\tofferToReceiveAudio: true\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsetUserRtcs(rtc,uid,type){\r\n\t\t\t\tif(!this.userRtcs[uid]){\r\n\t\t\t\t\tthis.userRtcs[uid] = new Object();\r\n\t\t\t\t}\r\n\t\t\t\tthis.userRtcs[uid][type] = rtc;\t\r\n\t\t\t},\r\n\t\t\tcreateRoom(info,par){\r\n\t\t\t\tthis.initRoom(info,par);\r\n\t\t\t},\r\n\t\t\tasync createRtcRevice(uid,type,ready){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet rtc = null;\r\n\t\t\t\tif(this.userRtcs[uid] && this.userRtcs[uid][type]){\r\n\t\t\t\t\trtc = this.userRtcs[uid][type];\r\n\t\t\t\t}else{\r\n\t\t\t\t\trtc = new RtcSDK({\r\n\t\t\t\t\t\tserve:\"stun:stun.stunprotocol.org:3478\",\r\n\t\t\t\t\t\tready:ready,\r\n\t\t\t\t\t\tjoin(stream){\r\n\t\t\t\t\t\t\tthat.$set(that.userStreams,uid,stream.stream)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//rtc.socure.addTransceiver('audio', { 'direction': 'recvonly' });\r\n\t\t\t\t//rtc.socure.addTransceiver('video', { 'direction': 'recvonly' });\r\n\t\t\t\t//rtc.sendOffer = false;\r\n\t\t\t\trtc.addSteam(this.localStream);\t\t\t\r\n\t\t\t\tif(!this.userRtcs[uid] || !this.userRtcs[uid][type]){\r\n\t\t\t\t\tthis.setUserRtcs(rtc,uid,type);\r\n\t\t\t\t}\r\n\t\t\t\treturn await rtc;\r\n\t\t\t\t//return await rtc.createOffer({ offerToReceiveVideo: true, offerToReceiveAudio: true });\r\n\t\t\t},\r\n\t\t\tevens(){\r\n\t\t\t\tlet self = this;\r\n\t\t\t\t//this.createVideo();\r\n\t\t\t\tthis.$even.$on(\"user_live_leave\",(info)=>{\r\n\t\t\t\t\tconsole.log(this.mediaStreamTrack)\r\n\t\t\t\t\tthis.mediaStreamTrack && this.mediaStreamTrack.stop();\r\n\t\t\t\t\tthis.mediaStreamTrack = null;\r\n\t\t\t\t\tthis.localStream.getTracks()[0].stop();\r\n\t\t\t\t\tthis.localStream.getTracks()[1].stop();\r\n\t\t\t\t\tthis.localStream = null;\r\n\t\t\t\t})\r\n\t\t\t\tthis.$even.$on(\"user_live_launch\",(info)=>{\r\n\t\t\t\t\tthis.createVideo(info);\r\n\t\t\t\t})\r\n\t\t\t\t//当前用户主动退出\r\n\t\t\t\tthis.$even.$on(\"user_live_leave\",(info)=>{\r\n\t\t\t\t\tthis.userRtcs = {};\r\n\t\t\t\t\tlet box = document.getElementsByClassName('js-videobox')[0];\r\n\t\t\t\t\tbox.innerHTML = \"\";\r\n\t\t\t\t\tthis.userStreams = {};\r\n\t\t\t\t})\r\n\t\t\t\t//当对方选择以视频方式接通时\r\n\t\t\t\tthis.$even.$on(\"notice_live_connectall\",(info)=>{\r\n\t\t\t\t\t//当前用户已在房间\r\n\t\t\t\t\tif(this.noticeRoom&&this.noticeRoom.info != undefined){\r\n\t\t\t\t\t\tvar msg = {\r\n\t\t\t\t\t\t\tto: info.From.Guid,\r\n\t\t\t\t\t\t\tinfo: {\r\n\t\t\t\t\t\t\t\tPlate: this.noticeRoom.info.plate,\r\n\t\t\t\t\t\t\t\tCode: this.noticeRoom.info.code,\r\n\t\t\t\t\t\t\t\tVideoType:  info.Data.Message.Answer\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttype: ''\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.noticeEx.send(msg.to, msg.info);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//当前用户不在房间\r\n\t\t\t\t\t\tthis.createRoom(info)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//当房间已建立\r\n\t\t\t\tthis.$even.$on(\"user_room_create\",(info,notice)=>{\r\n\t\t\t\t\tvar msg = {\r\n\t\t\t\t\t\tto: info.From.Guid,\r\n\t\t\t\t\t\tinfo: {\r\n\t\t\t\t\t\t\tPlate: notice.info.plate,\r\n\t\t\t\t\t\t\tCode: notice.info.code,\r\n\t\t\t\t\t\t\tVideoType: info.Data.Message.Answer,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttype: ''\r\n\t\t\t\t\t};\t\r\n\t\t\t\t\tthis.noticeEx.send(msg.to, msg.info);\r\n\t\t\t\t});\r\n\t\t\t\t//收到创建房间指令\r\n\t\t\t\tthis.$even.$on(\"notice_room_build\",(info)=>{\r\n\t\t\t\t\tthis.createRoom(info,{plate:info.Data.Message.Plate})\r\n\t\t\t\t});\r\n\t\t\t\t//收到加入房间指令\r\n\t\t\t\tthis.$even.$on(\"notice_room_join\",(info)=>{\r\n\t\t\t\t\tlet ready = (token) => {\r\n\t\t\t\t\t\tlet rtc = self.userRtcs[info.Data.Accept.Guid].desk;\r\n\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\ttype:'token',\r\n\t\t\t\t\t\t\ttoken:token,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//检查是否存在等待接收的token\r\n\t\t\t\t\t\tif(this.tokens[info.From.Guid]){\r\n\t\t\t\t\t\t\trtc.addIceCandidate(this.tokens[info.From.Guid]);\r\n\t\t\t\t\t\t\tdelete this.tokens[info.From.Guid];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.noticeRoom.send(info.Data.Accept.Guid, sendMsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\tthis.createRtcSender(info.Data.Accept.Guid,'desk',ready).then((offer)=>{\r\n\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\ttype:'push',\r\n\t\t\t\t\t\t\tjsep:offer,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.noticeRoom.send(info.Data.Accept.Guid, sendMsg);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//互换token指令\r\n\t\t\t\tthis.$even.$on(\"notice_channel_token\",(info)=>{\r\n\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\t//当这条消息接受时，有可能本地应答信令还未创建完成\r\n\t\t\t\t\tif(this.userRtcs[info.From.Guid]){\r\n\t\t\t\t\t\tlet rtc = this.userRtcs[info.From.Guid].desk;\r\n\t\t\t\t\t\trtc.addIceCandidate(rec.token);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//暂存\r\n\t\t\t\t\t\tthis.tokens[info.From.Guid] = rec.token;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//收到退出房间指令\r\n\t\t\t\tthis.$even.$on(\"notice_room_leave\",(info)=>{\r\n\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tmessage: info.Data.Accept.Name + '退出视频！',\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet rtc = this.userRtcs[info.Data.Accept.Guid].desk;\r\n\t\t\t\t\trtc.socure.close();\r\n\t\t\t\t\tdelete this.userRtcs[info.Data.Accept.Guid];\r\n\t\t\t\t\tvar remove = document.getElementById(info.Data.Accept.Guid);\r\n\t\t\t\t\tremove.parentNode.removeChild(remove);\r\n\t\t\t\t\tdelete this.userStreams[info.Data.Accept.Guid]\r\n\t\t\t\t});\r\n\t\t\t\t//当收到push消息\r\n\t\t\t\tthis.$even.$on(\"notice_channel_push\",(info)=>{\r\n\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\tlet ready = (token) => {\r\n\t\t\t\t\t\tlet rtc = self.userRtcs[info.From.Guid].desk;\r\n\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\t\ttype:'token',\r\n\t\t\t\t\t\t\t\ttoken:token\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//检查是否存在等待接收的token\r\n\t\t\t\t\t\tif(this.tokens[info.From.Guid]){\r\n\t\t\t\t\t\t\trtc.addIceCandidate(this.tokens[info.From.Guid]);\r\n\t\t\t\t\t\t\tdelete this.tokens[info.From.Guid];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.noticeRoom.send(info.From.Guid, sendMsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\tthis.createRtcRevice(info.From.Guid,'desk',ready).then((rtc)=>{\r\n\t\t\t\t\t\trtc.createAnswer(rec.jsep).then((answer)=>{\r\n\t\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\t\t\ttype:'subscribe',\r\n\t\t\t\t\t\t\t\t\tjsep:answer,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.noticeRoom.send(info.From.Guid, sendMsg);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//当收到订阅消息\r\n\t\t\t\tthis.$even.$on(\"notice_channel_subscribe\",(info)=>{\r\n\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\tlet rtc = this.userRtcs[info.From.Guid].desk;\r\n\t\t\t\t\trtc.setRemote(rec.jsep)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t\tthis.evens();\r\n\t\t}\r\n\t}\n</script>\n\n<style>\n</style>\n"]}]}