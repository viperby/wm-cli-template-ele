{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GaeaProject\\jpn_medical_web\\pages\\main\\appointment\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\pages\\main\\appointment\\index.vue","mtime":1594378932813},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgaGVhbHRoUmVjb3JkRGV0YWlsIGZyb20gIkAvcGFnZXMvbWFpbi9hcHBvaW50bWVudC9oZWFsdGhfcmVjb3JkX2RldGFpbC52dWUiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBoZWFsdGhSZWNvcmREZXRhaWwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc2VhcmNoOiAiIiwNCiAgICAgIGFsbERhdGE6IFtdLA0KICAgICAgc2VsZWN0SGVhbHRoUmVjb3JkOnt9LA0KICAgICAgc2Vla0FwcG9pbnRtZW50RGF0YTogeyBkYXRhOiBbXSwgdG90YWw6IDAgfSwNCiAgICAgIGdvSnBhQXBwb2ludG1lbnREYXRhOiB7IGRhdGE6IFtdLCB0b3RhbDogMCB9LA0KICAgICAgYWN0aXZlTmFtZTogIkV4YW1pbmUiLA0KICAgICAgZmVlQW1vdW50OiAiIiwNCiAgICAgIGhlYWx0aFJlY29yZER0bERpYWxvZzogZmFsc2UsDQogICAgICBjb25maXJtRGlhbG9nOiBmYWxzZSwNCiAgICAgIGN1cnJlbnRPYmo6IG51bGwsDQogICAgICBjb25maXJtT2JqOiB7DQogICAgICAgIEdhZWFPYmplY3RQcm9wZXJ0eTogMCwNCiAgICAgICAgQ29uZmlybVJlc3VsdDogbnVsbCwNCiAgICAgICAgRmVlQW1vdW50OiAiIiwNCiAgICAgICAgRmFpbFJlc3VsdDogIiINCiAgICAgIH0sDQogICAgICBydWxlczogew0KICAgICAgICBDb25maXJtUmVzdWx0OiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+mAieaLqemihOe6pue7k+aenCIsIHRyaWdnZXI6ICJjaGFuZ2UiIH0NCiAgICAgICAgXSwNCiAgICAgICAgLy8gRmVlQW1vdW50OiBbDQogICAgICAgIC8vICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpei0ueeUqOmHkeminSIsIHRyaWdnZXI6ICJibHVyIiB9DQogICAgICAgIC8vIF0sDQogICAgICAgIEZhaWxSZXN1bHQ6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+35aGr5YaZ5aSx6LSl5Y6f5ZugIiwgdHJpZ2dlcjogImJsdXIiIH0NCiAgICAgICAgXQ0KICAgICAgfQ0KICAgIH07DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgaXNSZWFkb25seSgpIHsNCiAgICAgIGlmICghdGhpcy5jdXJyZW50T2JqKSByZXR1cm4gZmFsc2U7DQogICAgICByZXR1cm4gKHRoaXMuY3VycmVudE9iai5HYWVhT2JqZWN0UHJvcGVydHkgJiA1MjQyODkpID4gMDsNCiAgICB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5xdWVyeURhdGEoKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGZvcm1hdFJlY2VwdChyb3csIGNvbHVtbiwgY2VsbFZhbHVlLCBpbmRleCkgew0KICAgICAgaWYgKChyb3cuR2FlYU9iamVjdFByb3BlcnR5ICYgMikgPT0gMikgcmV0dXJuICLmmK8iOw0KDQogICAgICByZXR1cm4gIuWQpiI7DQogICAgfSwNCiAgICBmb3JtYXRTdGF0dXMocm93KSB7DQogICAgICBsZXQgc3RhdHVzTmFtZSA9ICIiOw0KICAgICAgLy9UT0RPIOeKtuaAgeWAvOi9rOaNouW+heS8mOWMlg0KICAgICAgaWYgKChyb3cgJiA1MjQyODkpID09PSAwKSBzdGF0dXNOYW1lID0gIuW+heehruiupCI7DQogICAgICBpZiAoKHJvdyAmIDEpID4gMCkgc3RhdHVzTmFtZSA9ICLpooTnuqbmiJDlip8iOw0KICAgICAgaWYgKChyb3cgJiA1MjQyODgpID4gMCkgc3RhdHVzTmFtZSA9ICLpooTnuqblpLHotKUiOw0KICAgICAgaWYgKChyb3cgJiA4KT4wKSBzdGF0dXNOYW1lID0gIuW3suWPlua2iCI7DQoNCiAgICAgIHJldHVybiBzdGF0dXNOYW1lOw0KICAgIH0sDQogICAgLy/pgoDor7fop4bpn7PpopHpgJror50NCiAgICBpbnZpdGF0aW9uKGlkKSB7DQogICAgICB2YXIgbXNnID0gew0KICAgICAgICB0bzogaWQsDQogICAgICAgIGluZm86IHsNCiAgICAgICAgICBDcmVhdGVyOiAxDQogICAgICAgIH0sDQogICAgICAgIHR5cGU6ICIiDQogICAgICB9Ow0KICAgICAgdGhpcy4kZXZlbi4kZW1pdCgidXNlcl9saXZlX2xhdW5jaCIsIG1zZyk7DQogICAgICAvL3RoaXMubm90aWNlRXguc2VuZChtc2cudG8sbXNnLmluZm8pOw0KICAgIH0sDQogICAgb25TaG93SGVhbHRoUmVjb3JkRHRsRGlhbG9nKHJlY29yZCkgew0KICAgICAgdGhpcy5zZWxlY3RIZWFsdGhSZWNvcmQ9cmVjb3JkOw0KICAgICAgdGhpcy5oZWFsdGhSZWNvcmREdGxEaWFsb2cgPSB0cnVlOw0KICAgIH0sDQoNCiAgICBnZXRBcHBvaW50bWVudFJlc3VsdChnYWVhT2JqZWN0UHJvcGVydHkpIHsNCiAgICAgIGlmICgoZ2FlYU9iamVjdFByb3BlcnR5ICYgMSkgPiAwKSByZXR1cm4gdHJ1ZTsNCg0KICAgICAgaWYgKChnYWVhT2JqZWN0UHJvcGVydHkgJiA1MjQyODgpID4gMCkgcmV0dXJuIGZhbHNlOw0KDQogICAgICByZXR1cm4gbnVsbDsNCiAgICB9LA0KICAgIG9uQ29uZmlybVJlc3VsdENoYW5nZSh2KSB7DQogICAgICAvL3RoaXMucnVsZXMuRmVlQW1vdW50WzBdLnJlcXVpcmVkID0gdjsNCiAgICAgIHRoaXMucnVsZXMuRmFpbFJlc3VsdFswXS5yZXF1aXJlZCA9IHYgPT09IGZhbHNlOw0KDQogICAgICAvL3RoaXMuY29uZmlybU9iai5GZWVBbW91bnQgPSAiIjsNCiAgICAgIHRoaXMuY29uZmlybU9iai5GYWlsUmVzdWx0ID0gIiI7DQogICAgfSwNCiAgICBvblRhYkNsaWNrKHRhYikgew0KICAgICAgY29uc29sZS5sb2codGFiLm5hbWUpOw0KICAgIH0sDQogICAgb25SZXNldEZvcm0oKSB7DQogICAgICB0aGlzLmNvbmZpcm1PYmogPSB7DQogICAgICAgIEdhZWFPYmplY3RQcm9wZXJ0eTogMCwNCiAgICAgICAgQ29uZmlybVJlc3VsdDogbnVsbCwNCiAgICAgICAgRmVlQW1vdW50OiAiIiwNCiAgICAgICAgRmFpbFJlc3VsdDogIiINCiAgICAgIH07DQogICAgICBpZiAodGhpcy4kcmVmcy5jb25maXJtRm9ybSkgew0KICAgICAgICB0aGlzLiRyZWZzLmNvbmZpcm1Gb3JtLnJlc2V0RmllbGRzKCk7DQogICAgICB9DQogICAgfSwNCiAgICBvbkNvbmZpcm1DbGljayhpdGVtKSB7DQogICAgICB0aGlzLm9uUmVzZXRGb3JtKCk7DQogICAgICB0aGlzLmN1cnJlbnRPYmogPSBpdGVtOw0KDQogICAgICBjb25zdCB0ZW1wUmVjb3JkID0gSlNPTi5jbG9uZShpdGVtKTsNCiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jb25maXJtT2JqLCB0ZW1wUmVjb3JkKTsNCiAgICAgIHRoaXMuY29uZmlybU9iai5Db25maXJtVGFyZ2V0RGF0ZSA9IHRoaXMuY29uZmlybU9iai5BcHBvaW50bWVudERhdGU7DQoNCiAgICAgIHRoaXMuY29uZmlybU9iai5GZWVBbW91bnQgPQ0KICAgICAgICB0aGlzLmNvbmZpcm1PYmouRmVlQW1vdW50ID09PSAwID8gIiIgOiB0aGlzLmNvbmZpcm1PYmouRmVlQW1vdW50Ow0KDQogICAgICB0aGlzLmNvbmZpcm1PYmouQ29uZmlybVJlc3VsdCA9IHRoaXMuZ2V0QXBwb2ludG1lbnRSZXN1bHQoDQogICAgICAgIHRoaXMuY29uZmlybU9iai5HYWVhT2JqZWN0UHJvcGVydHkNCiAgICAgICk7DQogICAgICAvLy90aGlzLmNvbmZpcm1PYmouQ29uZmlybVJlc3VsdCA9IHRoaXMuYXBwb2ludG1lbnRSZXN1bHQNCiAgICAgIHRoaXMuY29uZmlybURpYWxvZyA9IHRydWU7DQogICAgfSwNCiAgICBvbkNhbmNlbENsaWNrKCkgew0KICAgICAgdGhpcy5jb25maXJtRGlhbG9nID0gZmFsc2U7DQogICAgfSwNCiAgICBvbk9rQ2xpY2soKSB7DQogICAgICBpZiAodGhpcy5jb25maXJtT2JqLkNvbmZpcm1SZXN1bHQpIHsNCiAgICAgICAgdGhpcy5jb25maXJtT2JqLkdhZWFPYmplY3RQcm9wZXJ0eSA9DQogICAgICAgICAgdGhpcy5jb25maXJtT2JqLkdhZWFPYmplY3RQcm9wZXJ0eSB8IDE7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmNvbmZpcm1PYmouR2FlYU9iamVjdFByb3BlcnR5ID0NCiAgICAgICAgICB0aGlzLmNvbmZpcm1PYmouR2FlYU9iamVjdFByb3BlcnR5IHwgNTI0Mjg4Ow0KDQogICAgICAgIC8vZGVsZXRlIHRoaXMuY29uZmlybU9iai5GZWVBbW91bnQ7DQogICAgICB9DQoNCiAgICAgIHRoaXMuc2F2ZUFwcG9pbnRtZW50Q29uZmlybSgpOw0KICAgICAgLy90aGlzLmNvbmZpcm1EaWFsb2cgPSBmYWxzZQ0KICAgIH0sDQogICAgcXVlcnlEYXRhKCkgew0KICAgICAgY29uc3QgX3RoaXM9dGhpczsNCiAgICAgICAgICB0aGlzLiRsb2FkaW5nKCk7DQogICAgICB0aGlzLiRhcGkuZ2V0KCIvTWVkaWNhbC9RdWVyeUFwcG9pbnRtZW50IikudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICB0aGlzLiRsb2FkaW5nKCkuY2xvc2UoKTsNCiAgICAgICAgICAgICAgaWYgKCFyZXMuSXNQb3NpdGl2ZSkgew0KICAgICAgICAgICAgICAgIF90aGlzLiR0aXBzLmVycm9yKCLmn6Xor6LmlbDmja7lvILluLgiKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgIH0NCiAgICAgICAgdGhpcy5hbGxEYXRhID0gcmVzLkRhdGEuRGF0YUxpc3Q7DQogICAgICAgIHRoaXMuc2Vla0FwcG9pbnRtZW50RGF0YS5kYXRhID0gcmVzLkRhdGEuRGF0YUxpc3QuZmlsdGVyKGl0ZW0gPT4gew0KICAgICAgICAgIHJldHVybiBpdGVtLkFwcG9pbnRtZW50VHlwZSA9PT0gIkV4YW1pbmUiOw0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy5nb0pwYUFwcG9pbnRtZW50RGF0YS5kYXRhID0gcmVzLkRhdGEuRGF0YUxpc3QuZmlsdGVyKGl0ZW0gPT4gew0KICAgICAgICAgIHJldHVybiBpdGVtLkFwcG9pbnRtZW50VHlwZSA9PT0gIkpvdXJuZXkiOw0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy5zZWVrQXBwb2ludG1lbnREYXRhLnRvdGFsID0gdGhpcy5zZWVrQXBwb2ludG1lbnREYXRhLmRhdGEubGVuZ3RoOw0KICAgICAgICB0aGlzLmdvSnBhQXBwb2ludG1lbnREYXRhLnRvdGFsID0gdGhpcy5nb0pwYUFwcG9pbnRtZW50RGF0YS5kYXRhLmxlbmd0aDsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgc2F2ZUFwcG9pbnRtZW50Q29uZmlybSgpIHsNCiAgICAgIGNvbnN0IF90aGlzID0gdGhpczsNCiAgICAgIHRoaXMuJHJlZnMuY29uZmlybUZvcm0udmFsaWRhdGUodmFsaWQgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICB0aGlzLiRsb2FkaW5nKCk7DQogICAgICAgICAgX3RoaXMuJGFwaQ0KICAgICAgICAgICAgLnBvc3QoIi9NZWRpY2FsL0NvbmZpcm1BcHBvaW50bWVudCIsIHRoaXMuY29uZmlybU9iaikNCiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgIHRoaXMuJGxvYWRpbmcoKS5jbG9zZSgpOw0KICAgICAgICAgICAgICBpZiAoIXJlcy5Jc1Bvc2l0aXZlKSB7DQogICAgICAgICAgICAgICAgX3RoaXMuJHRpcHMuZXJyb3IoIuS/neWtmOWksei0pSIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGxldCByZWNvcmQgPSBfdGhpcy5hbGxEYXRhLmZpbHRlcihpdGVtID0+IHsNCiAgICAgICAgICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICAgICAgICAgaXRlbS5BcHBvaW50bWVudEd1aWQgPT09IF90aGlzLmNvbmZpcm1PYmouQXBwb2ludG1lbnRHdWlkDQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIGlmIChyZWNvcmQubGVuZ3RoID09PSAwKSByZXR1cm47DQoNCiAgICAgICAgICAgICAgcmVjb3JkWzBdLkdhZWFPYmplY3RQcm9wZXJ0eSA9DQogICAgICAgICAgICAgICAgX3RoaXMuY29uZmlybU9iai5HYWVhT2JqZWN0UHJvcGVydHk7DQogICAgICAgICAgICAgIC8vcmVjb3JkWzBdLkZlZUFtb3VudCA9IF90aGlzLmNvbmZpcm1PYmouRmVlQW1vdW50Ow0KICAgICAgICAgICAgICByZWNvcmRbMF0uRmFpbFJlc3VsdCA9IF90aGlzLmNvbmZpcm1PYmouRmFpbFJlc3VsdDsNCg0KICAgICAgICAgICAgICAvLyBfdGhpcy5zZWVrQXBwb2ludG1lbnREYXRhID0gX3RoaXMuYWxsRGF0YS5maWx0ZXIoKGl0ZW0pID0+IHsNCiAgICAgICAgICAgICAgLy8gICByZXR1cm4gaXRlbS5BcHBvaW50bWVudFR5cGUgPT09ICdFeGFtaW5lJw0KICAgICAgICAgICAgICAvLyB9KQ0KICAgICAgICAgICAgICAvLyBfdGhpcy5nb0pwYUFwcG9pbnRtZW50RGF0YSA9IF90aGlzLmFsbERhdGEuZmlsdGVyKChpdGVtKSA9PiB7DQogICAgICAgICAgICAgIC8vICAgcmV0dXJuIGl0ZW0uQXBwb2ludG1lbnRUeXBlID09PSAnSm91cm5leScNCiAgICAgICAgICAgICAgLy8gfSkNCg0KICAgICAgICAgICAgICBfdGhpcy5jb25maXJtRGlhbG9nID0gZmFsc2U7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4JA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"pages/main/appointment","sourcesContent":["<template>\r\n  <div>\r\n    <el-row>\r\n      <el-col :span=\"24\" style=\"margin-bottom: 15px;\">\r\n        <el-row type=\"flex\">\r\n          <el-col :span=\"12\"></el-col>\r\n          <el-col :span=\"12\">\r\n            <el-input :placeholder=\"$t('default.TIPS.CLIENT.INPUT_SEARCH')\" v-model=\"search\">\r\n              <el-button slot=\"prepend\" icon=\"el-icon-search\"></el-button>\r\n            </el-input>\r\n          </el-col>\r\n        </el-row>\r\n      </el-col>\r\n      <el-col :span=\"24\">\r\n        <el-tabs v-model=\"activeName\" @tab-click=\"onTabClick\">\r\n          <!-- 看诊预约 -->\r\n          <el-tab-pane :label=\"$t('default.MODULE.APPOINTMENT.APPOINTMENT')\" name=\"Examine\">\r\n            <el-table height=\"450\" :data=\"seekAppointmentData.data\" border>\r\n              <el-table-column type=\"index\" label=\"序号\" width=\"80\"></el-table-column>\r\n              <el-table-column prop=\"CustomerName\" label=\"约诊患者\" width=\"180\"></el-table-column>\r\n              <el-table-column prop=\"AppointmentDate\" label=\"预约时间\" width=\"180\"></el-table-column>\r\n              <el-table-column prop=\"DoctorName\" label=\"预约医生\" width=\"180\"></el-table-column>\r\n              <el-table-column prop=\"AppointmentDate\" label=\"预约看诊时间\" width=\"180\"></el-table-column>\r\n              <el-table-column label=\"患者病历\" width=\"120\" align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n                  <el-link type=\"primary\" @click=\"onShowHealthRecordDtlDialog(scope.row)\">查看详情</el-link>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column label=\"预约结果\" width=\"120\" align=\"center\">\r\n                <!-- <template slot-scope=\"scope\">\r\n                  <label v-show=\"(scope.row.GaeaObjectProperty & 524289) > 0\">\r\n                    {{ formatStatus(scope.row.GaeaObjectProperty) }}\r\n                  </label>\r\n                  <el-link\r\n                    v-show=\"(scope.row.GaeaObjectProperty & 524289) === 0\"\r\n                    type=\"primary\"\r\n                    @click=\"onConfirmClick(scope.row)\"\r\n                    >{{ formatStatus(scope.row.GaeaObjectProperty) }}</el-link\r\n                  >                  \r\n                </template>-->\r\n                <template slot-scope=\"scope\">\r\n                  <label v-if=\"(scope.row.GaeaObjectProperty&8)>0\">{{formatStatus(scope.row.GaeaObjectProperty)}}</label>\r\n                  <el-link v-else type=\"primary\" @click=\"onConfirmClick(scope.row)\">\r\n                    {{\r\n                    formatStatus(scope.row.GaeaObjectProperty)\r\n                    }}\r\n                  </el-link>\r\n                </template>\r\n              </el-table-column>\r\n\r\n              <!-- <el-table-column>\r\n                <template slot-scope=\"scope\">\r\n                  <el-button\r\n                    type=\"primary\"\r\n                    icon=\"el-icon-phone-outline\"\r\n                    :disabled=\"(scope.row.GaeaObjectProperty&1)===0\"\r\n                    @click=\"invitation(scope.row.CustomerUserGuid)\"\r\n                    circle\r\n                  ></el-button>\r\n                </template>\r\n              </el-table-column> -->\r\n            </el-table>\r\n\r\n            <el-pagination\r\n              style=\"margin:10px 0;\"\r\n              background\r\n              layout=\"total, sizes, prev, pager, next, jumper\"\r\n              :page-sizes=\"[20,50,100,200]\"\r\n              :page-size=\"20\"\r\n              :total=\"seekAppointmentData.total\"\r\n            ></el-pagination>\r\n          </el-tab-pane>\r\n          <!-- 赴日预约 -->\r\n          <el-tab-pane :label=\"$t('default.MODULE.APPOINTMENT.APOMT_TO_JA')\" name=\"Journey\">\r\n            <el-table height=\"450\" :data=\"goJpaAppointmentData.data\" border>\r\n              <el-table-column type=\"index\" label=\"序号\" width=\"80\"></el-table-column>\r\n              <el-table-column prop=\"CustomerName\" label=\"约诊患者\" width=\"180\"></el-table-column>\r\n              <el-table-column prop=\"AppointmentDate\" label=\"预约时间\" width=\"180\"></el-table-column>\r\n              <el-table-column prop=\"AppointmentDate\" label=\"预约看诊时间\" width=\"180\"></el-table-column>\r\n              <el-table-column label=\"是否需要接机\" width=\"180\" :formatter=\"formatRecept\"></el-table-column>\r\n              <el-table-column label=\"预约结果\">\r\n                <!-- <template slot-scope=\"scope\">\r\n                  <label v-show=\"(scope.row.GaeaObjectProperty & 524289) > 0\">\r\n                    {{\r\n                    formatStatus(scope.row.GaeaObjectProperty)\r\n                    }}\r\n                  </label>\r\n                  <el-link\r\n                    v-show=\"(scope.row.GaeaObjectProperty & 524289) === 0\"\r\n                    type=\"primary\"\r\n                    @click=\"onConfirmClick(scope.row)\"\r\n                  >{{ formatStatus(scope.row.GaeaObjectProperty) }}</el-link>\r\n                </template>-->\r\n                <template slot-scope=\"scope\">\r\n                  <label v-if=\"(scope.row.GaeaObjectProperty&8)>0\">{{formatStatus(scope.row.GaeaObjectProperty)}}</label>\r\n                  <el-link v-else type=\"primary\" @click=\"onConfirmClick(scope.row)\">\r\n                    {{\r\n                    formatStatus(scope.row.GaeaObjectProperty)\r\n                    }}\r\n                  </el-link>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n\r\n            <el-pagination\r\n              style=\"margin:10px 0;\"\r\n              background\r\n              layout=\"total, sizes, prev, pager, next, jumper\"\r\n              :page-sizes=\"[20,50,100,200]\"\r\n              :page-size=\"20\"\r\n              :total=\"goJpaAppointmentData.total\"\r\n            ></el-pagination>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <el-dialog :title=\"isReadonly ? '预约结果详情' : '预约确认'\" width=\"600px\" :visible.sync=\"confirmDialog\">\r\n      <el-form\r\n        :model=\"confirmObj\"\r\n        :disabled=\"isReadonly\"\r\n        label-width=\"120px\"\r\n        :rules=\"rules\"\r\n        ref=\"confirmForm\"\r\n      >\r\n        <el-form-item label=\"确认结果\" prop=\"ConfirmResult\">\r\n          <el-radio-group v-model=\"confirmObj.ConfirmResult\" @change=\"onConfirmResultChange\">\r\n            <el-radio :label=\"true\">预约成功</el-radio>\r\n            <el-radio :label=\"false\">预约失败</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n\r\n        <!-- <el-form-item label=\"费用金额\" prop=\"FeeAmount\" v-show=\"confirmObj.ConfirmResult === true\">\r\n          <el-input type=\"text\" placeholder=\"请输入金额\" v-model=\"confirmObj.FeeAmount\">\r\n            <template slot=\"append\">元</template>\r\n          </el-input>\r\n        </el-form-item> -->\r\n\r\n        <el-form-item label=\"失败原因\" prop=\"FailResult\" v-show=\"confirmObj.ConfirmResult === false\">\r\n          <el-input type=\"textarea\" rows=\"5\" v-model=\"confirmObj.FailResult\"></el-input>\r\n        </el-form-item>\r\n        <!--v-show导致校验失效？暂时解决判断null，用v-if控制不进行渲染-->\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"onCancelClick\">取 消</el-button>\r\n        <el-button type=\"primary\" :disabled=\"isReadonly\" @click=\"onOkClick\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"患者病历\" :visible.sync=\"healthRecordDtlDialog\">\r\n      <health-record-detail :id=\"selectHealthRecord.MedicalRecordGuid\"></health-record-detail>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport healthRecordDetail from \"@/pages/main/appointment/health_record_detail.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    healthRecordDetail\r\n  },\r\n  data() {\r\n    return {\r\n      search: \"\",\r\n      allData: [],\r\n      selectHealthRecord:{},\r\n      seekAppointmentData: { data: [], total: 0 },\r\n      goJpaAppointmentData: { data: [], total: 0 },\r\n      activeName: \"Examine\",\r\n      feeAmount: \"\",\r\n      healthRecordDtlDialog: false,\r\n      confirmDialog: false,\r\n      currentObj: null,\r\n      confirmObj: {\r\n        GaeaObjectProperty: 0,\r\n        ConfirmResult: null,\r\n        FeeAmount: \"\",\r\n        FailResult: \"\"\r\n      },\r\n      rules: {\r\n        ConfirmResult: [\r\n          { required: true, message: \"请选择预约结果\", trigger: \"change\" }\r\n        ],\r\n        // FeeAmount: [\r\n        //   { required: true, message: \"请输入费用金额\", trigger: \"blur\" }\r\n        // ],\r\n        FailResult: [\r\n          { required: true, message: \"请填写失败原因\", trigger: \"blur\" }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    isReadonly() {\r\n      if (!this.currentObj) return false;\r\n      return (this.currentObj.GaeaObjectProperty & 524289) > 0;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.queryData();\r\n  },\r\n  methods: {\r\n    formatRecept(row, column, cellValue, index) {\r\n      if ((row.GaeaObjectProperty & 2) == 2) return \"是\";\r\n\r\n      return \"否\";\r\n    },\r\n    formatStatus(row) {\r\n      let statusName = \"\";\r\n      //TODO 状态值转换待优化\r\n      if ((row & 524289) === 0) statusName = \"待确认\";\r\n      if ((row & 1) > 0) statusName = \"预约成功\";\r\n      if ((row & 524288) > 0) statusName = \"预约失败\";\r\n      if ((row & 8)>0) statusName = \"已取消\";\r\n\r\n      return statusName;\r\n    },\r\n    //邀请视音频通话\r\n    invitation(id) {\r\n      var msg = {\r\n        to: id,\r\n        info: {\r\n          Creater: 1\r\n        },\r\n        type: \"\"\r\n      };\r\n      this.$even.$emit(\"user_live_launch\", msg);\r\n      //this.noticeEx.send(msg.to,msg.info);\r\n    },\r\n    onShowHealthRecordDtlDialog(record) {\r\n      this.selectHealthRecord=record;\r\n      this.healthRecordDtlDialog = true;\r\n    },\r\n\r\n    getAppointmentResult(gaeaObjectProperty) {\r\n      if ((gaeaObjectProperty & 1) > 0) return true;\r\n\r\n      if ((gaeaObjectProperty & 524288) > 0) return false;\r\n\r\n      return null;\r\n    },\r\n    onConfirmResultChange(v) {\r\n      //this.rules.FeeAmount[0].required = v;\r\n      this.rules.FailResult[0].required = v === false;\r\n\r\n      //this.confirmObj.FeeAmount = \"\";\r\n      this.confirmObj.FailResult = \"\";\r\n    },\r\n    onTabClick(tab) {\r\n      console.log(tab.name);\r\n    },\r\n    onResetForm() {\r\n      this.confirmObj = {\r\n        GaeaObjectProperty: 0,\r\n        ConfirmResult: null,\r\n        FeeAmount: \"\",\r\n        FailResult: \"\"\r\n      };\r\n      if (this.$refs.confirmForm) {\r\n        this.$refs.confirmForm.resetFields();\r\n      }\r\n    },\r\n    onConfirmClick(item) {\r\n      this.onResetForm();\r\n      this.currentObj = item;\r\n\r\n      const tempRecord = JSON.clone(item);\r\n      Object.assign(this.confirmObj, tempRecord);\r\n      this.confirmObj.ConfirmTargetDate = this.confirmObj.AppointmentDate;\r\n\r\n      this.confirmObj.FeeAmount =\r\n        this.confirmObj.FeeAmount === 0 ? \"\" : this.confirmObj.FeeAmount;\r\n\r\n      this.confirmObj.ConfirmResult = this.getAppointmentResult(\r\n        this.confirmObj.GaeaObjectProperty\r\n      );\r\n      ///this.confirmObj.ConfirmResult = this.appointmentResult\r\n      this.confirmDialog = true;\r\n    },\r\n    onCancelClick() {\r\n      this.confirmDialog = false;\r\n    },\r\n    onOkClick() {\r\n      if (this.confirmObj.ConfirmResult) {\r\n        this.confirmObj.GaeaObjectProperty =\r\n          this.confirmObj.GaeaObjectProperty | 1;\r\n      } else {\r\n        this.confirmObj.GaeaObjectProperty =\r\n          this.confirmObj.GaeaObjectProperty | 524288;\r\n\r\n        //delete this.confirmObj.FeeAmount;\r\n      }\r\n\r\n      this.saveAppointmentConfirm();\r\n      //this.confirmDialog = false\r\n    },\r\n    queryData() {\r\n      const _this=this;\r\n          this.$loading();\r\n      this.$api.get(\"/Medical/QueryAppointment\").then(res => {\r\n              this.$loading().close();\r\n              if (!res.IsPositive) {\r\n                _this.$tips.error(\"查询数据异常\");\r\n                return;\r\n              }\r\n        this.allData = res.Data.DataList;\r\n        this.seekAppointmentData.data = res.Data.DataList.filter(item => {\r\n          return item.AppointmentType === \"Examine\";\r\n        });\r\n        this.goJpaAppointmentData.data = res.Data.DataList.filter(item => {\r\n          return item.AppointmentType === \"Journey\";\r\n        });\r\n        this.seekAppointmentData.total = this.seekAppointmentData.data.length;\r\n        this.goJpaAppointmentData.total = this.goJpaAppointmentData.data.length;\r\n      });\r\n    },\r\n    saveAppointmentConfirm() {\r\n      const _this = this;\r\n      this.$refs.confirmForm.validate(valid => {\r\n        if (valid) {\r\n          this.$loading();\r\n          _this.$api\r\n            .post(\"/Medical/ConfirmAppointment\", this.confirmObj)\r\n            .then(res => {\r\n              this.$loading().close();\r\n              if (!res.IsPositive) {\r\n                _this.$tips.error(\"保存失败\");\r\n                return;\r\n              }\r\n\r\n              let record = _this.allData.filter(item => {\r\n                return (\r\n                  item.AppointmentGuid === _this.confirmObj.AppointmentGuid\r\n                );\r\n              });\r\n              if (record.length === 0) return;\r\n\r\n              record[0].GaeaObjectProperty =\r\n                _this.confirmObj.GaeaObjectProperty;\r\n              //record[0].FeeAmount = _this.confirmObj.FeeAmount;\r\n              record[0].FailResult = _this.confirmObj.FailResult;\r\n\r\n              // _this.seekAppointmentData = _this.allData.filter((item) => {\r\n              //   return item.AppointmentType === 'Examine'\r\n              // })\r\n              // _this.goJpaAppointmentData = _this.allData.filter((item) => {\r\n              //   return item.AppointmentType === 'Journey'\r\n              // })\r\n\r\n              _this.confirmDialog = false;\r\n            });\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"]}]}