{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GaeaProject\\jpn_medical_web\\pages\\main\\account\\scheduling.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\pages\\main\\account\\scheduling.vue","mtime":1596012180954},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\sass-resources-loader\\lib\\loader.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmlzLXNlbGVjdGVkIHsKICBjb2xvcjogIzUzYWE0OSAhaW1wb3J0YW50Owp9Cg=="},{"version":3,"sources":["scheduling.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2HA;AACA;AACA","file":"scheduling.vue","sourceRoot":"pages/main/account","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-calendar>\r\n\t\t<!-- 这里使用的是 2.5 slot 语法，对于新项目请使用 2.6 slot 语法-->\r\n\t\t\t<template slot=\"dateCell\" slot-scope=\"{date, data}\">\r\n\t\t\t\t<p @click=\"setSchedule(data.day)\">\r\n\t\t\t\t\t{{ data.day.split('-').slice(1).join('-') }} \r\n\t\t\t\t\t<span class=\"is-selected\">{{ schedules[data.day] ? '✔' : ''}}</span>\r\n\t\t\t\t</p>\r\n\t\t\t</template>\r\n\t\t</el-calendar>\r\n\t\t<!-- 排班选择框 -->\r\n\t\t<el-dialog v-loading=\"loading\" :title=\"isExist?'删除排班':'设置排班'\" :visible.sync=\"view.schedule\">\r\n\t\t\t\r\n\t\t\t<div v-if=\"!isExist\">确定在<strong>{{ doctorschedule.WorkDate }}</strong>为<strong>{{ doctorschedule.DoctorName }}</strong>排班?</div>\r\n\t\t\t<div v-if=\"isExist\">确定删除<strong>{{ doctorschedule.DoctorName }}</strong>在<strong>{{ doctorschedule.WorkDate }}</strong>的排班?</div>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"view.schedule=false\">取消</el-button>\r\n\t\t\t\t<el-button @click=\"enterSchedule\" type=\"primary\">确定</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tloading:false,\r\n\t\t\t\tisExist:false,\r\n\t\t\t\tview:{\r\n\t\t\t\t\tschedule:false\r\n\t\t\t\t},\r\n\t\t\t\tdoctorschedule:{\r\n\t\t\t\t\tWorkDate:\"\",\r\n\t\t\t\t\tDoctorGuid:[],\r\n\t\t\t\t\tDoctorName:\"\"\r\n\t\t\t\t},\r\n\t\t\t\tpagesParams:{\r\n\t\t\t\t\tPageIndex:1,\r\n\t\t\t\t\tPageSize:20,\r\n\t\t\t\t\tTotal:0,\r\n\t\t\t\t},\r\n\t\t\t\tdoctors:[],\r\n\t\t\t\tschedules:[],\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tenterSchedule(){\r\n\t\t\t\tif(this.isExist){\r\n\t\t\t\t\tthis.removedoctorschedule();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.saveDoctorWorkSchedule()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsetSchedule(day){\r\n\t\t\t\tif(this.schedules[day]){\r\n\t\t\t\t\tthis.isExist = true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.isExist = false;\t\t\r\n\t\t\t\t}\r\n\t\t\t\tthis.doctorschedule.WorkDate = day;\r\n\t\t\t\tthis.doctorschedule.DoctorName = this.$route.query.DoctorName;\r\n\t\t\t\tthis.view.schedule = true;\r\n\t\t\t},\r\n\t\t\tasync saveDoctorWorkSchedule(){\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tDoctorUserGuid: this.$route.query.DoctorGuid,\r\n\t\t\t\t\tWorkDate:this.doctorschedule.WorkDate\r\n\t\t\t\t};\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tlet res = await this.$api.post(\"/Medical/SaveDoctorWorkSchedule\",params)\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t\tif(!res.IsPositive){\r\n\t\t\t\t\tthis.$tips.code(res.ErrorSrc,res.ErrorCode)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$tips.success(\"更新成功\")\r\n\t\t\t\tthis.view.schedule = false;\r\n\t\t\t\t//this.schedules[this.doctorschedule.WorkDate] = res.Data;\r\n\t\t\t\tthis.$delete(this.schedules,this.doctorschedule.WorkDate,res.Data)\r\n\t\t\t},\r\n\t\t\t//查询指定医生排班接口\r\n\t\t\tasync querydoctorschedule() {\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tDoctorUserGuid: this.$route.query.DoctorGuid,\r\n\t\t\t\t\tCurrentYearMonth:\"2020-07\"\r\n\t\t\t\t};\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tlet res = await this.$api.get(\"/Medical/QueryWorkScheduleByDoctor\",params)\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t\tif(!res.IsPositive){\r\n\t\t\t\t\tthis.$tips.code(res.ErrorSrc,res.ErrorCode)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.schedules = res.Data;\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//删除当天排班\r\n\t\t\tasync removedoctorschedule(){\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tWorkScheduleGuid: this.schedules[this.doctorschedule.WorkDate].WorkScheduleGuid,\r\n\t\t\t\t};\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tlet res = await this.$api.post(\"/Medical/DeleteDoctorWorkSchedule\",params)\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t\tif(!res.IsPositive){\r\n\t\t\t\t\tthis.$tips.code(res.ErrorSrc,res.ErrorCode)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$tips.success(\"删除成功\");\r\n\t\t\t\tthis.view.schedule = false;\r\n\t\t\t\tthis.$delete(this.schedules,this.doctorschedule.WorkDate)\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t\tthis.querydoctorschedule();\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n  .is-selected {\r\n    color: #53aa49 !important;\r\n  }\r\n</style>"]}]}