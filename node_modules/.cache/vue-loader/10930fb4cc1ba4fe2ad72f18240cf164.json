{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GaeaProject\\jpn_medical_web\\pages\\main\\im\\index.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\pages\\main\\im\\index.vue","mtime":1595845202499},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\sass-resources-loader\\lib\\loader.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY2xlYXJmaXh7em9vbToxfQouY2xlYXJmaXg6YWZ0ZXJ7Y29udGVudDoiICI7ZGlzcGxheTpibG9jaztjbGVhcjpib3RoO2hlaWdodDowfQouaXMtbGVmdHt3aWR0aDoxMDAlfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+LA;AACA;AACA","file":"index.vue","sourceRoot":"pages/main/im","sourcesContent":["<template>\r\n\t<div style=\"height:90%\">\r\n\t\t<el-row style=\"height:100%\">\r\n\t\t\t<el-col :span=\"24\" style=\"height:100%\">\r\n\t\t\t\t<el-row type=\"flex\" :gutter=\"10\" style=\"height:100%\">\r\n\t\t\t\t\t<!-- 消息组 -->\r\n\t\t\t\t\t<el-col :span=\"4\" style=\"height:100%;border-right: 1px solid #CCCCCC;\">\r\n\t\t\t\t\t\t<el-row :span=\"24\">\r\n\t\t\t\t\t\t\t<p style=\"height:36px;padding: 18px 0;border-bottom: 1px solid   #CCCCCC;margin: 0;line-height: 36px;text-align: center;\">咨询用户列表</p>\r\n\t\t\t\t\t\t\t<el-row style=\"height: calc(100% - 72px)\">\r\n\t\t\t\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t\t\t\t<el-row v-for=\"(item,index) in candidate\" :key=\"index\" style=\"height:80px\">\r\n\t\t\t\t\t\t\t\t\t\t<!-- <el-col :span=\"6\">\r\n\t\t\t\t\t\t\t\t\t\t\t<el-avatar :size=\"40\" src=\"../../../src/assets/images/user.png\"></el-avatar>\r\n\t\t\t\t\t\t\t\t\t\t</el-col> -->\r\n\t\t\t\t\t\t\t\t\t\t<el-col :span=\"18\">\r\n\t\t\t\t\t\t\t\t\t\t\t<p @click=\"getCurrentCustomer(item)\" style=\"margin:0;padding: 0;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ item.UserName }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span style=\"font-size: 12px;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span v-if=\"item.ChartRoomGuid && item.ChartRoomGuid.length > 0\" style=\"color:#42B983\">(正在服务..)</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span v-if=\"!item.ChartRoomGuid || item.ChartRoomGuid.length == 0\" style=\"color:#fa2541\">(待服务)</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- <p style=\"margin:0;padding: 0;font-size: 14px;\">{{ item.UserName }}</p> -->\r\n\t\t\t\t\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t\t\t\t</el-row>\r\n\t\t\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t\t</el-row>\t\r\n\t\t\t\t\t\t</el-row>\r\n\t\t\t\t\t</el-col>\t\r\n\t\t\t\t\t<!-- 消息窗口 -->\r\n\t\t\t\t\t<el-col :span=\"20\" style=\"height:100%\">\r\n\t\t\t\t\t\t<div style=\"height:calc(100% - 100px)\">\r\n\t\t\t\t\t\t\t<div style=\"width:100%;height:40px\">\r\n\t\t\t\t\t\t\t\t<el-button @click=\"connection()\" v-if=\"current.Type == 'candidate'\" style=\"float: right;width:80px;padding: 10px 0\" type=\"primary\">认领</el-button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style=\"height:500px;overflow: scroll;background: #eee;padding:15px\">\r\n\t\t\t\t\t\t\t\t<div v-for=\"(item,index) in chartsHistory\" :key=\"index\" style=\"height:auto;margin-bottom: 20px;\">\r\n\t\t\t\t\t\t\t\t\t<div v-if=\"item.Type=='rece'\" style=\"margin:7px 0px;\">\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\txxx:\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div style=\"background: #6a987b;color:#fff;padding:3px 7px;border-radius: 7px;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ item.Message }}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div v-if=\"item.Type=='sys'\" style=\"color:#ccc;font-size: 13px;text-align: center;margin:10px 0px\">\r\n\t\t\t\t\t\t\t\t\t\t{{ item.Message }}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div v-if=\"item.Type=='send'\" style=\"margin:7px 0px;\">\r\n\t\t\t\t\t\t\t\t\t\t<div style=\"text-align:right\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div style=\"font-size: 14px;color:#ccc;margin-bottom: 5px;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t我\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div style=\"background: #429844;color:#fff;padding:3px 7px;border-radius: 7px;display: inline-block;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ item.Message }}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\t\t\t\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style=\"height:100px;width:70%;margin:0 20px\">\r\n\t\t\t\t\t\t\t<el-input size=\"medium\" v-model=\"sendText\"  placeholder=\"请输入内容\"  type=\"textarea\"></el-input>\r\n\t\t\t\t\t\t\t<el-button @click=\"sendInfo()\" type=\"primary\" plain style=\"float: right;width:70px;padding: 10px 0;margin:0 2px;\">发送</el-button>\r\n\t\t\t\t\t\t\t<el-button type=\"primary\" plain style=\"float: right;width:60px;padding: 10px 0;\" icon=\"el-icon-picture-outline\"></el-button>\r\n\t\t\t\t\t\t\t<el-button @click=\"sendText = ''\"  size=\"mini\"  icon=\"el-icon-delete\" circle style=\"float: right;padding: 10px 0\"></el-button>\r\n\t\t\t\t\t\t</div>\t\t\t\t\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\r\n\t\t\t\t</el-row>\r\n\t\t\t\t\r\n\t\t\t</el-col>\r\n\t\t</el-row>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {mapState,mapMutations} from 'vuex'\r\n\texport default {\r\n\t\tcomputed: {\r\n\t\t\t...mapState([\"noticeEx\"]),\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\ttabPosition: 'left',\r\n\t\t\t\tcircleUrl: \"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\",\r\n\t\t\t\tsizeList: [\"large\", \"medium\", \"small\"],\r\n\t\t\t\tsendText:\"\",\r\n\t\t\t\tcurrent:{},\r\n\t\t\t\tchartsHistory:[],\r\n\t\t\t\tcandidate:[],\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tgetSender(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\t\"Token\":this.noticeEx.info.token,\r\n\t\t\t\t\t\"Type\":\"app\",\r\n\t\t\t\t\t\"From\":{\r\n\t\t\t\t\t\t\"Name\":this.noticeEx.info.user.name,\r\n\t\t\t\t\t\t\"Guid\":this.noticeEx.info.user.guid,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"Data\":{\r\n\t\t\t\t\t\t\"Message\":\"\",\r\n\t\t\t\t\t\t\"Accept\":{\r\n\t\t\t\t\t\t\t\"Guid\":\"\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"Type\":\"cs\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsendInfo(){\r\n\t\t\t\tthis.chartsHistory.push({\r\n\t\t\t\t\tType:\"send\",\r\n\t\t\t\t\tMessage:this.sendText,\r\n\t\t\t\t})\r\n\t\t\t\tlet sender = this.getSender()\r\n\t\t\t\tsender.Data.Accept.Guid =this.current.ChartRoomGuid;\r\n\t\t\t\tsender.Data.Message = this.sendText;\r\n\t\t\t\ttry{\r\n\t\t\t\tthis.noticeEx.sendSocure(sender);\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t}\r\n\t\t\t\tthis.sendText = '';\r\n\t\t\t},\r\n\t\t\tgetCurrentCustomer(item){\r\n\t\t\t\tthis.current = item;\r\n\t\t\t\tthis.chartsHistory = [];\r\n\t\t\t\tif(item.Type != \"candidate\"){\r\n\t\t\t\t\t//get charts history\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync connection(){\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tToken:this.noticeEx.info.token,\r\n\t\t\t\t\tUserGuid:this.current.UserGuid,\r\n\t\t\t\t\tUserName:this.current.UserName,\r\n\t\t\t\t\tChartRoomName:\"与\"+this.current.UserName+\"的聊天\",\r\n\t\t\t\t\tAppId:\"\",\r\n\t\t\t\t}\r\n\t\t\t\tlet res = await this.noticeEx.noticeGet(\"/chart/connection\",params)\r\n\t\t\t\tif(!res.Success){\r\n\t\t\t\t\tthis.$tips.warning(\"认领错误\");\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.current.ChartRoomGuid = res.Data.ChartRoomGuid;\r\n\t\t\t\t\r\n\t\t\t\tthis.chartsHistory.push({\r\n\t\t\t\t\tType:\"sys\",\r\n\t\t\t\t\tMessage:\"您已认领与\"+this.current.UserName+\"的沟通\",\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t},\r\n\t\t\tasync registerCustomerServe(){\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tToken:this.noticeEx.info.token,\r\n\t\t\t\t\tRole:2\r\n\t\t\t\t}\r\n\t\t\t\tlet res = await this.noticeEx.noticeGet(\"/chart/setrole\",params)\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t},\r\n\t\t\tasync createCandidate(){\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tToken:this.noticeEx.info.token,\r\n\t\t\t\t}\r\n\t\t\t\tlet res = await this.noticeEx.noticeGet(\"/chart/createcandidate\",params)\r\n\t\t\t},\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tconsole.log(this.noticeEx)\r\n\t\t\tsetTimeout(()=>{\r\n\t\t\t\t//this.registerCustomerServe()\r\n\t\t\t\tthis.createCandidate()\r\n\t\t\t},1000)\r\n\t\t\tthis.$even.$on(\"notice_cs_info\",(info)=>{\r\n\t\t\t\tlet content = info.Data.Message;\r\n\t\t\t\t//candidate 待接驳\r\n\t\t\t\tif(content.Type == \"candidate\"){\r\n\t\t\t\t\tthis.candidate.push(content);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n  .clearfix{zoom:1}\r\n  .clearfix:after{content:\" \";display:block;clear:both;height:0}\r\n  .is-left{width:100%}\r\n</style>\r\n"]}]}