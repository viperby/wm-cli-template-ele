{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GaeaProject\\jpn_medical_web\\pages\\common\\room.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\pages\\common\\room.vue","mtime":1594278821262},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB2aWRlb0VsZW1lbnQgZnJvbSAnQC9wYWdlcy9jb21tb24vdmlkZW9FbGVtZW50LnZ1ZScKaW1wb3J0IE5vdGljZVNESyBmcm9tICdAL3V0aWxzL25vdGljZVNESy9pbmRleC5qcycKaW1wb3J0IFJ0Y1NESyBmcm9tICdAL3V0aWxzL3J0Y1NESy9ydGMuanMnCmltcG9ydCBjb25mIGZyb20gJ0AvY29uZi9jb25mLmpzJwppbXBvcnQge21ha2VHdWlkfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvbWFrZUd1aWQuanMnOwppbXBvcnQge21hcFN0YXRlLG1hcE11dGF0aW9uc30gZnJvbSAndnVleCcKaW1wb3J0IG5vdGljZSBmcm9tICdAL3V0aWxzL21peGlucy9ub3RpY2UuanMnCgpleHBvcnQgZGVmYXVsdCB7Cgljb21wdXRlZDogewoJCS4uLm1hcFN0YXRlKFsidUluZm8iXSksCgkJLi4ubWFwU3RhdGUoWyJub3RpY2VSb29tIl0pLAoJfSwKCW1peGluczpbbm90aWNlXSwKCWNvbXBvbmVudHM6ewoJCXZpZGVvRWxlbWVudAoJfSwKCWRhdGEoKXsKCQlyZXR1cm4gewoJCQl1c2VyU3RyZWFtczp7fSwKCQkJdXNlclJ0Y3M6e30sCgkJCXRva2Vuczp7fSwKCQkJbG9jYWxTdHJlYW06bnVsbCwKCQl9Cgl9LAoJbWV0aG9kczp7CgkJY2hlY2tNZWRpYSgpewoJCQlyZXR1cm4gewoJCQkJbWVkaWFEZXZpY2VzOm5hdmlnYXRvciAhPSB1bmRlZmluZWQgJiYgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAhPSB1bmRlZmluZWQsCgkJCX0KCQl9LAoJCWFzeW5jIGNyZWF0ZVZpZGVvKCl7CQkJCgkJCWxldCBzdHJlYW0gPSBhd2FpdCB0aGlzLmNyZWF0ZUxvY2FsU3RlYW0oKTsKCQkJdGhpcy5sb2NhbFN0cmVhbSA9IHN0cmVhbTsKCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvY2FsU3RyZWFtJykuaW5uZXJIVE1MID0gIiI7CgkJCWNvbnN0IHZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTsKCQkJdmlkZW8ud2lkdGggPSAzMDA7CgkJCXZpZGVvLmhlaWdodCA9IDMwMDsKCQkJdmlkZW8uYXV0b3BsYXkgPSB0cnVlOwoJCQl2aWRlby5wbGF5c2lubGluZSA9IGZhbHNlOwoJCQl2aWRlby5jb250cm9scyA9IGZhbHNlOwoJCQl2aWRlby5tdXRlZCA9ICJtdXRlZCI7CgkJCXZpZGVvLnNyY09iamVjdCA9IHRoaXMubG9jYWxTdHJlYW07CgkJCWxldCBwYXJlbnRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImxvY2FsU3RyZWFtIik7CgkJCXBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodmlkZW8pOwoJCX0sCgkJYXN5bmMgY3JlYXRlTG9jYWxTdGVhbSgpIHsKCQkJaWYgKCF0aGlzLmNoZWNrTWVkaWEoKS5tZWRpYURldmljZXMpIHsKCQkJCXJldHVybgoJCQl9CgkJCXJldHVybiBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7CgkJCQlhdWRpbzogdHJ1ZSwKCQkJCXZpZGVvOiB7CgkJCQkJd2lkdGg6IHsKCQkJCQkJaWRlYWw6IDEwODAKCQkJCQl9LAoJCQkJCWhlaWdodDogewoJCQkJCQlpZGVhbDogNzIwCgkJCQkJfQoJCQkJfQoJCQl9KTsKCQl9LAoJCWFzeW5jIGNyZWF0ZVJ0Y1NlbmRlcih1aWQsIHR5cGUscmVhZHkpIHsKCQkJbGV0IHRoYXQgPSB0aGlzOwoJCQlsZXQgcnRjID0gbmV3IFJ0Y1NESyh7CgkJCQlzZXJ2ZTogInN0dW46c3R1bi5zdHVucHJvdG9jb2wub3JnOjM0NzgiLAoJCQkJcmVhZHk6cmVhZHksCgkJCQlqb2luKHN0cmVhbSl7CgkJCQkJdGhhdC4kc2V0KHRoYXQudXNlclN0cmVhbXMsIHVpZCwgc3RyZWFtLnN0cmVhbSkKCQkJCX0sCgkJCX0pOwoJCQlydGMuYWRkU3RlYW0odGhpcy5sb2NhbFN0cmVhbSk7CgkJCXRoaXMuc2V0VXNlclJ0Y3MocnRjLCB1aWQsIHR5cGUpOwoJCQlyZXR1cm4gYXdhaXQgcnRjLmNyZWF0ZU9mZmVyKHsKCQkJCW9mZmVyVG9SZWNlaXZlVmlkZW86IHRydWUsCgkJCQlvZmZlclRvUmVjZWl2ZUF1ZGlvOiB0cnVlCgkJCX0pOwoJCX0sCgkJc2V0VXNlclJ0Y3MocnRjLHVpZCx0eXBlKXsKCQkJaWYoIXRoaXMudXNlclJ0Y3NbdWlkXSl7CgkJCQl0aGlzLnVzZXJSdGNzW3VpZF0gPSBuZXcgT2JqZWN0KCk7CgkJCX0KCQkJdGhpcy51c2VyUnRjc1t1aWRdW3R5cGVdID0gcnRjOwkKCQl9LAoJCWNyZWF0ZVJvb20oaW5mbyxwYXIpewoJCQl0aGlzLmluaXRSb29tKGluZm8scGFyKTsKCQl9LAoJCWFzeW5jIGNyZWF0ZVJ0Y1JldmljZSh1aWQsdHlwZSxyZWFkeSl7CgkJCWxldCB0aGF0ID0gdGhpczsKCQkJbGV0IHJ0YyA9IG5ldyBSdGNTREsoewoJCQkJc2VydmU6InN0dW46c3R1bi5zdHVucHJvdG9jb2wub3JnOjM0NzgiLAoJCQkJcmVhZHk6cmVhZHksCgkJCQlqb2luKHN0cmVhbSl7CgkJCQkJdGhhdC4kc2V0KHRoYXQudXNlclN0cmVhbXMsdWlkLHN0cmVhbS5zdHJlYW0pCgkJCQl9LAoJCQl9KTsKCQkJLy9ydGMuc29jdXJlLmFkZFRyYW5zY2VpdmVyKCdhdWRpbycsIHsgJ2RpcmVjdGlvbic6ICdyZWN2b25seScgfSk7CgkJCS8vcnRjLnNvY3VyZS5hZGRUcmFuc2NlaXZlcigndmlkZW8nLCB7ICdkaXJlY3Rpb24nOiAncmVjdm9ubHknIH0pOwoJCQkvL3J0Yy5zZW5kT2ZmZXIgPSBmYWxzZTsKCQkJcnRjLmFkZFN0ZWFtKHRoaXMubG9jYWxTdHJlYW0pOwkJCQoJCQlpZighdGhpcy51c2VyUnRjc1t1aWRdIHx8ICF0aGlzLnVzZXJSdGNzW3VpZF1bdHlwZV0pewoJCQkJdGhpcy5zZXRVc2VyUnRjcyhydGMsdWlkLHR5cGUpOwoJCQl9CgkJCXJldHVybiBhd2FpdCBydGM7CgkJCS8vcmV0dXJuIGF3YWl0IHJ0Yy5jcmVhdGVPZmZlcih7IG9mZmVyVG9SZWNlaXZlVmlkZW86IHRydWUsIG9mZmVyVG9SZWNlaXZlQXVkaW86IHRydWUgfSk7CgkJfSwKCQlldmVucygpewoJCQlsZXQgc2VsZiA9IHRoaXM7CgkJCXRoaXMuY3JlYXRlVmlkZW8oKTsKCQkJLy8gdGhpcy4kZXZlbi4kb24oInVzZXJfbGl2ZV9sYXVuY2giLChpbmZvKT0+ewoJCQkvLyAJdGhpcy5jcmVhdGVWaWRlbygpOwoJCQkvLyB9KQoJCQkvL+W9k+WJjeeUqOaIt+S4u+WKqOmAgOWHugoJCQl0aGlzLiRldmVuLiRvbigidXNlcl9saXZlX2xlYXZlIiwoaW5mbyk9PnsKCQkJCXRoaXMudXNlclJ0Y3MgPSB7fTsKCQkJCWxldCBib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdqcy12aWRlb2JveCcpWzBdOwoJCQkJYm94LmlubmVySFRNTCA9ICIiOwoJCQkJdGhpcy51c2VyU3RyZWFtcyA9IHt9OwoJCQl9KQoJCQkvL+W9k+WvueaWuemAieaLqeS7peinhumikeaWueW8j+aOpemAmuaXtgoJCQl0aGlzLiRldmVuLiRvbigibm90aWNlX2xpdmVfY29ubmVjdGFsbCIsKGluZm8pPT57CgkJCQkvL+W9k+WJjeeUqOaIt+W3suWcqOaIv+mXtAoJCQkJaWYodGhpcy5ub3RpY2VSb29tJiZ0aGlzLm5vdGljZVJvb20uaW5mbyAhPSB1bmRlZmluZWQpewoJCQkJCXZhciBtc2cgPSB7CgkJCQkJCXRvOiBpbmZvLkZyb20uR3VpZCwKCQkJCQkJaW5mbzogewoJCQkJCQkJUGxhdGU6IHRoaXMubm90aWNlUm9vbS5pbmZvLnBsYXRlLAoJCQkJCQkJQ29kZTogdGhpcy5ub3RpY2VSb29tLmluZm8uY29kZSwKCQkJCQkJCVZpZGVvVHlwZTogIGluZm8uRGF0YS5NZXNzYWdlLkFuc3dlcgoJCQkJCQl9LAoJCQkJCQl0eXBlOiAnJwoJCQkJCX07CgkJCQkJCgkJCQkJdGhpcy5ub3RpY2VFeC5zZW5kKG1zZy50bywgbXNnLmluZm8pOwoJCQkJfSBlbHNlIHsKCQkJCQkvL+W9k+WJjeeUqOaIt+S4jeWcqOaIv+mXtAoJCQkJCXRoaXMuY3JlYXRlUm9vbShpbmZvKQoJCQkJfQoJCQl9KTsKCQkJLy/lvZPmiL/pl7Tlt7Llu7rnq4sKCQkJdGhpcy4kZXZlbi4kb24oInVzZXJfcm9vbV9jcmVhdGUiLChpbmZvLG5vdGljZSk9PnsKCQkJCXZhciBtc2cgPSB7CgkJCQkJdG86IGluZm8uRnJvbS5HdWlkLAoJCQkJCWluZm86IHsKCQkJCQkJUGxhdGU6IG5vdGljZS5pbmZvLnBsYXRlLAoJCQkJCQlDb2RlOiBub3RpY2UuaW5mby5jb2RlLAoJCQkJCQlWaWRlb1R5cGU6IGluZm8uRGF0YS5NZXNzYWdlLkFuc3dlciwKCQkJCQl9LAoJCQkJCXR5cGU6ICcnCgkJCQl9OwkKCQkJCXRoaXMubm90aWNlRXguc2VuZChtc2cudG8sIG1zZy5pbmZvKTsKCQkJfSk7CgkJCS8v5pS25Yiw5Yib5bu65oi/6Ze05oyH5LukCgkJCXRoaXMuJGV2ZW4uJG9uKCJub3RpY2Vfcm9vbV9idWlsZCIsKGluZm8pPT57CgkJCQl0aGlzLmNyZWF0ZVJvb20oaW5mbyx7cGxhdGU6aW5mby5EYXRhLk1lc3NhZ2UuUGxhdGV9KQoJCQl9KTsKCQkJLy/mlLbliLDliqDlhaXmiL/pl7TmjIfku6QKCQkJdGhpcy4kZXZlbi4kb24oIm5vdGljZV9yb29tX2pvaW4iLChpbmZvKT0+ewoJCQkJbGV0IHJlYWR5ID0gKHRva2VuKSA9PiB7CgkJCQkJbGV0IHJ0YyA9IHNlbGYudXNlclJ0Y3NbaW5mby5EYXRhLkFjY2VwdC5HdWlkXS5kZXNrOwoJCQkJCWxldCBzZW5kTXNnID0gewoJCQkJCQl0eXBlOid0b2tlbicsCgkJCQkJCXRva2VuOnRva2VuLAoJCQkJCX0KCQkJCQkvL+ajgOafpeaYr+WQpuWtmOWcqOetieW+heaOpeaUtueahHRva2VuCgkJCQkJaWYodGhpcy50b2tlbnNbaW5mby5Gcm9tLkd1aWRdKXsKCQkJCQkJcnRjLmFkZEljZUNhbmRpZGF0ZSh0aGlzLnRva2Vuc1tpbmZvLkZyb20uR3VpZF0pOwoJCQkJCQlkZWxldGUgdGhpcy50b2tlbnNbaW5mby5Gcm9tLkd1aWRdOwoJCQkJCX0KCQkJCQlzZWxmLm5vdGljZVJvb20uc2VuZChpbmZvLkRhdGEuQWNjZXB0Lkd1aWQsIHNlbmRNc2cpOwoJCQkJfQoJCQkJdGhpcy5jcmVhdGVSdGNTZW5kZXIoaW5mby5EYXRhLkFjY2VwdC5HdWlkLCdkZXNrJyxyZWFkeSkudGhlbigob2ZmZXIpPT57CgkJCQkJbGV0IHNlbmRNc2cgPSB7CgkJCQkJCXR5cGU6J3B1c2gnLAoJCQkJCQlqc2VwOm9mZmVyLAoJCQkJCX0KCQkJCQlzZWxmLm5vdGljZVJvb20uc2VuZChpbmZvLkRhdGEuQWNjZXB0Lkd1aWQsIHNlbmRNc2cpOwoJCQkJfSkKCQkJfSk7CgkJCS8v5LqS5o2idG9rZW7mjIfku6QKCQkJdGhpcy4kZXZlbi4kb24oIm5vdGljZV9jaGFubmVsX3Rva2VuIiwoaW5mbyk9PnsKCQkJCWxldCByZWMgPSBpbmZvLkRhdGEuTWVzc2FnZTsKCQkJCS8v5b2T6L+Z5p2h5raI5oGv5o6l5Y+X5pe277yM5pyJ5Y+v6IO95pys5Zyw5bqU562U5L+h5Luk6L+Y5pyq5Yib5bu65a6M5oiQCgkJCQlpZih0aGlzLnVzZXJSdGNzW2luZm8uRnJvbS5HdWlkXSl7CgkJCQkJbGV0IHJ0YyA9IHRoaXMudXNlclJ0Y3NbaW5mby5Gcm9tLkd1aWRdLmRlc2s7CgkJCQkJcnRjLmFkZEljZUNhbmRpZGF0ZShyZWMudG9rZW4pOwoJCQkJfWVsc2V7CgkJCQkJLy/mmoLlrZgKCQkJCQl0aGlzLnRva2Vuc1tpbmZvLkZyb20uR3VpZF0gPSByZWMudG9rZW47CgkJCQl9CgkJCX0pOwoJCQkvL+aUtuWIsOmAgOWHuuaIv+mXtOaMh+S7pAoJCQl0aGlzLiRldmVuLiRvbigibm90aWNlX3Jvb21fbGVhdmUiLChpbmZvKT0+ewoJCQkJdGhpcy4kbm90aWZ5KHsKCQkJCQl0aXRsZTogJ+aPkOekuicsCgkJCQkJbWVzc2FnZTogaW5mby5EYXRhLkFjY2VwdC5OYW1lICsgJ+mAgOWHuuinhumike+8gScsCgkJCQl9KTsKCQkJCWxldCBydGMgPSB0aGlzLnVzZXJSdGNzW2luZm8uRGF0YS5BY2NlcHQuR3VpZF0uZGVzazsKCQkJCXJ0Yy5zb2N1cmUuY2xvc2UoKTsKCQkJCWRlbGV0ZSB0aGlzLnVzZXJSdGNzW2luZm8uRGF0YS5BY2NlcHQuR3VpZF07CgkJCQl2YXIgcmVtb3ZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW5mby5EYXRhLkFjY2VwdC5HdWlkKTsKCQkJCXJlbW92ZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHJlbW92ZSk7CgkJCQlkZWxldGUgdGhpcy51c2VyU3RyZWFtc1tpbmZvLkRhdGEuQWNjZXB0Lkd1aWRdCgkJCX0pOwoJCQkvL+W9k+aUtuWIsHB1c2jmtojmga8KCQkJdGhpcy4kZXZlbi4kb24oIm5vdGljZV9jaGFubmVsX3B1c2giLChpbmZvKT0+ewoJCQkJbGV0IHJlYyA9IGluZm8uRGF0YS5NZXNzYWdlOwoJCQkJbGV0IHJlYWR5ID0gKHRva2VuKSA9PiB7CgkJCQkJbGV0IHJ0YyA9IHNlbGYudXNlclJ0Y3NbaW5mby5Gcm9tLkd1aWRdLmRlc2s7CgkJCQkJbGV0IHNlbmRNc2cgPSB7CgkJCQkJCQl0eXBlOid0b2tlbicsCgkJCQkJCQl0b2tlbjp0b2tlbgoJCQkJCQl9CgkJCQkJLy/mo4Dmn6XmmK/lkKblrZjlnKjnrYnlvoXmjqXmlLbnmoR0b2tlbgoJCQkJCWlmKHRoaXMudG9rZW5zW2luZm8uRnJvbS5HdWlkXSl7CgkJCQkJCXJ0Yy5hZGRJY2VDYW5kaWRhdGUodGhpcy50b2tlbnNbaW5mby5Gcm9tLkd1aWRdKTsKCQkJCQkJZGVsZXRlIHRoaXMudG9rZW5zW2luZm8uRnJvbS5HdWlkXTsKCQkJCQl9CgkJCQkJdGhpcy5ub3RpY2VSb29tLnNlbmQoaW5mby5Gcm9tLkd1aWQsIHNlbmRNc2cpOwoJCQkJfQoJCQkJdGhpcy5jcmVhdGVSdGNSZXZpY2UoaW5mby5Gcm9tLkd1aWQsJ2Rlc2snLHJlYWR5KS50aGVuKChydGMpPT57CgkJCQkJcnRjLmNyZWF0ZUFuc3dlcihyZWMuanNlcCkudGhlbigoYW5zd2VyKT0+ewoJCQkJCQlsZXQgc2VuZE1zZyA9IHsKCQkJCQkJCQl0eXBlOidzdWJzY3JpYmUnLAoJCQkJCQkJCWpzZXA6YW5zd2VyLAoJCQkJCQkJfQoJCQkJCQl0aGlzLm5vdGljZVJvb20uc2VuZChpbmZvLkZyb20uR3VpZCwgc2VuZE1zZyk7CgkJCQkJfSkKCQkJCX0pCgkJCX0pOwoJCQkvL+W9k+aUtuWIsOiuoumYhea2iOaBrwoJCQl0aGlzLiRldmVuLiRvbigibm90aWNlX2NoYW5uZWxfc3Vic2NyaWJlIiwoaW5mbyk9PnsKCQkJCWxldCByZWMgPSBpbmZvLkRhdGEuTWVzc2FnZTsKCQkJCWxldCBydGMgPSB0aGlzLnVzZXJSdGNzW2luZm8uRnJvbS5HdWlkXS5kZXNrOwoJCQkJcnRjLnNldFJlbW90ZShyZWMuanNlcCkKCQkJfSk7CgkJfQoJfSwKCW1vdW50ZWQoKXsKCQl0aGlzLmV2ZW5zKCk7Cgl9Cn0K"},{"version":3,"sources":["room.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"room.vue","sourceRoot":"pages/common","sourcesContent":["<template>\r\n\t<el-row>\r\n\t\t<el-col :span=\"24\">\r\n\t\t\t<el-row>\r\n\t\t\t\t<el-col :span=\"8\">\r\n\t\t\t\t\t<el-card id=\"localStream\" style=\"display: inline-block;margin:10px\">\r\n\t\t\t\t\t</el-card>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"16\">\r\n\t\t\t\t\t<div class=\"js-videobox\">\r\n\t\t\t\t\t\t<videoElement v-for=\"(item,key,i) in userStreams\" :key=\"i\" :mid=\"key\" :stream=\"item\"></videoElement>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\t\t</el-col>\r\n\t</el-row>\n</template>\n\n<script>\r\n\timport videoElement from '@/pages/common/videoElement.vue'\r\n\timport NoticeSDK from '@/utils/noticeSDK/index.js'\r\n\timport RtcSDK from '@/utils/rtcSDK/rtc.js'\r\n\timport conf from '@/conf/conf.js'\r\n\timport {makeGuid} from '../../src/utils/makeGuid.js';\r\n\timport {mapState,mapMutations} from 'vuex'\r\n\timport notice from '@/utils/mixins/notice.js'\r\n\t\r\n\texport default {\r\n\t\tcomputed: {\r\n\t\t\t...mapState([\"uInfo\"]),\r\n\t\t\t...mapState([\"noticeRoom\"]),\r\n\t\t},\r\n\t\tmixins:[notice],\r\n\t\tcomponents:{\r\n\t\t\tvideoElement\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tuserStreams:{},\r\n\t\t\t\tuserRtcs:{},\r\n\t\t\t\ttokens:{},\r\n\t\t\t\tlocalStream:null,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tcheckMedia(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tmediaDevices:navigator != undefined && navigator.mediaDevices != undefined,\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync createVideo(){\t\t\t\r\n\t\t\t\tlet stream = await this.createLocalSteam();\r\n\t\t\t\tthis.localStream = stream;\r\n\t\t\t\tdocument.getElementById('localStream').innerHTML = \"\";\r\n\t\t\t\tconst video = document.createElement('video');\r\n\t\t\t\tvideo.width = 300;\r\n\t\t\t\tvideo.height = 300;\r\n\t\t\t\tvideo.autoplay = true;\r\n\t\t\t\tvideo.playsinline = false;\r\n\t\t\t\tvideo.controls = false;\r\n\t\t\t\tvideo.muted = \"muted\";\r\n\t\t\t\tvideo.srcObject = this.localStream;\r\n\t\t\t\tlet parentElement = document.getElementById(\"localStream\");\r\n\t\t\t\tparentElement.appendChild(video);\r\n\t\t\t},\r\n\t\t\tasync createLocalSteam() {\r\n\t\t\t\tif (!this.checkMedia().mediaDevices) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\treturn await navigator.mediaDevices.getUserMedia({\r\n\t\t\t\t\taudio: true,\r\n\t\t\t\t\tvideo: {\r\n\t\t\t\t\t\twidth: {\r\n\t\t\t\t\t\t\tideal: 1080\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\theight: {\r\n\t\t\t\t\t\t\tideal: 720\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync createRtcSender(uid, type,ready) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet rtc = new RtcSDK({\r\n\t\t\t\t\tserve: \"stun:stun.stunprotocol.org:3478\",\r\n\t\t\t\t\tready:ready,\r\n\t\t\t\t\tjoin(stream){\r\n\t\t\t\t\t\tthat.$set(that.userStreams, uid, stream.stream)\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\trtc.addSteam(this.localStream);\r\n\t\t\t\tthis.setUserRtcs(rtc, uid, type);\r\n\t\t\t\treturn await rtc.createOffer({\r\n\t\t\t\t\tofferToReceiveVideo: true,\r\n\t\t\t\t\tofferToReceiveAudio: true\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsetUserRtcs(rtc,uid,type){\r\n\t\t\t\tif(!this.userRtcs[uid]){\r\n\t\t\t\t\tthis.userRtcs[uid] = new Object();\r\n\t\t\t\t}\r\n\t\t\t\tthis.userRtcs[uid][type] = rtc;\t\r\n\t\t\t},\r\n\t\t\tcreateRoom(info,par){\r\n\t\t\t\tthis.initRoom(info,par);\r\n\t\t\t},\r\n\t\t\tasync createRtcRevice(uid,type,ready){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet rtc = new RtcSDK({\r\n\t\t\t\t\tserve:\"stun:stun.stunprotocol.org:3478\",\r\n\t\t\t\t\tready:ready,\r\n\t\t\t\t\tjoin(stream){\r\n\t\t\t\t\t\tthat.$set(that.userStreams,uid,stream.stream)\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\t//rtc.socure.addTransceiver('audio', { 'direction': 'recvonly' });\r\n\t\t\t\t//rtc.socure.addTransceiver('video', { 'direction': 'recvonly' });\r\n\t\t\t\t//rtc.sendOffer = false;\r\n\t\t\t\trtc.addSteam(this.localStream);\t\t\t\r\n\t\t\t\tif(!this.userRtcs[uid] || !this.userRtcs[uid][type]){\r\n\t\t\t\t\tthis.setUserRtcs(rtc,uid,type);\r\n\t\t\t\t}\r\n\t\t\t\treturn await rtc;\r\n\t\t\t\t//return await rtc.createOffer({ offerToReceiveVideo: true, offerToReceiveAudio: true });\r\n\t\t\t},\r\n\t\t\tevens(){\r\n\t\t\t\tlet self = this;\r\n\t\t\t\tthis.createVideo();\r\n\t\t\t\t// this.$even.$on(\"user_live_launch\",(info)=>{\r\n\t\t\t\t// \tthis.createVideo();\r\n\t\t\t\t// })\r\n\t\t\t\t//当前用户主动退出\r\n\t\t\t\tthis.$even.$on(\"user_live_leave\",(info)=>{\r\n\t\t\t\t\tthis.userRtcs = {};\r\n\t\t\t\t\tlet box = document.getElementsByClassName('js-videobox')[0];\r\n\t\t\t\t\tbox.innerHTML = \"\";\r\n\t\t\t\t\tthis.userStreams = {};\r\n\t\t\t\t})\r\n\t\t\t\t//当对方选择以视频方式接通时\r\n\t\t\t\tthis.$even.$on(\"notice_live_connectall\",(info)=>{\r\n\t\t\t\t\t//当前用户已在房间\r\n\t\t\t\t\tif(this.noticeRoom&&this.noticeRoom.info != undefined){\r\n\t\t\t\t\t\tvar msg = {\r\n\t\t\t\t\t\t\tto: info.From.Guid,\r\n\t\t\t\t\t\t\tinfo: {\r\n\t\t\t\t\t\t\t\tPlate: this.noticeRoom.info.plate,\r\n\t\t\t\t\t\t\t\tCode: this.noticeRoom.info.code,\r\n\t\t\t\t\t\t\t\tVideoType:  info.Data.Message.Answer\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttype: ''\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.noticeEx.send(msg.to, msg.info);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//当前用户不在房间\r\n\t\t\t\t\t\tthis.createRoom(info)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//当房间已建立\r\n\t\t\t\tthis.$even.$on(\"user_room_create\",(info,notice)=>{\r\n\t\t\t\t\tvar msg = {\r\n\t\t\t\t\t\tto: info.From.Guid,\r\n\t\t\t\t\t\tinfo: {\r\n\t\t\t\t\t\t\tPlate: notice.info.plate,\r\n\t\t\t\t\t\t\tCode: notice.info.code,\r\n\t\t\t\t\t\t\tVideoType: info.Data.Message.Answer,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttype: ''\r\n\t\t\t\t\t};\t\r\n\t\t\t\t\tthis.noticeEx.send(msg.to, msg.info);\r\n\t\t\t\t});\r\n\t\t\t\t//收到创建房间指令\r\n\t\t\t\tthis.$even.$on(\"notice_room_build\",(info)=>{\r\n\t\t\t\t\tthis.createRoom(info,{plate:info.Data.Message.Plate})\r\n\t\t\t\t});\r\n\t\t\t\t//收到加入房间指令\r\n\t\t\t\tthis.$even.$on(\"notice_room_join\",(info)=>{\r\n\t\t\t\t\tlet ready = (token) => {\r\n\t\t\t\t\t\tlet rtc = self.userRtcs[info.Data.Accept.Guid].desk;\r\n\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\ttype:'token',\r\n\t\t\t\t\t\t\ttoken:token,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//检查是否存在等待接收的token\r\n\t\t\t\t\t\tif(this.tokens[info.From.Guid]){\r\n\t\t\t\t\t\t\trtc.addIceCandidate(this.tokens[info.From.Guid]);\r\n\t\t\t\t\t\t\tdelete this.tokens[info.From.Guid];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.noticeRoom.send(info.Data.Accept.Guid, sendMsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.createRtcSender(info.Data.Accept.Guid,'desk',ready).then((offer)=>{\r\n\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\ttype:'push',\r\n\t\t\t\t\t\t\tjsep:offer,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.noticeRoom.send(info.Data.Accept.Guid, sendMsg);\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\t//互换token指令\r\n\t\t\t\tthis.$even.$on(\"notice_channel_token\",(info)=>{\r\n\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\t//当这条消息接受时，有可能本地应答信令还未创建完成\r\n\t\t\t\t\tif(this.userRtcs[info.From.Guid]){\r\n\t\t\t\t\t\tlet rtc = this.userRtcs[info.From.Guid].desk;\r\n\t\t\t\t\t\trtc.addIceCandidate(rec.token);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//暂存\r\n\t\t\t\t\t\tthis.tokens[info.From.Guid] = rec.token;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//收到退出房间指令\r\n\t\t\t\tthis.$even.$on(\"notice_room_leave\",(info)=>{\r\n\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tmessage: info.Data.Accept.Name + '退出视频！',\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet rtc = this.userRtcs[info.Data.Accept.Guid].desk;\r\n\t\t\t\t\trtc.socure.close();\r\n\t\t\t\t\tdelete this.userRtcs[info.Data.Accept.Guid];\r\n\t\t\t\t\tvar remove = document.getElementById(info.Data.Accept.Guid);\r\n\t\t\t\t\tremove.parentNode.removeChild(remove);\r\n\t\t\t\t\tdelete this.userStreams[info.Data.Accept.Guid]\r\n\t\t\t\t});\r\n\t\t\t\t//当收到push消息\r\n\t\t\t\tthis.$even.$on(\"notice_channel_push\",(info)=>{\r\n\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\tlet ready = (token) => {\r\n\t\t\t\t\t\tlet rtc = self.userRtcs[info.From.Guid].desk;\r\n\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\t\ttype:'token',\r\n\t\t\t\t\t\t\t\ttoken:token\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//检查是否存在等待接收的token\r\n\t\t\t\t\t\tif(this.tokens[info.From.Guid]){\r\n\t\t\t\t\t\t\trtc.addIceCandidate(this.tokens[info.From.Guid]);\r\n\t\t\t\t\t\t\tdelete this.tokens[info.From.Guid];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.noticeRoom.send(info.From.Guid, sendMsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.createRtcRevice(info.From.Guid,'desk',ready).then((rtc)=>{\r\n\t\t\t\t\t\trtc.createAnswer(rec.jsep).then((answer)=>{\r\n\t\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\t\t\ttype:'subscribe',\r\n\t\t\t\t\t\t\t\t\tjsep:answer,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.noticeRoom.send(info.From.Guid, sendMsg);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\t//当收到订阅消息\r\n\t\t\t\tthis.$even.$on(\"notice_channel_subscribe\",(info)=>{\r\n\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\tlet rtc = this.userRtcs[info.From.Guid].desk;\r\n\t\t\t\t\trtc.setRemote(rec.jsep)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t\tthis.evens();\r\n\t\t}\r\n\t}\n</script>\n\n<style>\n</style>\n"]}]}