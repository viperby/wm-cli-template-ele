{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\thread-loader\\dist\\cjs.js!D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js!D:\\GaeaProject\\jpn_medical_web\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\GaeaProject\\jpn_medical_web\\utils\\noticeSDK\\index.js","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\utils\\noticeSDK\\index.js","mtime":1592967417498},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOi9HYWVhUHJvamVjdC9qcG5fbWVkaWNhbF93ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkQ6L0dhZWFQcm9qZWN0L2pwbl9tZWRpY2FsX3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkQ6L0dhZWFQcm9qZWN0L2pwbl9tZWRpY2FsX3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwoKLyoNCiAqIEBhdXRob3IgeXV6eQ0KICogQHZlcnNpb24gMS4wLjANCiAqIEBkYXRlIDIwMjAuNC4xNQ0KICogQHRvZG8gYWJvdXQgaW5kZXBlbmRlbnQgQVBJIHJlcXVlc3RzLGF4aW9zIGluIGN1cnJlbnQgZGVwZW5kZW50IGVudmlyb25tZW50DQoqLwppbXBvcnQgY29uc2hvdyBmcm9tICcuL2NvbnNvbGUuanMnOwppbXBvcnQgYXhpb3MsIHsgbm90aWNlR2V0IH0gZnJvbSAnLi9heGlvcy5qcyc7Cgp2YXIgTm90aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBOb3RpY2Uob3B0aW9uLCBjb21wbGF0ZSkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE5vdGljZSk7CgogICAgdGhpcy50dGwgPSBmYWxzZSwgdGhpcy5pbmZvID0gewogICAgICBzZXJ2ZTogIiIsCiAgICAgIHBsYXRlOiAiIiwKICAgICAgY29kZTogIiIsCiAgICAgIHRva2VuOiAiIiwKICAgICAgdXNlcjogewogICAgICAgIGd1aWQ6ICIiLAogICAgICAgIG5hbWU6ICIiCiAgICAgIH0KICAgIH07CiAgICB0aGlzLnNvY3VyZSA9IG51bGw7CgogICAgaWYgKG9wdGlvbikgewogICAgICB0aGlzLmNvbmYob3B0aW9uKTsKICAgICAgaWYgKGNvbXBsYXRlKSB0aGlzLmNvbXBsYXRlID0gY29tcGxhdGU7CiAgICB9CiAgfQogIC8qIEB0eXBlIGludGVyZmFjZQ0KICAgKiBAcmVtYWtzIFRoaXMgaXMgYW4gaW50ZXJmYWNlIGNhbGxlZCB3aGVuIHRoZSBvbm9wZW4gZXZlbiBvZiBXUyBpcyB0cmlnZ2VyZWQNCiAgKi8KCgogIF9jcmVhdGVDbGFzcyhOb3RpY2UsIFt7CiAgICBrZXk6ICJjb21wbGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcGxhdGUoX2NvbXBsYXRlKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBpZiAoX2NvbXBsYXRlKSByZXNvbHZlKHNlbGYpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtZXNzYWdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBtZXNzYWdlKGUpIHt9CiAgfSwgewogICAga2V5OiAiY2xvc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICBpZiAodGhpcy5zb2N1cmUpIHRoaXMuc29jdXJlLmNsb3NlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVsYXkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbGF5KHRvLCBpbmZvLCB0eXBlKSB7CiAgICAgIGlmICghaW5mbykgcmV0dXJuOwogICAgICB2YXIgbXNnID0gIiI7CgogICAgICBpZiAodHlwZW9mIGluZm8gIT09ICJzdHJpbmciKSB7CiAgICAgICAgbXNnID0gSlNPTi5zdHJpbmdpZnkoaW5mbyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbXNnID0gaW5mbzsKICAgICAgfQoKICAgICAgdmFyIHJlbGF5ZXIgPSB0aGlzLnJlbGF5ZXIodG8sIG1zZywgdHlwZSk7CgogICAgICBpZiAoIXRoaXMuc29jdXJlKSB7CiAgICAgICAgY29uc2hvdy5lcnJvcigid3MgaXMgVW5pbnN0YW5jZWQgIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLnNvY3VyZS5zZW5kKEpTT04uc3RyaW5naWZ5KHJlbGF5ZXIpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWxheWVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWxheWVyKHRvLCBtc2csIHR5cGUpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAiVG9rZW4iOiB0aGlzLmluZm8udG9rZW4sCiAgICAgICAgIlR5cGUiOiAicmVsYXkiLAogICAgICAgICJGcm9tIjogewogICAgICAgICAgIk5hbWUiOiB0aGlzLmluZm8udXNlci5uYW1lLAogICAgICAgICAgIkd1aWQiOiB0aGlzLmluZm8udXNlci5ndWlkCiAgICAgICAgfSwKICAgICAgICAiRGF0YSI6IHsKICAgICAgICAgICJNZXNzYWdlIjogbXNnLAogICAgICAgICAgIkFjY2VwdCI6IHsKICAgICAgICAgICAgIkd1aWQiOiB0bwogICAgICAgICAgfSwKICAgICAgICAgICJUeXBlIjogdHlwZQogICAgICAgIH0KICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZW5kIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kKHRvLCBpbmZvLCB0eXBlKSB7CiAgICAgIGlmICghaW5mbykgcmV0dXJuOwogICAgICB2YXIgbXNnID0gIiI7CgogICAgICBpZiAodHlwZW9mIGluZm8gIT09ICJzdHJpbmciKSB7CiAgICAgICAgbXNnID0gSlNPTi5zdHJpbmdpZnkoaW5mbyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbXNnID0gaW5mbzsKICAgICAgfQoKICAgICAgdmFyIHNlbmRlciA9IHRoaXMuc2VuZGVyKHRvLCBtc2csIHR5cGUpOwoKICAgICAgaWYgKCF0aGlzLnNvY3VyZSkgewogICAgICAgIGNvbnNob3cuZXJyb3IoIndzIGlzIFVuaW5zdGFuY2VkICIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5zb2N1cmUuc2VuZChKU09OLnN0cmluZ2lmeShzZW5kZXIpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZW5kZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmRlcih0bywgbXNnLCB0eXBlKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgIlRva2VuIjogdGhpcy5pbmZvLnRva2VuLAogICAgICAgICJUeXBlIjogImluZm8iLAogICAgICAgICJGcm9tIjogewogICAgICAgICAgIk5hbWUiOiB0aGlzLmluZm8udXNlci5uYW1lLAogICAgICAgICAgIkd1aWQiOiB0aGlzLmluZm8udXNlci5ndWlkCiAgICAgICAgfSwKICAgICAgICAiRGF0YSI6IHsKICAgICAgICAgICJNZXNzYWdlIjogbXNnLAogICAgICAgICAgIkFjY2VwdCI6IHsKICAgICAgICAgICAgIkd1aWQiOiB0bwogICAgICAgICAgfSwKICAgICAgICAgICJUeXBlIjogdHlwZSA/IHR5cGUgOiAiZ3JvdXAiCiAgICAgICAgfQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogInJlZ2lzdFJlYWR5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3RSZWFkeShkYXRhLCBjYikgewogICAgICBpZiAoY2IpIHsKICAgICAgICBjYihkYXRhKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImluaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIGlmICghV2ViU29ja2V0KSB7CiAgICAgICAgY29uc2hvdy5lcnJvcigiQ3VycmVudCBCcm93c2VyIElzJ3QgU3VwcG9ydCBXZWJTb2NrZXQhIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgc2VsZiA9IHRoaXM7IC8vZ2V0IG5vdGljZSB0b2tlbgoKICAgICAgdGhpcy5yZWdpc3RlckluZm8oKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBzZWxmLmluZm8udG9rZW4gPSByZXMuRGF0YS5Ub2tlbjsKICAgICAgICBzZWxmLmluZm8uY29kZSA9IHJlcy5EYXRhLkNvZGU7CiAgICAgICAgc2VsZi5yZWdpc3RSZWFkeShyZXMuRGF0YSk7CiAgICAgICAgc2VsZi5jb25uZWN0KCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc2hvdy5lcnJvcigiVGhlIE5vdGljZVNlcnZlciBJcyBVbmxpbmUiKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29uZiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29uZihvcHRpb24pIHsKICAgICAgLy9zZXQgbm90aWNlIGluZm8KICAgICAgdGhpcy5pbmZvLnNlcnZlID0gb3B0aW9uLnNlcnZlOwogICAgICB0aGlzLmluZm8ucGxhdGUgPSBvcHRpb24ucGxhdGU7CiAgICAgIHRoaXMuaW5mby51c2VyLm5hbWUgPSBvcHRpb24ubmFtZTsKICAgICAgdGhpcy5pbmZvLnVzZXIuZ3VpZCA9IG9wdGlvbi51c2VyOwogICAgICB0aGlzLmluZm8uY29kZSA9IG9wdGlvbi5jb2RlOwogICAgICB0aGlzLnR0bCA9IG9wdGlvbi5pc1RUTDsgLy9zZXQgbm90aWNlIHJlcXVlc3QKCiAgICAgIHZhciBwcmV4ID0gb3B0aW9uLmlzVFRMID8gImh0dHBzOi8vIiA6ICJodHRwOi8vIjsKICAgICAgYXhpb3Mubm90aWNlLnNlcnZlID0gcHJleCArIG9wdGlvbi5zZXJ2ZTsKICAgICAgdGhpcy5pbml0KHRoaXMuaW5mbyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29ubmVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29ubmVjdCgpIHsKICAgICAgaWYgKCF0aGlzLmluZm8udG9rZW4pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdmFyIHByZXggPSB0aGlzLnR0bCA/ICJ3c3M6Ly8iIDogIndzOi8vIjsKICAgICAgdGhpcy5zb2N1cmUgPSBuZXcgV2ViU29ja2V0KHByZXggKyB0aGlzLmluZm8uc2VydmUgKyAiL25vdGljZS93cy9zdWJzY3JpYmU/dG9rZW49IiArIHRoaXMuaW5mby50b2tlbik7CgogICAgICB0aGlzLnNvY3VyZS5vbm9wZW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgc2VsZi5jb21wbGF0ZShzZWxmKTsKICAgICAgfTsKCiAgICAgIHRoaXMuc29jdXJlLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKGUuZGF0YSk7CiAgICAgICAgc2VsZi5tZXNzYWdlKGRhdGEpOwogICAgICB9OwoKICAgICAgdGhpcy5zb2N1cmUuY2xvc2UgPSBmdW5jdGlvbiAoZSkgey8vc2VsZi5jbG9zZSgpOwogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogInJlZ2lzdGVySW5mbyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZ2lzdGVySW5mbyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcGFyOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHBhciA9IHsKICAgICAgICAgICAgICAgICAgdXNlcjogdGhpcy5pbmZvLnVzZXIuZ3VpZCwKICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5pbmZvLnVzZXIubmFtZSwKICAgICAgICAgICAgICAgICAgcGxhdGU6IHRoaXMuaW5mby5wbGF0ZSwKICAgICAgICAgICAgICAgICAgY29kZTogdGhpcy5pbmZvLmNvZGUKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBub3RpY2VHZXQoJy9ub3RpY2UvYXBpL3JlZ2lzdGVyL2N1c3RvbWVyJywgcGFyKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQuc2VudCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiByZWdpc3RlckluZm8oKSB7CiAgICAgICAgcmV0dXJuIF9yZWdpc3RlckluZm8uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlZ2lzdGVySW5mbzsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIE5vdGljZTsKfSgpOwoKZXhwb3J0IGRlZmF1bHQgTm90aWNlOw=="},{"version":3,"sources":["D:/GaeaProject/jpn_medical_web/utils/noticeSDK/index.js"],"names":["conshow","axios","noticeGet","Notice","option","complate","ttl","info","serve","plate","code","token","user","guid","name","socure","conf","self","Promise","resolve","reject","e","close","to","type","msg","JSON","stringify","relayer","error","send","sender","data","cb","WebSocket","registerInfo","then","res","Data","Token","Code","registReady","connect","catch","isTTL","prex","notice","init","onopen","onmessage","parse","message","par"],"mappings":"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","sourcesContent":["/*\r\n * @author yuzy\r\n * @version 1.0.0\r\n * @date 2020.4.15\r\n * @todo about independent API requests,axios in current dependent environment\r\n*/\r\nimport conshow from './console.js'\r\nimport axios,{noticeGet} from './axios.js'\r\n\r\nclass Notice {\r\n\tconstructor(option,complate) {\r\n\t\tthis.ttl = false,\r\n\t\tthis.info = {\r\n\t\t\tserve:\"\",\r\n\t\t\tplate:\"\",\r\n\t\t\tcode:\"\",\r\n\t\t\ttoken:\"\",\r\n\t\t\tuser:{\r\n\t\t\t\tguid:\"\",\r\n\t\t\t\tname:\"\",\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.socure = null;\r\n\t\tif(option){\r\n\t\t\tthis.conf(option)\r\n\t\t\tif(complate)\r\n\t\t\t\tthis.complate = complate;\r\n\t\t}\r\n\t}\r\n\t/* @type interface\r\n\t * @remaks This is an interface called when the onopen even of WS is triggered\r\n\t*/\r\n\tcomplate(complate){\r\n\t\tlet self = this;\r\n\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\tif(complate)\r\n\t\t\t\tresolve(self);\r\n\t\t})\r\n\t}\r\n\tmessage(e){\r\n\t\t\r\n\t}\r\n\tclose(){\r\n\t\tif(this.socure)\r\n\t\t\tthis.socure.close();\r\n\t}\r\n\trelay(to,info,type){\r\n\t\tif(!info)return;\r\n\t\tlet msg = \"\";\r\n\t\tif(typeof info !== \"string\"){\r\n\t\t\tmsg = JSON.stringify(info)\r\n\t\t}else{\r\n\t\t\tmsg = info\r\n\t\t}\r\n\t\tlet relayer = this.relayer(to,msg,type)\r\n\t\tif(!this.socure){\r\n\t\t\tconshow.error(\"ws is Uninstanced \")\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.socure.send(JSON.stringify(relayer))\t\t\r\n\t}\r\n\trelayer(to,msg,type){\r\n\t\treturn {\r\n\t\t\t\"Token\":this.info.token,\r\n\t\t\t\"Type\":\"relay\",\r\n\t\t\t\"From\":{\"Name\":this.info.user.name,\"Guid\":this.info.user.guid},\r\n\t\t\t\"Data\":{\r\n\t\t\t\t\"Message\":msg,\r\n\t\t\t\t\"Accept\":{\"Guid\":to},\r\n\t\t\t\t\"Type\":type,\r\n\t\t\t},\r\n\t\t}\t\r\n\t}\r\n\tsend(to,info,type){\r\n\t\tif(!info)return;\r\n\t\tlet msg = \"\";\r\n\t\tif(typeof info !== \"string\"){\r\n\t\t\tmsg = JSON.stringify(info)\r\n\t\t}else{\r\n\t\t\tmsg = info\r\n\t\t}\r\n\t\tlet sender = this.sender(to,msg,type)\r\n\t\tif(!this.socure){\r\n\t\t\tconshow.error(\"ws is Uninstanced \")\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.socure.send(JSON.stringify(sender))\t\t\r\n\t}\r\n\tsender(to,msg,type){\r\n\t\treturn {\r\n\t\t\t\"Token\":this.info.token,\r\n\t\t\t\"Type\":\"info\",\r\n\t\t\t\"From\":{\"Name\":this.info.user.name,\"Guid\":this.info.user.guid},\r\n\t\t\t\"Data\":{\r\n\t\t\t\t\"Message\":msg,\r\n\t\t\t\t\"Accept\":{\"Guid\":to},\r\n\t\t\t\t\"Type\":type?type:\"group\",\r\n\t\t\t},\r\n\t\t}\t\r\n\t}\r\n\tregistReady(data,cb){\r\n\t\tif(cb){\r\n\t\t\tcb(data)\r\n\t\t}\r\n\t}\r\n\tinit(){\r\n\t\tif(!WebSocket){\r\n\t\t\tconshow.error(\"Current Browser Is't Support WebSocket!\")\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet self = this;\r\n\t\t//get notice token\r\n\t\tthis.registerInfo().then((res)=>{\r\n\t\t\tself.info.token = res.Data.Token;\r\n\t\t\tself.info.code = res.Data.Code;\r\n\t\t\tself.registReady(res.Data);\r\n\t\t\tself.connect();\r\n\t\t}).catch((e)=>{\r\n\t\t\tconshow.error(\"The NoticeServer Is Unline\")\r\n\t\t})\r\n\t}\r\n\tconf(option){\r\n\t\t//set notice info\r\n\t\tthis.info.serve = option.serve;\r\n\t\tthis.info.plate = option.plate;\r\n\t\tthis.info.user.name = option.name;\r\n\t\tthis.info.user.guid = option.user;\r\n\t\tthis.info.code = option.code;\r\n\t\tthis.ttl = option.isTTL;\r\n\t\t//set notice request\r\n\t\tlet prex = option.isTTL?\"https://\":\"http://\";\r\n\t\taxios.notice.serve = prex+option.serve;\r\n\t\tthis.init(this.info);\r\n\t}\r\n\tconnect(){\r\n\t\tif(!this.info.token){\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet self = this;\r\n\t\tlet prex = this.ttl?\"wss://\":\"ws://\";\r\n\t\tthis.socure = new WebSocket(prex+this.info.serve+\"/notice/ws/subscribe?token=\"+this.info.token);\r\n\t\tthis.socure.onopen = ()=>{\r\n\t\t\tself.complate(self);\r\n\t\t}\r\n\t\tthis.socure.onmessage = (e)=>{\r\n\t\t\tlet data = JSON.parse(e.data)\r\n\t\t\tself.message(data)\r\n\t\t}\r\n\t\tthis.socure.close = (e) => {\r\n\t\t\t//self.close();\r\n\t\t}\r\n\t}\r\n\tasync registerInfo(){\r\n\t\tlet par = {\r\n\t\t\tuser:this.info.user.guid,\r\n\t\t\tname:this.info.user.name,\r\n\t\t\tplate:this.info.plate,\r\n\t\t\tcode:this.info.code\r\n\t\t};\r\n\t\treturn await noticeGet('/notice/api/register/customer',par);\r\n\t}\r\n\t\r\n}\r\nexport default Notice;"]}]}