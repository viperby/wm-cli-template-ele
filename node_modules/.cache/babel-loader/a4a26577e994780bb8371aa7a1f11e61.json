{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js!D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GaeaProject\\jpn_medical_web\\pages\\common\\room.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\pages\\common\\room.vue","mtime":1591969351743},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L0dhZWFQcm9qZWN0L2pwbl9tZWRpY2FsX3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkQ6L0dhZWFQcm9qZWN0L2pwbl9tZWRpY2FsX3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB2aWRlb0VsZW1lbnQgZnJvbSAnQC9wYWdlcy9jb21tb24vdmlkZW9FbGVtZW50LnZ1ZSc7CmltcG9ydCBOb3RpY2VTREsgZnJvbSAnQC91dGlscy9ub3RpY2VTREsvaW5kZXguanMnOwppbXBvcnQgUnRjU0RLIGZyb20gJ0AvdXRpbHMvcnRjU0RLL3J0Yy5qcyc7CmltcG9ydCBjb25mIGZyb20gJ0AvY29uZi9jb25mLmpzJzsKaW1wb3J0IHsgbWFrZUd1aWQgfSBmcm9tICcuLi8uLi9zcmMvdXRpbHMvbWFrZUd1aWQuanMnOwppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwTXV0YXRpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCBub3RpY2UgZnJvbSAnQC91dGlscy9taXhpbnMvbm90aWNlLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcFN0YXRlKFsidUluZm8iXSkpLCBtYXBTdGF0ZShbIm5vdGljZVJvb20iXSkpLAogIG1peGluczogW25vdGljZV0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJTdHJlYW1zOiB7fSwKICAgICAgdXNlclJ0Y3M6IHt9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgY2hlY2tNZWRpYTogZnVuY3Rpb24gY2hlY2tNZWRpYSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBtZWRpYURldmljZXM6IG5hdmlnYXRvciAhPSB1bmRlZmluZWQgJiYgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyAhPSB1bmRlZmluZWQKICAgICAgfTsKICAgIH0sCiAgICBjcmVhdGVMb2NhbFN0ZWFtOiBmdW5jdGlvbiBjcmVhdGVMb2NhbFN0ZWFtKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuY2hlY2tNZWRpYSgpLm1lZGlhRGV2aWNlcykgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsKICAgICAgICAgICAgICAgICAgYXVkaW86IHRydWUsCiAgICAgICAgICAgICAgICAgIHZpZGVvOiB7CiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHsKICAgICAgICAgICAgICAgICAgICAgIGlkZWFsOiAxMjgwCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHsKICAgICAgICAgICAgICAgICAgICAgIGlkZWFsOiA3MjAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNyZWF0ZVJ0Y1NlbmRlcjogZnVuY3Rpb24gY3JlYXRlUnRjU2VuZGVyKHVpZCwgdHlwZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciB0aGF0LCBydGMsIHN0cmVhbSwgdmlkZW8sIHBhcmVudEVsZW1lbnQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRoYXQgPSBfdGhpczI7CiAgICAgICAgICAgICAgICBydGMgPSBuZXcgUnRjU0RLKHsKICAgICAgICAgICAgICAgICAgc2VydmU6ICJzdHVuOnN0dW4uc3R1bnByb3RvY29sLm9yZzozNDc4IgogICAgICAgICAgICAgICAgfSk7IC8vcnRjLnNlbmRPZmZlciA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMyLmNoZWNrTWVkaWEoKS5tZWRpYURldmljZXMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy/muIXnqbrlhoXlrrkKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2NhbFN0cmVhbScpLmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5jcmVhdGVMb2NhbFN0ZWFtKCk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHN0cmVhbSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpOwogICAgICAgICAgICAgICAgdmlkZW8ud2lkdGggPSAzMDA7CiAgICAgICAgICAgICAgICB2aWRlby5oZWlnaHQgPSAzMDA7CiAgICAgICAgICAgICAgICB2aWRlby5hdXRvcGxheSA9IHRydWU7CiAgICAgICAgICAgICAgICB2aWRlby5wbGF5c2lubGluZSA9IHRydWU7CiAgICAgICAgICAgICAgICB2aWRlby5jb250cm9scyA9IHRydWU7CiAgICAgICAgICAgICAgICB2aWRlby5zcmNPYmplY3QgPSBzdHJlYW07CiAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImxvY2FsU3RyZWFtIik7CiAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHZpZGVvKTsKICAgICAgICAgICAgICAgIHJ0Yy5hZGRTdGVhbShzdHJlYW0pOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgcnRjLmpvaW4gPSBmdW5jdGlvbiAoc3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi4kc2V0KHRoYXQudXNlclN0cmVhbXMsIHVpZCwgc3RyZWFtLnN0cmVhbSk7CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIF90aGlzMi5zZXRVc2VyUnRjcyhydGMsIHVpZCwgdHlwZSk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIHJldHVybiBydGMuY3JlYXRlT2ZmZXIoewogICAgICAgICAgICAgICAgICBvZmZlclRvUmVjZWl2ZVZpZGVvOiB0cnVlLAogICAgICAgICAgICAgICAgICBvZmZlclRvUmVjZWl2ZUF1ZGlvOiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIuc2VudCk7CgogICAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzZXRVc2VyUnRjczogZnVuY3Rpb24gc2V0VXNlclJ0Y3MocnRjLCB1aWQsIHR5cGUpIHsKICAgICAgaWYgKCF0aGlzLnVzZXJSdGNzW3VpZF0pIHsKICAgICAgICB0aGlzLnVzZXJSdGNzW3VpZF0gPSBuZXcgT2JqZWN0KCk7CiAgICAgIH0KCiAgICAgIHRoaXMudXNlclJ0Y3NbdWlkXVt0eXBlXSA9IHJ0YzsKICAgIH0sCiAgICBjcmVhdGVSb29tOiBmdW5jdGlvbiBjcmVhdGVSb29tKGluZm8pIHsKICAgICAgLypsZXQgb2ZmZXIgPSB0aGlzLmNyZWF0ZVJ0Y1NlbmRlcihpbmZvLkRhdGEuQWNjZXB0Lkd1aWQsJ2Rlc2snKTsKICAgICAgbGV0IHJ0YyA9IHRoaXMudXNlclJ0Y3NbaW5mby5EYXRhLkFjY2VwdC5HdWlkXS5kZXNrOwogICAgICBydGMucmVhZHkgPSAodG9rZW4pPT57CiAgICAgIAlsZXQgc2VuZE1zZyA9IHsKICAgICAgCQl0eXBlOidwdXNoJywKICAgICAgCQlqc2VwOm9mZmVyLAogICAgICAJCXRva2VuOnJ0Yy5jYW5kaWRhdGUKICAgICAgCX0KICAgICAgCXRoaXMubm90aWNlUm9vbS5zZW5kKGluZm8uRGF0YS5BY2NlcHQuR3VpZCwgc2VuZE1zZyk7CiAgICAgIH0qLwogICAgICB0aGlzLmluaXRSb29tKGluZm8pOwogICAgfSwKICAgIGNyZWF0ZVJ0Y1JldmljZTogZnVuY3Rpb24gY3JlYXRlUnRjUmV2aWNlKHVpZCwgdHlwZSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciB0aGF0LCBydGMsIHN0cmVhbSwgdmlkZW8sIHBhcmVudEVsZW1lbnQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRoYXQgPSBfdGhpczM7CiAgICAgICAgICAgICAgICBydGMgPSBuZXcgUnRjU0RLKHsKICAgICAgICAgICAgICAgICAgc2VydmU6ICJzdHVuOnN0dW4uc3R1bnByb3RvY29sLm9yZzozNDc4IgogICAgICAgICAgICAgICAgfSk7IC8vcnRjLnNvY3VyZS5hZGRUcmFuc2NlaXZlcignYXVkaW8nLCB7ICdkaXJlY3Rpb24nOiAncmVjdm9ubHknIH0pOwogICAgICAgICAgICAgICAgLy9ydGMuc29jdXJlLmFkZFRyYW5zY2VpdmVyKCd2aWRlbycsIHsgJ2RpcmVjdGlvbic6ICdyZWN2b25seScgfSk7CiAgICAgICAgICAgICAgICAvL3J0Yy5zZW5kT2ZmZXIgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBpZiAoIV90aGlzMy5jaGVja01lZGlhKCkubWVkaWFEZXZpY2VzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8v5riF56m65YaF5a65CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9jYWxTdHJlYW0nKS5pbm5lckhUTUwgPSAiIjsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuY3JlYXRlTG9jYWxTdGVhbSgpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBzdHJlYW0gPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIHZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTsKICAgICAgICAgICAgICAgIHZpZGVvLndpZHRoID0gMzAwOwogICAgICAgICAgICAgICAgdmlkZW8uaGVpZ2h0ID0gMzAwOwogICAgICAgICAgICAgICAgdmlkZW8uYXV0b3BsYXkgPSB0cnVlOwogICAgICAgICAgICAgICAgdmlkZW8ucGxheXNpbmxpbmUgPSB0cnVlOwogICAgICAgICAgICAgICAgdmlkZW8uY29udHJvbHMgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHZpZGVvLnNyY09iamVjdCA9IHN0cmVhbTsKICAgICAgICAgICAgICAgIHBhcmVudEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibG9jYWxTdHJlYW0iKTsKICAgICAgICAgICAgICAgIHBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodmlkZW8pOwogICAgICAgICAgICAgICAgcnRjLmFkZFN0ZWFtKHN0cmVhbSk7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBydGMuam9pbiA9IGZ1bmN0aW9uIChzdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImluIGpvaW4iLCBzdHJlYW0pOwoKICAgICAgICAgICAgICAgICAgX3RoaXMzLiRzZXQodGhhdC51c2VyU3RyZWFtcywgdWlkLCBzdHJlYW0uc3RyZWFtKTsgLy90aGF0LnVzZXJTdHJlYW1zW3VpZF09c3RyZWFtLnN0cmVhbTsKCgogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidGhhdCIsIHRoYXQudXNlclN0cmVhbXMpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBfdGhpczMuc2V0VXNlclJ0Y3MocnRjLCB1aWQsIHR5cGUpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICByZXR1cm4gcnRjOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0My5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGV2ZW5zOiBmdW5jdGlvbiBldmVucygpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICAvL+W9k+WvueaWuemAieaLqeS7peinhumikeaWueW8j+aOpemAmuaXtgogICAgICB0aGlzLiRldmVuLiRvbigibm90aWNlX2xpdmVfY29ubmVjdGFsbCIsIGZ1bmN0aW9uIChpbmZvKSB7CiAgICAgICAgLy/lvZPliY3nlKjmiLflt7LlnKjmiL/pl7QKICAgICAgICBpZiAoX3RoaXM0Lm5vdGljZVJvb20uaW5mbyAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgICAgIHRvOiBpbmZvLkZyb20uR3VpZCwKICAgICAgICAgICAgaW5mbzogewogICAgICAgICAgICAgIFBsYXRlOiBfdGhpczQubm90aWNlUm9vbS5pbmZvLnBsYXRlLAogICAgICAgICAgICAgIENvZGU6IF90aGlzNC5ub3RpY2VSb29tLmluZm8uY29kZSwKICAgICAgICAgICAgICBWaWRlb1R5cGU6IGluZm8uRGF0YS5NZXNzYWdlLkFuc3dlcgogICAgICAgICAgICB9LAogICAgICAgICAgICB0eXBlOiAnJwogICAgICAgICAgfTsKCiAgICAgICAgICBfdGhpczQubm90aWNlRXguc2VuZChtc2cudG8sIG1zZy5pbmZvKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy/lvZPliY3nlKjmiLfkuI3lnKjmiL/pl7QKICAgICAgICAgIF90aGlzNC5jcmVhdGVSb29tKGluZm8pOwogICAgICAgIH0KICAgICAgfSk7IC8v5b2T5oi/6Ze05bey5bu656uLCgogICAgICB0aGlzLiRldmVuLiRvbigidXNlcl9yb29tX2NyZWF0ZSIsIGZ1bmN0aW9uIChpbmZvLCBub3RpY2UpIHsKICAgICAgICB2YXIgbXNnID0gewogICAgICAgICAgdG86IGluZm8uRnJvbS5HdWlkLAogICAgICAgICAgaW5mbzogewogICAgICAgICAgICBQbGF0ZTogbm90aWNlLmluZm8ucGxhdGUsCiAgICAgICAgICAgIENvZGU6IG5vdGljZS5pbmZvLmNvZGUsCiAgICAgICAgICAgIFZpZGVvVHlwZTogaW5mby5EYXRhLk1lc3NhZ2UuQW5zd2VyCiAgICAgICAgICB9LAogICAgICAgICAgdHlwZTogJycKICAgICAgICB9OwoKICAgICAgICBfdGhpczQubm90aWNlRXguc2VuZChtc2cudG8sIG1zZy5pbmZvKTsKICAgICAgfSk7IC8v5pS25Yiw5Yib5bu65oi/6Ze05oyH5LukCgogICAgICB0aGlzLiRldmVuLiRvbigibm90aWNlX3Jvb21fYnVpbGQiLCBmdW5jdGlvbiAoaW5mbykgewogICAgICAgIF90aGlzNC5jcmVhdGVSb29tKGluZm8pOwogICAgICB9KTsgLy/mlLbliLDliqDlhaXmiL/pl7TmjIfku6QKCiAgICAgIHRoaXMuJGV2ZW4uJG9uKCJub3RpY2Vfcm9vbV9qb2luIiwgZnVuY3Rpb24gKGluZm8pIHsKICAgICAgICBfdGhpczQuY3JlYXRlUnRjU2VuZGVyKGluZm8uRGF0YS5BY2NlcHQuR3VpZCwgJ2Rlc2snKS50aGVuKGZ1bmN0aW9uIChvZmZlcikgewogICAgICAgICAgLy/lj5HpgIHmnKzlnLDkv6Hku6QKICAgICAgICAgIHZhciBydGMgPSBfdGhpczQudXNlclJ0Y3NbaW5mby5EYXRhLkFjY2VwdC5HdWlkXS5kZXNrOwoKICAgICAgICAgIHJ0Yy5yZWFkeSA9IGZ1bmN0aW9uICh0b2tlbikgewogICAgICAgICAgICB2YXIgc2VuZE1zZyA9IHsKICAgICAgICAgICAgICB0eXBlOiAncHVzaCcsCiAgICAgICAgICAgICAganNlcDogb2ZmZXIsCiAgICAgICAgICAgICAgdG9rZW46IHJ0Yy5jYW5kaWRhdGUKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIF90aGlzNC5ub3RpY2VSb29tLnNlbmQoaW5mby5EYXRhLkFjY2VwdC5HdWlkLCBzZW5kTXNnKTsKICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgIH0pOyAvL+aUtuWIsOmAgOWHuuaIv+mXtOaMh+S7pAoKICAgICAgdGhpcy4kZXZlbi4kb24oIm5vdGljZV9yb29tX2xlYXZlIiwgZnVuY3Rpb24gKGluZm8pIHsKICAgICAgICBfdGhpczQuJG5vdGlmeSh7CiAgICAgICAgICB0aXRsZTogJ+aPkOekuicsCiAgICAgICAgICBtZXNzYWdlOiBpbmZvLkRhdGEuQWNjZXB0Lk5hbWUgKyAn6YCA5Ye66KeG6aKR77yBJwogICAgICAgIH0pOwoKICAgICAgICB2YXIgcmVtb3ZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaW5mby5EYXRhLkFjY2VwdC5HdWlkKTsKICAgICAgICByZW1vdmUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChyZW1vdmUpOwogICAgICAgIGRlbGV0ZSBfdGhpczQudXNlclN0cmVhbXNbaW5mby5EYXRhLkFjY2VwdC5HdWlkXTsKICAgICAgfSk7IC8v5b2T5pS25YiwcHVzaOa2iOaBrwoKICAgICAgdGhpcy4kZXZlbi4kb24oIm5vdGljZV9jaGFubmVsX3B1c2giLCBmdW5jdGlvbiAoaW5mbykgewogICAgICAgIHZhciByZWMgPSBpbmZvLkRhdGEuTWVzc2FnZTsKCiAgICAgICAgX3RoaXM0LmNyZWF0ZVJ0Y1JldmljZShpbmZvLkZyb20uR3VpZCwgJ2Rlc2snKS50aGVuKGZ1bmN0aW9uIChydGMpIHsKICAgICAgICAgIHJ0Yy5jcmVhdGVBbnN3ZXIocmVjLmpzZXApLnRoZW4oZnVuY3Rpb24gKGFuc3dlcikgewogICAgICAgICAgICAvL+W6lOetlOWvueaWueS/oeS7pAogICAgICAgICAgICBydGMucmVhZHkgPSBmdW5jdGlvbiAodG9rZW4pIHsKICAgICAgICAgICAgICB2YXIgc2VuZE1zZyA9IHsKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWJzY3JpYmUnLAogICAgICAgICAgICAgICAganNlcDogYW5zd2VyLAogICAgICAgICAgICAgICAgdG9rZW46IHJ0Yy5jYW5kaWRhdGUKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHJ0Yy5hZGRJY2VDYW5kaWRhdGUocmVjLnRva2VuKTsKCiAgICAgICAgICAgICAgX3RoaXM0Lm5vdGljZVJvb20uc2VuZChpbmZvLkZyb20uR3VpZCwgc2VuZE1zZyk7CiAgICAgICAgICAgIH07CiAgICAgICAgICB9KTsKCiAgICAgICAgICBydGMucmVhZHkgPSBmdW5jdGlvbiAodG9rZW4pIHsKICAgICAgICAgICAgdmFyIHNlbmRNc2cgPSB7CiAgICAgICAgICAgICAgdHlwZTogJ3JlYWR5JywKICAgICAgICAgICAgICB0b2tlbjogdG9rZW4KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIF90aGlzNC5ub3RpY2VSb29tLnNlbmQoaW5mby5Gcm9tLkd1aWQsIHNlbmRNc2cpOwogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgICAgfSk7IC8v5b2T5pS25Yiw6K6i6ZiF5raI5oGvCgogICAgICB0aGlzLiRldmVuLiRvbigibm90aWNlX2NoYW5uZWxfc3Vic2NyaWJlIiwgZnVuY3Rpb24gKGluZm8pIHsKICAgICAgICB2YXIgcmVjID0gaW5mby5EYXRhLk1lc3NhZ2U7CiAgICAgICAgdmFyIHJ0YyA9IF90aGlzNC51c2VyUnRjc1tpbmZvLkZyb20uR3VpZF0uZGVzazsKICAgICAgICBydGMuc2V0UmVtb3RlKHJlYy5qc2VwKTsKICAgICAgICBydGMuYWRkSWNlQ2FuZGlkYXRlKHJlYy50b2tlbik7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["room.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-card id=\"localStream\" style=\"display: inline-block;margin:10px\">\r\n\t\t</el-card>\r\n\t\t\r\n\t\t<videoElement v-for=\"(item,key,i) in userStreams\" :key=\"i\" :mid=\"key\" :stream=\"item\"></videoElement>\r\n\t</div>\n</template>\n\n<script>\r\n\timport videoElement from '@/pages/common/videoElement.vue'\r\n\timport NoticeSDK from '@/utils/noticeSDK/index.js'\r\n\timport RtcSDK from '@/utils/rtcSDK/rtc.js'\r\n\timport conf from '@/conf/conf.js'\r\n\timport {makeGuid} from '../../src/utils/makeGuid.js';\r\n\timport {mapState,mapMutations} from 'vuex'\r\n\timport notice from '@/utils/mixins/notice.js'\r\n\t\r\n\texport default {\r\n\t\tcomputed: {\r\n\t\t\t...mapState([\"uInfo\"]),\r\n\t\t\t...mapState([\"noticeRoom\"]),\r\n\t\t},\r\n\t\tmixins:[notice],\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tuserStreams:{},\r\n\t\t\t\tuserRtcs:{},\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tcheckMedia(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tmediaDevices:navigator != undefined && navigator.mediaDevices != undefined,\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync createLocalSteam() {\r\n\t\t\t\tif (!this.checkMedia().mediaDevices) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\treturn await navigator.mediaDevices.getUserMedia({\r\n\t\t\t\t\taudio: true,\r\n\t\t\t\t\tvideo: {\r\n\t\t\t\t\t\twidth: {\r\n\t\t\t\t\t\t\tideal: 1280\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\theight: {\r\n\t\t\t\t\t\t\tideal: 720\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync createRtcSender(uid, type) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet rtc = new RtcSDK({\r\n\t\t\t\t\tserve: \"stun:stun.stunprotocol.org:3478\"\r\n\t\t\t\t});\r\n\t\t\t\t//rtc.sendOffer = false;\r\n\t\t\t\tif (this.checkMedia().mediaDevices) {\r\n\t\t\t\t\t//清空内容\r\n\t\t\t\t\tdocument.getElementById('localStream').innerHTML = \"\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet stream = await this.createLocalSteam();\r\n\t\t\t\t\tconst video = document.createElement('video');\r\n\t\t\t\t\tvideo.width = 300;\r\n\t\t\t\t\tvideo.height = 300;\r\n\t\t\t\t\tvideo.autoplay = true;\r\n\t\t\t\t\tvideo.playsinline = true;\r\n\t\t\t\t\tvideo.controls = true;\r\n\t\t\t\t\tvideo.srcObject = stream;\r\n\t\t\t\t\tlet parentElement = document.getElementById(\"localStream\");\r\n\t\t\t\t\tparentElement.appendChild(video);\r\n\t\t\t\t\t\r\n\t\t\t\t\trtc.addSteam(stream);\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\trtc.join = (stream) => {\r\n\t\t\t\t\tthis.$set(that.userStreams, uid, stream.stream)\r\n\t\t\t\t}\r\n\t\t\t\tthis.setUserRtcs(rtc, uid, type);\r\n\t\t\t\treturn await rtc.createOffer({\r\n\t\t\t\t\tofferToReceiveVideo: true,\r\n\t\t\t\t\tofferToReceiveAudio: true\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsetUserRtcs(rtc,uid,type){\r\n\t\t\t\tif(!this.userRtcs[uid]){\r\n\t\t\t\t\tthis.userRtcs[uid] = new Object();\r\n\t\t\t\t}\r\n\t\t\t\tthis.userRtcs[uid][type] = rtc;\t\r\n\t\t\t},\r\n\t\t\tcreateRoom(info){\r\n\t\t\t\t/*let offer = this.createRtcSender(info.Data.Accept.Guid,'desk');\r\n\t\t\t\tlet rtc = this.userRtcs[info.Data.Accept.Guid].desk;\r\n\t\t\t\trtc.ready = (token)=>{\r\n\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\ttype:'push',\r\n\t\t\t\t\t\tjsep:offer,\r\n\t\t\t\t\t\ttoken:rtc.candidate\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.noticeRoom.send(info.Data.Accept.Guid, sendMsg);\r\n\t\t\t\t}*/\r\n\t\t\t\tthis.initRoom(info);\r\n\t\t\t},\r\n\t\t\tasync createRtcRevice(uid,type){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet rtc = new RtcSDK({serve:\"stun:stun.stunprotocol.org:3478\"});\r\n\t\t\t\t//rtc.socure.addTransceiver('audio', { 'direction': 'recvonly' });\r\n\t\t\t\t//rtc.socure.addTransceiver('video', { 'direction': 'recvonly' });\r\n\t\t\t\t//rtc.sendOffer = false;\r\n\t\t\t\tif(this.checkMedia().mediaDevices){\r\n\t\t\t\t\t//清空内容\r\n\t\t\t\t\tdocument.getElementById('localStream').innerHTML = \"\";\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet stream = await this.createLocalSteam();\r\n\t\t\t\t\tconst video = document.createElement('video');\r\n\t\t\t\t\tvideo.width = 300;\r\n\t\t\t\t\tvideo.height = 300;\r\n\t\t\t\t\tvideo.autoplay = true;\r\n\t\t\t\t\tvideo.playsinline = true;\r\n\t\t\t\t\tvideo.controls = false;\r\n\t\t\t\t\tvideo.srcObject = stream;\r\n\t\t\t\t\tlet parentElement = document.getElementById(\"localStream\");\r\n\t\t\t\t\tparentElement.appendChild(video);\r\n\t\t\t\t\trtc.addSteam(stream);\r\n\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\trtc.join=(stream)=>{\r\n\t\t\t\t\tconsole.log(\"in join\",stream)\r\n\t\t\t\t\tthis.$set(that.userStreams,uid,stream.stream)\r\n\t\t\t\t\t//that.userStreams[uid]=stream.stream;\r\n\t\t\t\t\tconsole.log(\"that\",that.userStreams)\r\n\t\t\t\t}\r\n\t\t\t\tthis.setUserRtcs(rtc,uid,type);\t\t\r\n\t\t\t\treturn await rtc;\r\n\t\t\t\t//return await rtc.createOffer({ offerToReceiveVideo: true, offerToReceiveAudio: true });\r\n\t\t\t},\r\n\t\t\tevens(){\r\n\t\t\t\t//当对方选择以视频方式接通时\r\n\t\t\t\tthis.$even.$on(\"notice_live_connectall\",(info)=>{\r\n\t\t\t\t\t//当前用户已在房间\r\n\t\t\t\t\tif(this.noticeRoom.info != undefined){\r\n\t\t\t\t\t\tvar msg = {\r\n\t\t\t\t\t\t\tto: info.From.Guid,\r\n\t\t\t\t\t\t\tinfo: {\r\n\t\t\t\t\t\t\t\tPlate: this.noticeRoom.info.plate,\r\n\t\t\t\t\t\t\t\tCode: this.noticeRoom.info.code,\r\n\t\t\t\t\t\t\t\tVideoType:  info.Data.Message.Answer\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttype: ''\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.noticeEx.send(msg.to, msg.info);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//当前用户不在房间\r\n\t\t\t\t\t\tthis.createRoom(info)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//当房间已建立\r\n\t\t\t\tthis.$even.$on(\"user_room_create\",(info,notice)=>{\r\n\t\t\t\t\tvar msg = {\r\n\t\t\t\t\t\tto: info.From.Guid,\r\n\t\t\t\t\t\tinfo: {\r\n\t\t\t\t\t\t\tPlate: notice.info.plate,\r\n\t\t\t\t\t\t\tCode: notice.info.code,\r\n\t\t\t\t\t\t\tVideoType: info.Data.Message.Answer,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttype: ''\r\n\t\t\t\t\t};\t\r\n\t\t\t\t\tthis.noticeEx.send(msg.to, msg.info);\r\n\t\t\t\t});\r\n\t\t\t\t//收到创建房间指令\r\n\t\t\t\tthis.$even.$on(\"notice_room_build\",(info)=>{\r\n\t\t\t\t\tthis.createRoom(info)\r\n\t\t\t\t});\r\n\t\t\t\t//收到加入房间指令\r\n\t\t\t\tthis.$even.$on(\"notice_room_join\",(info)=>{\r\n\t\t\t\t\tthis.createRtcSender(info.Data.Accept.Guid,'desk').then((offer)=>{\r\n\t\t\t\t\t\t//发送本地信令\r\n\t\t\t\t\t\tlet rtc = this.userRtcs[info.Data.Accept.Guid].desk;\r\n\t\t\t\t\t\trtc.ready = (token)=>{\r\n\t\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\t\ttype:'push',\r\n\t\t\t\t\t\t\t\tjsep:offer,\r\n\t\t\t\t\t\t\t\ttoken:rtc.candidate\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.noticeRoom.send(info.Data.Accept.Guid, sendMsg);\r\n\t\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\t//收到退出房间指令\r\n\t\t\t\tthis.$even.$on(\"notice_room_leave\",(info)=>{\r\n\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tmessage: info.Data.Accept.Name + '退出视频！',\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar remove = document.getElementById(info.Data.Accept.Guid);\r\n\t\t\t\t\tremove.parentNode.removeChild(remove);\r\n\t\t\t\t\tdelete this.userStreams[info.Data.Accept.Guid]\r\n\t\t\t\t});\r\n\t\t\t\t//当收到push消息\r\n\t\t\t\tthis.$even.$on(\"notice_channel_push\",(info)=>{\r\n\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.createRtcRevice(info.From.Guid,'desk').then((rtc)=>{\r\n\t\t\t\t\t\trtc.createAnswer(rec.jsep).then((answer)=>{\r\n\t\t\t\t\t\t\t//应答对方信令\r\n\t\t\t\t\t\t\trtc.ready=(token)=>{\r\n\t\t\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\t\t\t\ttype:'subscribe',\r\n\t\t\t\t\t\t\t\t\t\tjsep:answer,\r\n\t\t\t\t\t\t\t\t\t\ttoken:rtc.candidate\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\trtc.addIceCandidate(rec.token);\r\n\t\t\t\t\t\t\t\t\tthis.noticeRoom.send(info.From.Guid, sendMsg);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\trtc.ready = (token)=>{\r\n\t\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\t\ttype:'ready',\r\n\t\t\t\t\t\t\t\ttoken:token,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.noticeRoom.send(info.From.Guid, sendMsg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\t//当收到订阅消息\r\n\t\t\t\tthis.$even.$on(\"notice_channel_subscribe\",(info)=>{\r\n\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\tlet rtc = this.userRtcs[info.From.Guid].desk;\r\n\t\t\t\t\trtc.setRemote(rec.jsep)\r\n\t\t\t\t\trtc.addIceCandidate(rec.token);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\n</script>\n\n<style>\n</style>\n"],"sourceRoot":"pages/common"}]}