{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\thread-loader\\dist\\cjs.js!D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js!D:\\GaeaProject\\jpn_medical_web\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\GaeaProject\\jpn_medical_web\\utils\\rtcSDK\\rtc.js","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\utils\\rtcSDK\\rtc.js","mtime":1592397445550},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkQ6L0dhZWFQcm9qZWN0L2pwbl9tZWRpY2FsX3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkQ6L0dhZWFQcm9qZWN0L2pwbl9tZWRpY2FsX3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwoKdmFyIFJ0Y1NESyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gUnRjU0RLKG9wdGlvbikgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJ0Y1NESyk7CgogICAgdGhpcy5zZXJ2ZSA9ICIiOwogICAgdGhpcy5zb2N1cmUgPSBudWxsOwogICAgdGhpcy5jYW5kaWRhdGUgPSAiIjsKCiAgICBpZiAob3B0aW9uKSB7CiAgICAgIHRoaXMuY29uZihvcHRpb24pOwogICAgfQogIH0KCiAgX2NyZWF0ZUNsYXNzKFJ0Y1NESywgW3sKICAgIGtleTogImFkZFN0ZWFtIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRTdGVhbShzdHJlYW0pIHsKICAgICAgdGhpcy5zb2N1cmUuYWRkU3RyZWFtKHN0cmVhbSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYWRkSWNlQ2FuZGlkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRJY2VDYW5kaWRhdGUodG9rZW4pIHsKICAgICAgdGhpcy5zb2N1cmUuYWRkSWNlQ2FuZGlkYXRlKHRva2VuKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRSZW1vdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFJlbW90ZShhbnN3ZXIpIHsKICAgICAgdGhpcy5zb2N1cmUuc2V0UmVtb3RlRGVzY3JpcHRpb24oYW5zd2VyKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVBbnN3ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUFuc3dlcihvZmZlcikgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgc2VsZi5zb2N1cmUuc2V0UmVtb3RlRGVzY3JpcHRpb24ob2ZmZXIpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgc2VsZi5zb2N1cmUuY3JlYXRlQW5zd2VyKCkudGhlbihmdW5jdGlvbiAoYW5zd2VyKSB7CiAgICAgICAgICAgIHNlbGYuc29jdXJlLnNldExvY2FsRGVzY3JpcHRpb24oYW5zd2VyKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXNvbHZlKGFuc3dlcik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZU9mZmVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVPZmZlcihvcHRpb24pIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHNlbGYuc29jdXJlLmNyZWF0ZU9mZmVyKG9wdGlvbikudGhlbihmdW5jdGlvbiAob2ZmZXIpIHsKICAgICAgICAgIHNlbGYuc29jdXJlLnNldExvY2FsRGVzY3JpcHRpb24ob2ZmZXIpOwogICAgICAgICAgcmVzb2x2ZShvZmZlcik7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiam9pbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gam9pbihlKSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICByZXNvbHZlKGUpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWFkeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVhZHkoZSkge30KICB9LCB7CiAgICBrZXk6ICJpbml0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICB2YXIgdXJscyA9IFt7CiAgICAgICAgdXJsOiAidHVybjo4LjEyOS45LjIwMTozNDc4P3RyYW5zcG9ydD11ZHAiLAogICAgICAgIHVzZXJuYW1lOiAiYWRtaW4iLAogICAgICAgIGNyZWRlbnRpYWw6ICIxMDA1NDQiLAogICAgICAgIGNyZWRlbnRpYWxUeXBlOiAncGFzc3dvcmQnCiAgICAgIH1dOyAvL3RoaXMuc29jdXJlID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKHsgaWNlU2VydmVyczogW3sgdXJsczogdGhpcy5zZXJ2ZSB9XSB9KTsKCiAgICAgIHRoaXMuc29jdXJlID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKHsKICAgICAgICBpY2VTZXJ2ZXJzOiB1cmxzLAogICAgICAgIGljZVRyYW5zcG9ydFBvbGljeTogJ3JlbGF5JwogICAgICB9KTsKICAgICAgdGhpcy5zb2N1cmUuc2VuZE9mZmVyID0gZmFsc2U7CgogICAgICB0aGlzLnNvY3VyZS5vbmljZWNhbmRpZGF0ZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coIm9uaWNlY2FuZGlkYXRlIiwgZSk7CgogICAgICAgIGlmICghX3RoaXMuc29jdXJlLnNlbmRPZmZlcikgewogICAgICAgICAgX3RoaXMuc29jdXJlLnNlbmRPZmZlciA9IHRydWU7CgogICAgICAgICAgaWYgKGUuY2FuZGlkYXRlKSB7CiAgICAgICAgICAgIHNlbGYuY2FuZGlkYXRlID0gZS5jYW5kaWRhdGU7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIHNlbGYucmVhZHkoZS5jYW5kaWRhdGUpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICB0aGlzLnNvY3VyZS5vbmFkZHN0cmVhbSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coIm9uIGpvaW46IiwgZSk7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBzZWxmLmpvaW4oZSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgfQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogImNvbmYiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbmYob3B0aW9uKSB7CiAgICAgIHRoaXMuc2VydmUgPSBvcHRpb24uc2VydmU7CiAgICAgIHRoaXMucmVhZHkgPSBvcHRpb24ucmVhZHk7CiAgICAgIHRoaXMuam9pbiA9IG9wdGlvbi5qb2luOwogICAgICB0aGlzLmluaXQoKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBSdGNTREs7Cn0oKTsKCmV4cG9ydCBkZWZhdWx0IFJ0Y1NESzs="},{"version":3,"sources":["D:/GaeaProject/jpn_medical_web/utils/rtcSDK/rtc.js"],"names":["RtcSDK","option","serve","socure","candidate","conf","stream","addStream","token","addIceCandidate","answer","setRemoteDescription","offer","self","Promise","resolve","reject","then","createAnswer","setLocalDescription","createOffer","catch","e","urls","url","username","credential","credentialType","RTCPeerConnection","iceServers","iceTransportPolicy","sendOffer","onicecandidate","console","log","ready","onaddstream","join","init"],"mappings":"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","sourcesContent":["class RtcSDK {\r\n\tconstructor(option) {\r\n\t\tthis.serve = \"\";\r\n\t\tthis.socure = null;\r\n\t\tthis.candidate = \"\"\r\n\t\tif(option){\r\n\t\t\tthis.conf(option)\r\n\t\t}\r\n\t}\r\n\taddSteam(stream){\r\n\t\tthis.socure.addStream(stream);\r\n\t}\r\n\taddIceCandidate(token){\r\n\t\tthis.socure.addIceCandidate(token);\r\n\t}\r\n\tsetRemote(answer){\r\n\t\tthis.socure.setRemoteDescription(answer)\r\n\t}\r\n\tcreateAnswer(offer){\r\n\t\tlet self = this;\r\n\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\tself.socure.setRemoteDescription(offer).then(()=>{\r\n\t\t\t\tself.socure.createAnswer().then((answer)=>{\r\n\t\t\t\t\tself.socure.setLocalDescription(answer).then(()=>{\r\n\t\t\t\t\t\tresolve(answer);\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\tcreateOffer(option){\r\n\t\tlet self = this;\r\n\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\tself.socure.createOffer(option).then((offer)=>{\r\n\t\t\t\tself.socure.setLocalDescription(offer);\r\n\t\t\t\tresolve(offer);\r\n\t\t\t}).catch((e)=>{\r\n\t\t\t\treject(e)\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\tjoin(e){\r\n\t\tlet self = this;\r\n\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\tresolve(e);\r\n\t\t})\r\n\t}\r\n\tready(e){\r\n\t\t\r\n\t}\r\n\tinit(){\r\n\t\tlet self = this;\r\n\t\tlet urls = [\r\n\t\t{\r\n\t\t\turl: \"turn:8.129.9.201:3478?transport=udp\",\r\n\t\t\tusername: \"admin\", \r\n\t\t\tcredential: \"100544\",\r\n\t\t\tcredentialType: 'password'\r\n\t\t}]\r\n\t\t//this.socure = new RTCPeerConnection({ iceServers: [{ urls: this.serve }] });\r\n\t\tthis.socure = new RTCPeerConnection({ iceServers: urls,iceTransportPolicy: 'relay' });\r\n\t\tthis.socure.sendOffer = false;\r\n\t\tthis.socure.onicecandidate = (e)=>{\r\n\t\t\tconsole.log(\"onicecandidate\",e)\r\n\t\t\tif(!this.socure.sendOffer){\r\n\t\t\t\tthis.socure.sendOffer = true;\r\n\t\t\t\tif(e.candidate){\r\n\t\t\t\t\tself.candidate = e.candidate;\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\tself.ready(e.candidate);\r\n\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.socure.onaddstream = (e) => {\r\n\t\t\tconsole.log(\"on join:\",e)\r\n\t\t\ttry{\r\n\t\t\tself.join(e);\r\n\t\t\t}catch(e){\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tconf(option){\r\n\t\tthis.serve = option.serve;\r\n\t\tthis.ready = option.ready;\r\n\t\tthis.join = option.join;\r\n\t\tthis.init()\r\n\t}\r\n}\r\nexport default RtcSDK;"]}]}