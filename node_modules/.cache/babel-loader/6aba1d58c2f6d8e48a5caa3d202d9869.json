{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\thread-loader\\dist\\cjs.js!D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js!D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GaeaProject\\jpn_medical_web\\pages\\common\\room.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\pages\\common\\room.vue","mtime":1596526245171},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovR2FlYVByb2plY3QvanBuX21lZGljYWxfd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovR2FlYVByb2plY3QvanBuX21lZGljYWxfd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHZpZGVvRWxlbWVudCBmcm9tICdAL3BhZ2VzL2NvbW1vbi92aWRlb0VsZW1lbnQudnVlJzsKaW1wb3J0IE5vdGljZVNESyBmcm9tICdAL3V0aWxzL25vdGljZVNESy9pbmRleC5qcyc7CmltcG9ydCBSdGNTREsgZnJvbSAnQC91dGlscy9ydGNTREsvcnRjLmpzJzsKaW1wb3J0IGNvbmYgZnJvbSAnQC9jb25mL2NvbmYuanMnOwppbXBvcnQgeyBtYWtlR3VpZCB9IGZyb20gJy4uLy4uL3NyYy91dGlscy9tYWtlR3VpZC5qcyc7CmltcG9ydCB7IG1hcFN0YXRlLCBtYXBNdXRhdGlvbnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IG5vdGljZSBmcm9tICdAL3V0aWxzL21peGlucy9ub3RpY2UuanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoWyJ1SW5mbyJdKSksIG1hcFN0YXRlKFsibm90aWNlUm9vbSJdKSksCiAgbWl4aW5zOiBbbm90aWNlXSwKICBjb21wb25lbnRzOiB7CiAgICB2aWRlb0VsZW1lbnQ6IHZpZGVvRWxlbWVudAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJTdHJlYW1zOiB7fSwKICAgICAgdXNlclJ0Y3M6IHt9LAogICAgICB0b2tlbnM6IHt9LAogICAgICBsb2NhbFN0cmVhbTogbnVsbCwKICAgICAgbWVkaWFTdHJlYW1UcmFjazogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNoZWNrTWVkaWE6IGZ1bmN0aW9uIGNoZWNrTWVkaWEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbWVkaWFEZXZpY2VzOiBuYXZpZ2F0b3IgIT0gdW5kZWZpbmVkICYmIG5hdmlnYXRvci5tZWRpYURldmljZXMgIT0gdW5kZWZpbmVkCiAgICAgIH07CiAgICB9LAogICAgY3JlYXRlVmlkZW86IGZ1bmN0aW9uIGNyZWF0ZVZpZGVvKGluZm8pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHN0cmVhbSwgdmlkZW8sIHBhcmVudEVsZW1lbnQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY3JlYXRlTG9jYWxTdGVhbSgpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBzdHJlYW0gPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChzdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgX3RoaXMubWVkaWFTdHJlYW1UcmFjayA9IHR5cGVvZiBzdHJlYW0uc3RvcCA9PT0gJ2Z1bmN0aW9uJyA/IHN0cmVhbSA6IHN0cmVhbS5nZXRUcmFja3MoKVswXTsKICAgICAgICAgICAgICAgICAgX3RoaXMubG9jYWxTdHJlYW0gPSBzdHJlYW07CiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2NhbFN0cmVhbScpLmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICAgICAgICB2aWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7CiAgICAgICAgICAgICAgICAgIHZpZGVvLndpZHRoID0gMzAwOwogICAgICAgICAgICAgICAgICB2aWRlby5oZWlnaHQgPSAzMDA7CiAgICAgICAgICAgICAgICAgIHZpZGVvLmF1dG9wbGF5ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgdmlkZW8ucGxheXNpbmxpbmUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgdmlkZW8uY29udHJvbHMgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgdmlkZW8ubXV0ZWQgPSAibXV0ZWQiOwogICAgICAgICAgICAgICAgICB2aWRlby5zcmNPYmplY3QgPSBfdGhpcy5sb2NhbFN0cmVhbTsKICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsb2NhbFN0cmVhbSIpOwogICAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHZpZGVvKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoaW5mbykgX3RoaXMuJGV2ZW4uJGVtaXQoInVzZXJfdmlkZW9fcmVhZHkiLCBpbmZvKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNyZWF0ZUxvY2FsU3RlYW06IGZ1bmN0aW9uIGNyZWF0ZUxvY2FsU3RlYW0oaW5mbykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMyLmNoZWNrTWVkaWEoKS5tZWRpYURldmljZXMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczIuJHRpcHMud2Fybigi5oKo55qE6K6+5aSH5LiN5pSv5oyB5aqS5L2T5bGe5oCnLOivt+WFiOaOpeWFpeehrOS7tuiuvuWkhyEiKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7CiAgICAgICAgICAgICAgICAgIGF1ZGlvOiB0cnVlLAogICAgICAgICAgICAgICAgICB2aWRlbzogewogICAgICAgICAgICAgICAgICAgIHdpZHRoOiB7CiAgICAgICAgICAgICAgICAgICAgICBpZGVhbDogMTA4MAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB7CiAgICAgICAgICAgICAgICAgICAgICBpZGVhbDogNzIwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Mi5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA5OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDMpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIG51bGwpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzMsIDldXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNyZWF0ZVJ0Y1NlbmRlcjogZnVuY3Rpb24gY3JlYXRlUnRjU2VuZGVyKHVpZCwgdHlwZSwgcmVhZHkpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgdGhhdCwgcnRjOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0aGF0ID0gX3RoaXMzOwogICAgICAgICAgICAgICAgcnRjID0gbmV3IFJ0Y1NESyh7CiAgICAgICAgICAgICAgICAgIHNlcnZlOiAic3R1bjpzdHVuLnN0dW5wcm90b2NvbC5vcmc6MzQ3OCIsCiAgICAgICAgICAgICAgICAgIHJlYWR5OiByZWFkeSwKICAgICAgICAgICAgICAgICAgam9pbjogZnVuY3Rpb24gam9pbihzdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygib24gc3RyZWFtIGpvaW46Iiwgc3RyZWFtKTsKICAgICAgICAgICAgICAgICAgICB0aGF0LiRzZXQodGhhdC51c2VyU3RyZWFtcywgdWlkLCBzdHJlYW0uc3RyZWFtKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBydGMuZGlzY29ubmVjdGVkID0gLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBvZmZlciwgc2VuZE1zZzsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ0Yy5jcmVhdGVPZmZlcih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZlclRvUmVjZWl2ZVZpZGVvOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmZXJUb1JlY2VpdmVBdWRpbzogdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgIG9mZmVyID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZE1zZyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdwdXNoJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzZXA6IG9mZmVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lm5vdGljZVJvb20uc2VuZCh1aWQsIHNlbmRNc2cpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgcnRjLmFkZFN0ZWFtKF90aGlzMy5sb2NhbFN0cmVhbSk7CgogICAgICAgICAgICAgICAgX3RoaXMzLnNldFVzZXJSdGNzKHJ0YywgdWlkLCB0eXBlKTsKCiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gcnRjLmNyZWF0ZU9mZmVyKHsKICAgICAgICAgICAgICAgICAgb2ZmZXJUb1JlY2VpdmVWaWRlbzogdHJ1ZSwKICAgICAgICAgICAgICAgICAgb2ZmZXJUb1JlY2VpdmVBdWRpbzogdHJ1ZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDQuc2VudCk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNldFVzZXJSdGNzOiBmdW5jdGlvbiBzZXRVc2VyUnRjcyhydGMsIHVpZCwgdHlwZSkgewogICAgICBpZiAoIXRoaXMudXNlclJ0Y3NbdWlkXSkgewogICAgICAgIHRoaXMudXNlclJ0Y3NbdWlkXSA9IG5ldyBPYmplY3QoKTsKICAgICAgfQoKICAgICAgdGhpcy51c2VyUnRjc1t1aWRdW3R5cGVdID0gcnRjOwogICAgfSwKICAgIGNyZWF0ZVJvb206IGZ1bmN0aW9uIGNyZWF0ZVJvb20oaW5mbywgcGFyKSB7CiAgICAgIHRoaXMuaW5pdFJvb20oaW5mbywgcGFyKTsKICAgIH0sCiAgICBjcmVhdGVSdGNSZXZpY2U6IGZ1bmN0aW9uIGNyZWF0ZVJ0Y1JldmljZSh1aWQsIHR5cGUsIHJlYWR5KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIHRoYXQsIHJ0YzsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGhhdCA9IF90aGlzNDsKICAgICAgICAgICAgICAgIHJ0YyA9IG51bGw7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzNC51c2VyUnRjc1t1aWRdICYmIF90aGlzNC51c2VyUnRjc1t1aWRdW3R5cGVdKSB7CiAgICAgICAgICAgICAgICAgIHJ0YyA9IF90aGlzNC51c2VyUnRjc1t1aWRdW3R5cGVdOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcnRjID0gbmV3IFJ0Y1NESyh7CiAgICAgICAgICAgICAgICAgICAgc2VydmU6ICJzdHVuOnN0dW4uc3R1bnByb3RvY29sLm9yZzozNDc4IiwKICAgICAgICAgICAgICAgICAgICByZWFkeTogcmVhZHksCiAgICAgICAgICAgICAgICAgICAgam9pbjogZnVuY3Rpb24gam9pbihzdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICAgIHRoYXQuJHNldCh0aGF0LnVzZXJTdHJlYW1zLCB1aWQsIHN0cmVhbS5zdHJlYW0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IC8vcnRjLnNvY3VyZS5hZGRUcmFuc2NlaXZlcignYXVkaW8nLCB7ICdkaXJlY3Rpb24nOiAncmVjdm9ubHknIH0pOwogICAgICAgICAgICAgICAgLy9ydGMuc29jdXJlLmFkZFRyYW5zY2VpdmVyKCd2aWRlbycsIHsgJ2RpcmVjdGlvbic6ICdyZWN2b25seScgfSk7CiAgICAgICAgICAgICAgICAvL3J0Yy5zZW5kT2ZmZXIgPSBmYWxzZTsKCgogICAgICAgICAgICAgICAgcnRjLmFkZFN0ZWFtKF90aGlzNC5sb2NhbFN0cmVhbSk7CgogICAgICAgICAgICAgICAgaWYgKCFfdGhpczQudXNlclJ0Y3NbdWlkXSB8fCAhX3RoaXM0LnVzZXJSdGNzW3VpZF1bdHlwZV0pIHsKICAgICAgICAgICAgICAgICAgX3RoaXM0LnNldFVzZXJSdGNzKHJ0YywgdWlkLCB0eXBlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gcnRjOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ1LnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBldmVuczogZnVuY3Rpb24gZXZlbnMoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdmFyIHNlbGYgPSB0aGlzOyAvL3RoaXMuY3JlYXRlVmlkZW8oKTsKCiAgICAgIHRoaXMuJGV2ZW4uJG9uKCJ1c2VyX2xpdmVfbGVhdmUiLCBmdW5jdGlvbiAoaW5mbykgewogICAgICAgIGNvbnNvbGUubG9nKF90aGlzNS5tZWRpYVN0cmVhbVRyYWNrKTsKICAgICAgICBfdGhpczUubWVkaWFTdHJlYW1UcmFjayAmJiBfdGhpczUubWVkaWFTdHJlYW1UcmFjay5zdG9wKCk7CiAgICAgICAgX3RoaXM1Lm1lZGlhU3RyZWFtVHJhY2sgPSBudWxsOwoKICAgICAgICBfdGhpczUubG9jYWxTdHJlYW0uZ2V0VHJhY2tzKClbMF0uc3RvcCgpOwoKICAgICAgICBfdGhpczUubG9jYWxTdHJlYW0uZ2V0VHJhY2tzKClbMV0uc3RvcCgpOwoKICAgICAgICBfdGhpczUubG9jYWxTdHJlYW0gPSBudWxsOwogICAgICB9KTsKICAgICAgdGhpcy4kZXZlbi4kb24oInVzZXJfbGl2ZV9sYXVuY2giLCBmdW5jdGlvbiAoaW5mbykgewogICAgICAgIF90aGlzNS5jcmVhdGVWaWRlbyhpbmZvKTsKICAgICAgfSk7IC8v5b2T5YmN55So5oi35Li75Yqo6YCA5Ye6CgogICAgICB0aGlzLiRldmVuLiRvbigidXNlcl9saXZlX2xlYXZlIiwgZnVuY3Rpb24gKGluZm8pIHsKICAgICAgICBfdGhpczUudXNlclJ0Y3MgPSB7fTsKICAgICAgICB2YXIgYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnanMtdmlkZW9ib3gnKVswXTsKICAgICAgICBib3guaW5uZXJIVE1MID0gIiI7CiAgICAgICAgX3RoaXM1LnVzZXJTdHJlYW1zID0ge307CiAgICAgIH0pOyAvL+W9k+WvueaWuemAieaLqeS7peinhumikeaWueW8j+aOpemAmuaXtgoKICAgICAgdGhpcy4kZXZlbi4kb24oIm5vdGljZV9saXZlX2Nvbm5lY3RhbGwiLCBmdW5jdGlvbiAoaW5mbykgewogICAgICAgIC8v5b2T5YmN55So5oi35bey5Zyo5oi/6Ze0CiAgICAgICAgaWYgKF90aGlzNS5ub3RpY2VSb29tICYmIF90aGlzNS5ub3RpY2VSb29tLmluZm8gIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB2YXIgbXNnID0gewogICAgICAgICAgICB0bzogaW5mby5Gcm9tLkd1aWQsCiAgICAgICAgICAgIGluZm86IHsKICAgICAgICAgICAgICBQbGF0ZTogX3RoaXM1Lm5vdGljZVJvb20uaW5mby5wbGF0ZSwKICAgICAgICAgICAgICBDb2RlOiBfdGhpczUubm90aWNlUm9vbS5pbmZvLmNvZGUsCiAgICAgICAgICAgICAgVmlkZW9UeXBlOiBpbmZvLkRhdGEuTWVzc2FnZS5BbnN3ZXIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdHlwZTogJycKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXM1Lm5vdGljZUV4LnNlbmQobXNnLnRvLCBtc2cuaW5mbyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8v5b2T5YmN55So5oi35LiN5Zyo5oi/6Ze0CiAgICAgICAgICBfdGhpczUuY3JlYXRlUm9vbShpbmZvKTsKICAgICAgICB9CiAgICAgIH0pOyAvL+W9k+aIv+mXtOW3suW7uueriwoKICAgICAgdGhpcy4kZXZlbi4kb24oInVzZXJfcm9vbV9jcmVhdGUiLCBmdW5jdGlvbiAoaW5mbywgbm90aWNlKSB7CiAgICAgICAgdmFyIG1zZyA9IHsKICAgICAgICAgIHRvOiBpbmZvLkZyb20uR3VpZCwKICAgICAgICAgIGluZm86IHsKICAgICAgICAgICAgUGxhdGU6IG5vdGljZS5pbmZvLnBsYXRlLAogICAgICAgICAgICBDb2RlOiBub3RpY2UuaW5mby5jb2RlLAogICAgICAgICAgICBWaWRlb1R5cGU6IGluZm8uRGF0YS5NZXNzYWdlLkFuc3dlcgogICAgICAgICAgfSwKICAgICAgICAgIHR5cGU6ICcnCiAgICAgICAgfTsKCiAgICAgICAgX3RoaXM1Lm5vdGljZUV4LnNlbmQobXNnLnRvLCBtc2cuaW5mbyk7CiAgICAgIH0pOyAvL+aUtuWIsOWIm+W7uuaIv+mXtOaMh+S7pAoKICAgICAgdGhpcy4kZXZlbi4kb24oIm5vdGljZV9yb29tX2J1aWxkIiwgZnVuY3Rpb24gKGluZm8pIHsKICAgICAgICBfdGhpczUuY3JlYXRlUm9vbShpbmZvLCB7CiAgICAgICAgICBwbGF0ZTogaW5mby5EYXRhLk1lc3NhZ2UuUGxhdGUKICAgICAgICB9KTsKICAgICAgfSk7IC8v5pS25Yiw5Yqg5YWl5oi/6Ze05oyH5LukCgogICAgICB0aGlzLiRldmVuLiRvbigibm90aWNlX3Jvb21fam9pbiIsIGZ1bmN0aW9uIChpbmZvKSB7CiAgICAgICAgdmFyIHJlYWR5ID0gZnVuY3Rpb24gcmVhZHkodG9rZW4pIHsKICAgICAgICAgIHZhciBydGMgPSBzZWxmLnVzZXJSdGNzW2luZm8uRGF0YS5BY2NlcHQuR3VpZF0uZGVzazsKICAgICAgICAgIHZhciBzZW5kTXNnID0gewogICAgICAgICAgICB0eXBlOiAndG9rZW4nLAogICAgICAgICAgICB0b2tlbjogdG9rZW4KICAgICAgICAgIH07IC8v5qOA5p+l5piv5ZCm5a2Y5Zyo562J5b6F5o6l5pS255qEdG9rZW4KCiAgICAgICAgICBpZiAoX3RoaXM1LnRva2Vuc1tpbmZvLkZyb20uR3VpZF0pIHsKICAgICAgICAgICAgcnRjLmFkZEljZUNhbmRpZGF0ZShfdGhpczUudG9rZW5zW2luZm8uRnJvbS5HdWlkXSk7CiAgICAgICAgICAgIGRlbGV0ZSBfdGhpczUudG9rZW5zW2luZm8uRnJvbS5HdWlkXTsKICAgICAgICAgIH0KCiAgICAgICAgICBzZWxmLm5vdGljZVJvb20uc2VuZChpbmZvLkRhdGEuQWNjZXB0Lkd1aWQsIHNlbmRNc2cpOwogICAgICAgIH07CgogICAgICAgIHRyeSB7CiAgICAgICAgICBfdGhpczUuY3JlYXRlUnRjU2VuZGVyKGluZm8uRGF0YS5BY2NlcHQuR3VpZCwgJ2Rlc2snLCByZWFkeSkudGhlbihmdW5jdGlvbiAob2ZmZXIpIHsKICAgICAgICAgICAgdmFyIHNlbmRNc2cgPSB7CiAgICAgICAgICAgICAgdHlwZTogJ3B1c2gnLAogICAgICAgICAgICAgIGpzZXA6IG9mZmVyCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHNlbGYubm90aWNlUm9vbS5zZW5kKGluZm8uRGF0YS5BY2NlcHQuR3VpZCwgc2VuZE1zZyk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICB9CiAgICAgIH0pOyAvL+S6kuaNonRva2Vu5oyH5LukCgogICAgICB0aGlzLiRldmVuLiRvbigibm90aWNlX2NoYW5uZWxfdG9rZW4iLCBmdW5jdGlvbiAoaW5mbykgewogICAgICAgIHZhciByZWMgPSBpbmZvLkRhdGEuTWVzc2FnZTsgLy/lvZPov5nmnaHmtojmga/mjqXlj5fml7bvvIzmnInlj6/og73mnKzlnLDlupTnrZTkv6Hku6Tov5jmnKrliJvlu7rlrozmiJAKCiAgICAgICAgaWYgKF90aGlzNS51c2VyUnRjc1tpbmZvLkZyb20uR3VpZF0pIHsKICAgICAgICAgIHZhciBydGMgPSBfdGhpczUudXNlclJ0Y3NbaW5mby5Gcm9tLkd1aWRdLmRlc2s7CiAgICAgICAgICBydGMuYWRkSWNlQ2FuZGlkYXRlKHJlYy50b2tlbik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8v5pqC5a2YCiAgICAgICAgICBfdGhpczUudG9rZW5zW2luZm8uRnJvbS5HdWlkXSA9IHJlYy50b2tlbjsKICAgICAgICB9CiAgICAgIH0pOyAvL+aUtuWIsOmAgOWHuuaIv+mXtOaMh+S7pAoKICAgICAgdGhpcy4kZXZlbi4kb24oIm5vdGljZV9yb29tX2xlYXZlIiwgZnVuY3Rpb24gKGluZm8pIHsKICAgICAgICBfdGhpczUuJG5vdGlmeSh7CiAgICAgICAgICB0aXRsZTogJ+aPkOekuicsCiAgICAgICAgICBtZXNzYWdlOiBpbmZvLkRhdGEuQWNjZXB0Lk5hbWUgKyAn6YCA5Ye66KeG6aKR77yBJwogICAgICAgIH0pOwoKICAgICAgICB2YXIgcnRjID0gX3RoaXM1LnVzZXJSdGNzW2luZm8uRGF0YS5BY2NlcHQuR3VpZF0uZGVzazsKICAgICAgICBydGMuc29jdXJlLmNsb3NlKCk7CiAgICAgICAgZGVsZXRlIF90aGlzNS51c2VyUnRjc1tpbmZvLkRhdGEuQWNjZXB0Lkd1aWRdOwogICAgICAgIHZhciByZW1vdmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpbmZvLkRhdGEuQWNjZXB0Lkd1aWQpOwogICAgICAgIHJlbW92ZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHJlbW92ZSk7CiAgICAgICAgZGVsZXRlIF90aGlzNS51c2VyU3RyZWFtc1tpbmZvLkRhdGEuQWNjZXB0Lkd1aWRdOwogICAgICB9KTsgLy/lvZPmlLbliLBwdXNo5raI5oGvCgogICAgICB0aGlzLiRldmVuLiRvbigibm90aWNlX2NoYW5uZWxfcHVzaCIsIGZ1bmN0aW9uIChpbmZvKSB7CiAgICAgICAgdmFyIHJlYyA9IGluZm8uRGF0YS5NZXNzYWdlOwoKICAgICAgICB2YXIgcmVhZHkgPSBmdW5jdGlvbiByZWFkeSh0b2tlbikgewogICAgICAgICAgdmFyIHJ0YyA9IHNlbGYudXNlclJ0Y3NbaW5mby5Gcm9tLkd1aWRdLmRlc2s7CiAgICAgICAgICB2YXIgc2VuZE1zZyA9IHsKICAgICAgICAgICAgdHlwZTogJ3Rva2VuJywKICAgICAgICAgICAgdG9rZW46IHRva2VuCiAgICAgICAgICB9OyAvL+ajgOafpeaYr+WQpuWtmOWcqOetieW+heaOpeaUtueahHRva2VuCgogICAgICAgICAgaWYgKF90aGlzNS50b2tlbnNbaW5mby5Gcm9tLkd1aWRdKSB7CiAgICAgICAgICAgIHJ0Yy5hZGRJY2VDYW5kaWRhdGUoX3RoaXM1LnRva2Vuc1tpbmZvLkZyb20uR3VpZF0pOwogICAgICAgICAgICBkZWxldGUgX3RoaXM1LnRva2Vuc1tpbmZvLkZyb20uR3VpZF07CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXM1Lm5vdGljZVJvb20uc2VuZChpbmZvLkZyb20uR3VpZCwgc2VuZE1zZyk7CiAgICAgICAgfTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIF90aGlzNS5jcmVhdGVSdGNSZXZpY2UoaW5mby5Gcm9tLkd1aWQsICdkZXNrJywgcmVhZHkpLnRoZW4oZnVuY3Rpb24gKHJ0YykgewogICAgICAgICAgICBydGMuY3JlYXRlQW5zd2VyKHJlYy5qc2VwKS50aGVuKGZ1bmN0aW9uIChhbnN3ZXIpIHsKICAgICAgICAgICAgICB2YXIgc2VuZE1zZyA9IHsKICAgICAgICAgICAgICAgIHR5cGU6ICdzdWJzY3JpYmUnLAogICAgICAgICAgICAgICAganNlcDogYW5zd2VyCiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgX3RoaXM1Lm5vdGljZVJvb20uc2VuZChpbmZvLkZyb20uR3VpZCwgc2VuZE1zZyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgfQogICAgICB9KTsgLy/lvZPmlLbliLDorqLpmIXmtojmga8KCiAgICAgIHRoaXMuJGV2ZW4uJG9uKCJub3RpY2VfY2hhbm5lbF9zdWJzY3JpYmUiLCBmdW5jdGlvbiAoaW5mbykgewogICAgICAgIHZhciByZWMgPSBpbmZvLkRhdGEuTWVzc2FnZTsKICAgICAgICB2YXIgcnRjID0gX3RoaXM1LnVzZXJSdGNzW2luZm8uRnJvbS5HdWlkXS5kZXNrOwogICAgICAgIHJ0Yy5zZXRSZW1vdGUocmVjLmpzZXApOwogICAgICB9KTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmV2ZW5zKCk7CiAgfQp9Ow=="},{"version":3,"sources":["room.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<el-row>\r\n\t\t<el-col :span=\"24\">\r\n\t\t\t<el-row>\r\n\t\t\t\t<el-col :span=\"8\">\r\n\t\t\t\t\t<el-card id=\"localStream\" style=\"display: inline-block;margin:10px\">\r\n\t\t\t\t\t</el-card>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"16\">\r\n\t\t\t\t\t<div class=\"js-videobox\">\r\n\t\t\t\t\t\t<videoElement v-for=\"(item,key,i) in userStreams\" :key=\"i\" :mid=\"key\" :stream=\"item\"></videoElement>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\t\t</el-col>\r\n\t</el-row>\n</template>\n\n<script>\r\n\timport videoElement from '@/pages/common/videoElement.vue'\r\n\timport NoticeSDK from '@/utils/noticeSDK/index.js'\r\n\timport RtcSDK from '@/utils/rtcSDK/rtc.js'\r\n\timport conf from '@/conf/conf.js'\r\n\timport {makeGuid} from '../../src/utils/makeGuid.js';\r\n\timport {mapState,mapMutations} from 'vuex'\r\n\timport notice from '@/utils/mixins/notice.js'\r\n\t\r\n\texport default {\r\n\t\tcomputed: {\r\n\t\t\t...mapState([\"uInfo\"]),\r\n\t\t\t...mapState([\"noticeRoom\"]),\r\n\t\t},\r\n\t\tmixins:[notice],\r\n\t\tcomponents:{\r\n\t\t\tvideoElement\r\n\t\t},\r\n\t\tdata(){\r\n\t\t\treturn {\r\n\t\t\t\tuserStreams:{},\r\n\t\t\t\tuserRtcs:{},\r\n\t\t\t\ttokens:{},\r\n\t\t\t\tlocalStream:null,\r\n\t\t\t\tmediaStreamTrack:null,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tcheckMedia(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tmediaDevices:navigator != undefined && navigator.mediaDevices != undefined,\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync createVideo(info){\t\t\t\r\n\t\t\t\tlet stream = await this.createLocalSteam();\r\n\t\t\t\tif(stream){\r\n\t\t\t\t\tthis.mediaStreamTrack= typeof stream.stop==='function'?stream:stream.getTracks()[0];\r\n\t\t\t\t\tthis.localStream = stream;\r\n\t\t\t\t\tdocument.getElementById('localStream').innerHTML = \"\";\r\n\t\t\t\t\tconst video = document.createElement('video');\r\n\t\t\t\t\tvideo.width = 300;\r\n\t\t\t\t\tvideo.height = 300;\r\n\t\t\t\t\tvideo.autoplay = true;\r\n\t\t\t\t\tvideo.playsinline = false;\r\n\t\t\t\t\tvideo.controls = false;\r\n\t\t\t\t\tvideo.muted = \"muted\";\r\n\t\t\t\t\tvideo.srcObject = this.localStream;\r\n\t\t\t\t\tlet parentElement = document.getElementById(\"localStream\");\r\n\t\t\t\t\tparentElement.appendChild(video);\r\n\t\t\t\t}\r\n\t\t\t\tif(info)\r\n\t\t\t\t\tthis.$even.$emit(\"user_video_ready\",info)\r\n\t\t\t},\r\n\t\t\tasync createLocalSteam(info) {\r\n\t\t\t\tif (!this.checkMedia().mediaDevices) {\r\n\t\t\t\t\tthis.$tips.warn(\"您的设备不支持媒体属性,请先接入硬件设备!\")\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\ttry{\r\n\t\t\t\t\treturn await navigator.mediaDevices.getUserMedia({\r\n\t\t\t\t\t\taudio: true,\r\n\t\t\t\t\t\tvideo: {\r\n\t\t\t\t\t\t\twidth: {\r\n\t\t\t\t\t\t\t\tideal: 1080\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\theight: {\r\n\t\t\t\t\t\t\t\tideal: 720\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync createRtcSender(uid, type,ready) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet rtc = new RtcSDK({\r\n\t\t\t\t\tserve: \"stun:stun.stunprotocol.org:3478\",\r\n\t\t\t\t\tready:ready,\r\n\t\t\t\t\tjoin(stream){\r\n\t\t\t\t\t\tconsole.log(\"on stream join:\",stream)\r\n\t\t\t\t\t\tthat.$set(that.userStreams, uid, stream.stream)\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t\trtc.disconnected= async ()=>{\r\n\t\t\t\t\tlet offer = await rtc.createOffer({\r\n\t\t\t\t\t\tofferToReceiveVideo: true,\r\n\t\t\t\t\t\tofferToReceiveAudio: true\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\ttype:'push',\r\n\t\t\t\t\t\tjsep:offer,\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.noticeRoom.send(uid, sendMsg);\r\n\t\t\t\t}\r\n\t\t\t\trtc.addSteam(this.localStream);\r\n\t\t\t\tthis.setUserRtcs(rtc, uid, type);\r\n\t\t\t\treturn await rtc.createOffer({\r\n\t\t\t\t\tofferToReceiveVideo: true,\r\n\t\t\t\t\tofferToReceiveAudio: true\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsetUserRtcs(rtc,uid,type){\r\n\t\t\t\tif(!this.userRtcs[uid]){\r\n\t\t\t\t\tthis.userRtcs[uid] = new Object();\r\n\t\t\t\t}\r\n\t\t\t\tthis.userRtcs[uid][type] = rtc;\t\r\n\t\t\t},\r\n\t\t\tcreateRoom(info,par){\r\n\t\t\t\tthis.initRoom(info,par);\r\n\t\t\t},\r\n\t\t\tasync createRtcRevice(uid,type,ready){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet rtc = null;\r\n\t\t\t\tif(this.userRtcs[uid] && this.userRtcs[uid][type]){\r\n\t\t\t\t\trtc = this.userRtcs[uid][type];\r\n\t\t\t\t}else{\r\n\t\t\t\t\trtc = new RtcSDK({\r\n\t\t\t\t\t\tserve:\"stun:stun.stunprotocol.org:3478\",\r\n\t\t\t\t\t\tready:ready,\r\n\t\t\t\t\t\tjoin(stream){\r\n\t\t\t\t\t\t\tthat.$set(that.userStreams,uid,stream.stream)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//rtc.socure.addTransceiver('audio', { 'direction': 'recvonly' });\r\n\t\t\t\t//rtc.socure.addTransceiver('video', { 'direction': 'recvonly' });\r\n\t\t\t\t//rtc.sendOffer = false;\r\n\t\t\t\trtc.addSteam(this.localStream);\t\t\t\r\n\t\t\t\tif(!this.userRtcs[uid] || !this.userRtcs[uid][type]){\r\n\t\t\t\t\tthis.setUserRtcs(rtc,uid,type);\r\n\t\t\t\t}\r\n\t\t\t\treturn await rtc;\r\n\t\t\t\t//return await rtc.createOffer({ offerToReceiveVideo: true, offerToReceiveAudio: true });\r\n\t\t\t},\r\n\t\t\tevens(){\r\n\t\t\t\tlet self = this;\r\n\t\t\t\t//this.createVideo();\r\n\t\t\t\tthis.$even.$on(\"user_live_leave\",(info)=>{\r\n\t\t\t\t\tconsole.log(this.mediaStreamTrack)\r\n\t\t\t\t\tthis.mediaStreamTrack && this.mediaStreamTrack.stop();\r\n\t\t\t\t\tthis.mediaStreamTrack = null;\r\n\t\t\t\t\tthis.localStream.getTracks()[0].stop();\r\n\t\t\t\t\tthis.localStream.getTracks()[1].stop();\r\n\t\t\t\t\tthis.localStream = null;\r\n\t\t\t\t})\r\n\t\t\t\tthis.$even.$on(\"user_live_launch\",(info)=>{\r\n\t\t\t\t\tthis.createVideo(info);\r\n\t\t\t\t})\r\n\t\t\t\t//当前用户主动退出\r\n\t\t\t\tthis.$even.$on(\"user_live_leave\",(info)=>{\r\n\t\t\t\t\tthis.userRtcs = {};\r\n\t\t\t\t\tlet box = document.getElementsByClassName('js-videobox')[0];\r\n\t\t\t\t\tbox.innerHTML = \"\";\r\n\t\t\t\t\tthis.userStreams = {};\r\n\t\t\t\t})\r\n\t\t\t\t//当对方选择以视频方式接通时\r\n\t\t\t\tthis.$even.$on(\"notice_live_connectall\",(info)=>{\r\n\t\t\t\t\t//当前用户已在房间\r\n\t\t\t\t\tif(this.noticeRoom&&this.noticeRoom.info != undefined){\r\n\t\t\t\t\t\tvar msg = {\r\n\t\t\t\t\t\t\tto: info.From.Guid,\r\n\t\t\t\t\t\t\tinfo: {\r\n\t\t\t\t\t\t\t\tPlate: this.noticeRoom.info.plate,\r\n\t\t\t\t\t\t\t\tCode: this.noticeRoom.info.code,\r\n\t\t\t\t\t\t\t\tVideoType:  info.Data.Message.Answer\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttype: ''\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.noticeEx.send(msg.to, msg.info);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//当前用户不在房间\r\n\t\t\t\t\t\tthis.createRoom(info)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//当房间已建立\r\n\t\t\t\tthis.$even.$on(\"user_room_create\",(info,notice)=>{\r\n\t\t\t\t\tvar msg = {\r\n\t\t\t\t\t\tto: info.From.Guid,\r\n\t\t\t\t\t\tinfo: {\r\n\t\t\t\t\t\t\tPlate: notice.info.plate,\r\n\t\t\t\t\t\t\tCode: notice.info.code,\r\n\t\t\t\t\t\t\tVideoType: info.Data.Message.Answer,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttype: ''\r\n\t\t\t\t\t};\t\r\n\t\t\t\t\tthis.noticeEx.send(msg.to, msg.info);\r\n\t\t\t\t});\r\n\t\t\t\t//收到创建房间指令\r\n\t\t\t\tthis.$even.$on(\"notice_room_build\",(info)=>{\r\n\t\t\t\t\tthis.createRoom(info,{plate:info.Data.Message.Plate})\r\n\t\t\t\t});\r\n\t\t\t\t//收到加入房间指令\r\n\t\t\t\tthis.$even.$on(\"notice_room_join\",(info)=>{\r\n\t\t\t\t\tlet ready = (token) => {\r\n\t\t\t\t\t\tlet rtc = self.userRtcs[info.Data.Accept.Guid].desk;\r\n\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\ttype:'token',\r\n\t\t\t\t\t\t\ttoken:token,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//检查是否存在等待接收的token\r\n\t\t\t\t\t\tif(this.tokens[info.From.Guid]){\r\n\t\t\t\t\t\t\trtc.addIceCandidate(this.tokens[info.From.Guid]);\r\n\t\t\t\t\t\t\tdelete this.tokens[info.From.Guid];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.noticeRoom.send(info.Data.Accept.Guid, sendMsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\tthis.createRtcSender(info.Data.Accept.Guid,'desk',ready).then((offer)=>{\r\n\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\ttype:'push',\r\n\t\t\t\t\t\t\tjsep:offer,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.noticeRoom.send(info.Data.Accept.Guid, sendMsg);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//互换token指令\r\n\t\t\t\tthis.$even.$on(\"notice_channel_token\",(info)=>{\r\n\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\t//当这条消息接受时，有可能本地应答信令还未创建完成\r\n\t\t\t\t\tif(this.userRtcs[info.From.Guid]){\r\n\t\t\t\t\t\tlet rtc = this.userRtcs[info.From.Guid].desk;\r\n\t\t\t\t\t\trtc.addIceCandidate(rec.token);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t//暂存\r\n\t\t\t\t\t\tthis.tokens[info.From.Guid] = rec.token;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//收到退出房间指令\r\n\t\t\t\tthis.$even.$on(\"notice_room_leave\",(info)=>{\r\n\t\t\t\t\tthis.$notify({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tmessage: info.Data.Accept.Name + '退出视频！',\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlet rtc = this.userRtcs[info.Data.Accept.Guid].desk;\r\n\t\t\t\t\trtc.socure.close();\r\n\t\t\t\t\tdelete this.userRtcs[info.Data.Accept.Guid];\r\n\t\t\t\t\tvar remove = document.getElementById(info.Data.Accept.Guid);\r\n\t\t\t\t\tremove.parentNode.removeChild(remove);\r\n\t\t\t\t\tdelete this.userStreams[info.Data.Accept.Guid]\r\n\t\t\t\t});\r\n\t\t\t\t//当收到push消息\r\n\t\t\t\tthis.$even.$on(\"notice_channel_push\",(info)=>{\r\n\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\tlet ready = (token) => {\r\n\t\t\t\t\t\tlet rtc = self.userRtcs[info.From.Guid].desk;\r\n\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\t\ttype:'token',\r\n\t\t\t\t\t\t\t\ttoken:token\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//检查是否存在等待接收的token\r\n\t\t\t\t\t\tif(this.tokens[info.From.Guid]){\r\n\t\t\t\t\t\t\trtc.addIceCandidate(this.tokens[info.From.Guid]);\r\n\t\t\t\t\t\t\tdelete this.tokens[info.From.Guid];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.noticeRoom.send(info.From.Guid, sendMsg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\tthis.createRtcRevice(info.From.Guid,'desk',ready).then((rtc)=>{\r\n\t\t\t\t\t\trtc.createAnswer(rec.jsep).then((answer)=>{\r\n\t\t\t\t\t\t\tlet sendMsg = {\r\n\t\t\t\t\t\t\t\t\ttype:'subscribe',\r\n\t\t\t\t\t\t\t\t\tjsep:answer,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.noticeRoom.send(info.From.Guid, sendMsg);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t//当收到订阅消息\r\n\t\t\t\tthis.$even.$on(\"notice_channel_subscribe\",(info)=>{\r\n\t\t\t\t\tlet rec = info.Data.Message;\r\n\t\t\t\t\tlet rtc = this.userRtcs[info.From.Guid].desk;\r\n\t\t\t\t\trtc.setRemote(rec.jsep)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t\tthis.evens();\r\n\t\t}\r\n\t}\n</script>\n\n<style>\n</style>\n"],"sourceRoot":"pages/common"}]}