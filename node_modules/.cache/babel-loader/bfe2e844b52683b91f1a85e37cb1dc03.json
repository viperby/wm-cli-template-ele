{"remainingRequest":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js!D:\\GaeaProject\\jpn_medical_web\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\GaeaProject\\jpn_medical_web\\utils\\noticeSDK\\index.js","dependencies":[{"path":"D:\\GaeaProject\\jpn_medical_web\\utils\\noticeSDK\\index.js","mtime":1601201847261},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GaeaProject\\jpn_medical_web\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOi9HYWVhUHJvamVjdC9qcG5fbWVkaWNhbF93ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkQ6L0dhZWFQcm9qZWN0L2pwbl9tZWRpY2FsX3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkQ6L0dhZWFQcm9qZWN0L2pwbl9tZWRpY2FsX3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwoKLyoNCiAqIEBhdXRob3IgeXV6eQ0KICogQHZlcnNpb24gMS4wLjANCiAqIEBkYXRlIDIwMjAuNC4xNQ0KICogQHRvZG8gYWJvdXQgaW5kZXBlbmRlbnQgQVBJIHJlcXVlc3RzLGF4aW9zIGluIGN1cnJlbnQgZGVwZW5kZW50IGVudmlyb25tZW50DQoqLwppbXBvcnQgY29uc2hvdyBmcm9tICcuL2NvbnNvbGUuanMnOwppbXBvcnQgYXhpb3MsIHsgbm90aWNlR2V0IGFzIF9ub3RpY2VHZXQsIG5vdGljZVBvc3QgYXMgX25vdGljZVBvc3QgfSBmcm9tICcuL2F4aW9zLmpzJzsKCnZhciBOb3RpY2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIE5vdGljZShvcHRpb24sIGNvbXBsYXRlKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTm90aWNlKTsKCiAgICB0aGlzLnR0bCA9IGZhbHNlLCB0aGlzLmluZm8gPSB7CiAgICAgIHNlcnZlOiAiIiwKICAgICAgcGxhdGU6ICIiLAogICAgICBjb2RlOiAiIiwKICAgICAgdG9rZW46ICIiLAogICAgICB1c2VyOiB7CiAgICAgICAgZ3VpZDogIiIsCiAgICAgICAgbmFtZTogIiIKICAgICAgfQogICAgfTsKICAgIHRoaXMuc29jdXJlID0gbnVsbDsKCiAgICBpZiAob3B0aW9uKSB7CiAgICAgIHRoaXMuY29uZihvcHRpb24pOwogICAgICBpZiAoY29tcGxhdGUpIHRoaXMuY29tcGxhdGUgPSBjb21wbGF0ZTsKICAgIH0KICB9CiAgLyogQHR5cGUgaW50ZXJmYWNlDQogICAqIEByZW1ha3MgVGhpcyBpcyBhbiBpbnRlcmZhY2UgY2FsbGVkIHdoZW4gdGhlIG9ub3BlbiBldmVuIG9mIFdTIGlzIHRyaWdnZXJlZA0KICAqLwoKCiAgX2NyZWF0ZUNsYXNzKE5vdGljZSwgW3sKICAgIGtleTogImNvbXBsYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wbGF0ZShfY29tcGxhdGUpIHsKICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGlmIChfY29tcGxhdGUpIHJlc29sdmUoc2VsZik7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIm1lc3NhZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1lc3NhZ2UoZSkge30KICB9LCB7CiAgICBrZXk6ICJjbG9zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgIGlmICh0aGlzLnNvY3VyZSkgdGhpcy5zb2N1cmUuY2xvc2UoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWxheSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVsYXkodG8sIGluZm8sIHR5cGUpIHsKICAgICAgaWYgKCFpbmZvKSByZXR1cm47CiAgICAgIHZhciBtc2cgPSAiIjsKCiAgICAgIGlmICh0eXBlb2YgaW5mbyAhPT0gInN0cmluZyIpIHsKICAgICAgICBtc2cgPSBKU09OLnN0cmluZ2lmeShpbmZvKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtc2cgPSBpbmZvOwogICAgICB9CgogICAgICB2YXIgcmVsYXllciA9IHRoaXMucmVsYXllcih0bywgbXNnLCB0eXBlKTsKCiAgICAgIGlmICghdGhpcy5zb2N1cmUpIHsKICAgICAgICBjb25zaG93LmVycm9yKCJ3cyBpcyBVbmluc3RhbmNlZCAiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuc29jdXJlLnNlbmQoSlNPTi5zdHJpbmdpZnkocmVsYXllcikpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbGF5ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbGF5ZXIodG8sIG1zZywgdHlwZSkgewogICAgICByZXR1cm4gewogICAgICAgICJUb2tlbiI6IHRoaXMuaW5mby50b2tlbiwKICAgICAgICAiVHlwZSI6ICJyZWxheSIsCiAgICAgICAgIkZyb20iOiB7CiAgICAgICAgICAiTmFtZSI6IHRoaXMuaW5mby51c2VyLm5hbWUsCiAgICAgICAgICAiR3VpZCI6IHRoaXMuaW5mby51c2VyLmd1aWQKICAgICAgICB9LAogICAgICAgICJEYXRhIjogewogICAgICAgICAgIk1lc3NhZ2UiOiBtc2csCiAgICAgICAgICAiQWNjZXB0IjogewogICAgICAgICAgICAiR3VpZCI6IHRvCiAgICAgICAgICB9LAogICAgICAgICAgIlR5cGUiOiB0eXBlCiAgICAgICAgfQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogInNlbmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmQodG8sIGluZm8sIHR5cGUsIG5vdGlmeSwgdGl0bGUsIGNvbnRlbnQsIG9yZGVyKSB7CiAgICAgIGlmICghaW5mbykgcmV0dXJuOwogICAgICB2YXIgbXNnID0gIiI7CgogICAgICBpZiAodHlwZW9mIGluZm8gIT09ICJzdHJpbmciKSB7CiAgICAgICAgbXNnID0gSlNPTi5zdHJpbmdpZnkoaW5mbyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbXNnID0gaW5mbzsKICAgICAgfQoKICAgICAgdmFyIHNlbmRlciA9IHRoaXMuc2VuZGVyKHRvLCBtc2csIHR5cGUsIG5vdGlmeSwgdGl0bGUsIGNvbnRlbnQsIG9yZGVyKTsKCiAgICAgIGlmICghdGhpcy5zb2N1cmUpIHsKICAgICAgICBjb25zaG93LmVycm9yKCJ3cyBpcyBVbmluc3RhbmNlZCAiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuc29jdXJlLnNlbmQoSlNPTi5zdHJpbmdpZnkoc2VuZGVyKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2VuZFNvY3VyZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VuZFNvY3VyZShpbmZvKSB7CiAgICAgIGlmICghdGhpcy5zb2N1cmUpIHsKICAgICAgICBjb25zaG93LmVycm9yKCJ3cyBpcyBVbmluc3RhbmNlZCAiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuc29jdXJlLnNlbmQoSlNPTi5zdHJpbmdpZnkoaW5mbykpOwogICAgfQogIH0sIHsKICAgIGtleTogInNlbmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VuZGVyKHRvLCBtc2csIHR5cGUsIG5vdGlmeSwgdGl0bGUsIGNvbnRlbnQsIG9yZGVyKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgIlRva2VuIjogdGhpcy5pbmZvLnRva2VuLAogICAgICAgICJUeXBlIjogImluZm8iLAogICAgICAgICJGcm9tIjogewogICAgICAgICAgIk5hbWUiOiB0aGlzLmluZm8udXNlci5uYW1lLAogICAgICAgICAgIkd1aWQiOiB0aGlzLmluZm8udXNlci5ndWlkCiAgICAgICAgfSwKICAgICAgICAiRGF0YSI6IHsKICAgICAgICAgICJNZXNzYWdlIjogbXNnLAogICAgICAgICAgIkFjY2VwdCI6IHsKICAgICAgICAgICAgIkd1aWQiOiB0bwogICAgICAgICAgfSwKICAgICAgICAgICJUeXBlIjogdHlwZSA/IHR5cGUgOiAiZ3JvdXAiLAogICAgICAgICAgIk5vdGlmeSI6IHsKICAgICAgICAgICAgIkFjdGl2YXRlIjogbm90aWZ5LAogICAgICAgICAgICAiVHlwZSI6ICIiLAogICAgICAgICAgICAiVGl0bGUiOiBub3RpZnkgPyB0aXRsZS5sZW5ndGggPiAwID8gdGl0bGUgOiB0aGlzLmluZm8udXNlci5uYW1lIDogIiIsCiAgICAgICAgICAgICJDb250ZW50IjogY29udGVudCwKICAgICAgICAgICAgIk9yZGVyIjogb3JkZXIKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAicmVnaXN0UmVhZHkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlZ2lzdFJlYWR5KGRhdGEsIGNiKSB7CiAgICAgIGlmIChjYikgewogICAgICAgIGNiKGRhdGEpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiaW5pdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgaWYgKCFXZWJTb2NrZXQpIHsKICAgICAgICBjb25zaG93LmVycm9yKCJDdXJyZW50IEJyb3dzZXIgSXMndCBTdXBwb3J0IFdlYlNvY2tldCEiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBzZWxmID0gdGhpczsgLy9nZXQgbm90aWNlIHRva2VuCgogICAgICB0aGlzLnJlZ2lzdGVySW5mbygpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHNlbGYuaW5mby50b2tlbiA9IHJlcy5EYXRhLlRva2VuOwogICAgICAgIHNlbGYuaW5mby5jb2RlID0gcmVzLkRhdGEuQ29kZTsKICAgICAgICBzZWxmLnJlZ2lzdFJlYWR5KHJlcy5EYXRhKTsKICAgICAgICBzZWxmLmNvbm5lY3QoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zaG93LmVycm9yKCJUaGUgTm90aWNlU2VydmVyIElzIFVubGluZSIpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb25mIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb25mKG9wdGlvbikgewogICAgICAvL3NldCBub3RpY2UgaW5mbwogICAgICB0aGlzLmluZm8uc2VydmUgPSBvcHRpb24uc2VydmU7CiAgICAgIHRoaXMuaW5mby5wbGF0ZSA9IG9wdGlvbi5wbGF0ZTsKICAgICAgdGhpcy5pbmZvLnVzZXIubmFtZSA9IG9wdGlvbi5uYW1lOwogICAgICB0aGlzLmluZm8udXNlci5ndWlkID0gb3B0aW9uLnVzZXI7CiAgICAgIHRoaXMuaW5mby5jb2RlID0gb3B0aW9uLmNvZGU7CiAgICAgIHRoaXMudHRsID0gb3B0aW9uLmlzVFRMOyAvL3NldCBub3RpY2UgcmVxdWVzdAoKICAgICAgdmFyIHByZXggPSBvcHRpb24uaXNUVEwgPyAiaHR0cHM6Ly8iIDogImh0dHA6Ly8iOwogICAgICBheGlvcy5ub3RpY2Uuc2VydmUgPSBwcmV4ICsgb3B0aW9uLnNlcnZlOwogICAgICB0aGlzLmluaXQodGhpcy5pbmZvKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXJ2ZXJBZGRyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXJ2ZXJBZGRyKCkgewogICAgICB2YXIgcHJleCA9IHRoaXMuaXNUVEwgPyAiaHR0cHM6Ly8iIDogImh0dHA6Ly8iOwogICAgICByZXR1cm4gcHJleCArIHRoaXMuc2VydmU7CiAgICB9CiAgfSwgewogICAga2V5OiAibm90aWNlR2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBub3RpY2VHZXQodXJsLCBwYXIpIHsKICAgICAgdmFyIHVyaSA9ICIvbm90aWNlL2FwaSIgKyB1cmw7CiAgICAgIGF4aW9zLm5vdGljZS5zZXJ2ZSA9IHRoaXMuc2VydmVyQWRkcigpOwogICAgICByZXR1cm4gX25vdGljZUdldCh1cmksIHBhcik7CiAgICB9CiAgfSwgewogICAga2V5OiAibm90aWNlUG9zdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbm90aWNlUG9zdCh1cmwsIHBhcikgewogICAgICB2YXIgcHJleCA9ICcvbm90aWNlL2FwaSc7CiAgICAgIHZhciB1cmkgPSBwcmV4ICsgdXJsOwogICAgICByZXR1cm4gX25vdGljZVBvc3QodXJsLCBwYXIpOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbm5lY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbm5lY3QoKSB7CiAgICAgIGlmICghdGhpcy5pbmZvLnRva2VuKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciBwcmV4ID0gdGhpcy50dGwgPyAid3NzOi8vIiA6ICJ3czovLyI7CiAgICAgIHRoaXMuc29jdXJlID0gbmV3IFdlYlNvY2tldChwcmV4ICsgdGhpcy5pbmZvLnNlcnZlICsgIi9ub3RpY2Uvd3Mvc3Vic2NyaWJlP3Rva2VuPSIgKyB0aGlzLmluZm8udG9rZW4pOwoKICAgICAgdGhpcy5zb2N1cmUub25vcGVuID0gZnVuY3Rpb24gKCkgewogICAgICAgIHNlbGYuY29tcGxhdGUoc2VsZik7CiAgICAgIH07CgogICAgICB0aGlzLnNvY3VyZS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShlLmRhdGEpOwogICAgICAgIHNlbGYubWVzc2FnZShkYXRhKTsKICAgICAgfTsKCiAgICAgIHRoaXMuc29jdXJlLmNsb3NlID0gZnVuY3Rpb24gKGUpIHsvL3NlbGYuY2xvc2UoKTsKICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWdpc3RlckluZm8iLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWdpc3RlckluZm8gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHBhcjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBwYXIgPSB7CiAgICAgICAgICAgICAgICAgIHVzZXI6IHRoaXMuaW5mby51c2VyLmd1aWQsCiAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5mby51c2VyLm5hbWUsCiAgICAgICAgICAgICAgICAgIHBsYXRlOiB0aGlzLmluZm8ucGxhdGUsCiAgICAgICAgICAgICAgICAgIGNvZGU6IHRoaXMuaW5mby5jb2RlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gX25vdGljZUdldCgnL25vdGljZS9hcGkvcmVnaXN0ZXIvY3VzdG9tZXInLCBwYXIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVySW5mbygpIHsKICAgICAgICByZXR1cm4gX3JlZ2lzdGVySW5mby5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gcmVnaXN0ZXJJbmZvOwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gTm90aWNlOwp9KCk7CgpleHBvcnQgZGVmYXVsdCBOb3RpY2U7"},{"version":3,"sources":["D:/GaeaProject/jpn_medical_web/utils/noticeSDK/index.js"],"names":["conshow","axios","noticeGet","noticePost","Notice","option","complate","ttl","info","serve","plate","code","token","user","guid","name","socure","conf","self","Promise","resolve","reject","e","close","to","type","msg","JSON","stringify","relayer","error","send","notify","title","content","order","sender","length","data","cb","WebSocket","registerInfo","then","res","Data","Token","Code","registReady","connect","catch","isTTL","prex","notice","init","url","par","uri","serverAddr","onopen","onmessage","parse","message"],"mappings":"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","sourcesContent":["/*\r\n * @author yuzy\r\n * @version 1.0.0\r\n * @date 2020.4.15\r\n * @todo about independent API requests,axios in current dependent environment\r\n*/\r\nimport conshow from './console.js'\r\nimport axios,{noticeGet,noticePost} from './axios.js'\r\n\r\nclass Notice {\r\n\tconstructor(option,complate) {\r\n\t\tthis.ttl = false,\r\n\t\tthis.info = {\r\n\t\t\tserve:\"\",\r\n\t\t\tplate:\"\",\r\n\t\t\tcode:\"\",\r\n\t\t\ttoken:\"\",\r\n\t\t\tuser:{\r\n\t\t\t\tguid:\"\",\r\n\t\t\t\tname:\"\",\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.socure = null;\r\n\t\tif(option){\r\n\t\t\tthis.conf(option)\r\n\t\t\tif(complate)\r\n\t\t\t\tthis.complate = complate;\r\n\t\t}\r\n\t}\r\n\t/* @type interface\r\n\t * @remaks This is an interface called when the onopen even of WS is triggered\r\n\t*/\r\n\tcomplate(complate){\r\n\t\tlet self = this;\r\n\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\tif(complate)\r\n\t\t\t\tresolve(self);\r\n\t\t})\r\n\t}\r\n\tmessage(e){\r\n\t\t\r\n\t}\r\n\tclose(){\r\n\t\tif(this.socure)\r\n\t\t\tthis.socure.close();\r\n\t}\r\n\trelay(to,info,type){\r\n\t\tif(!info)return;\r\n\t\tlet msg = \"\";\r\n\t\tif(typeof info !== \"string\"){\r\n\t\t\tmsg = JSON.stringify(info)\r\n\t\t}else{\r\n\t\t\tmsg = info\r\n\t\t}\r\n\t\tlet relayer = this.relayer(to,msg,type)\r\n\t\tif(!this.socure){\r\n\t\t\tconshow.error(\"ws is Uninstanced \")\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.socure.send(JSON.stringify(relayer))\t\t\r\n\t}\r\n\trelayer(to,msg,type){\r\n\t\treturn {\r\n\t\t\t\"Token\":this.info.token,\r\n\t\t\t\"Type\":\"relay\",\r\n\t\t\t\"From\":{\"Name\":this.info.user.name,\"Guid\":this.info.user.guid},\r\n\t\t\t\"Data\":{\r\n\t\t\t\t\"Message\":msg,\r\n\t\t\t\t\"Accept\":{\"Guid\":to},\r\n\t\t\t\t\"Type\":type,\r\n\t\t\t},\r\n\t\t}\t\r\n\t}\r\n\tsend(to,info,type,notify,title,content,order){\r\n\t\tif(!info)return;\r\n\t\tlet msg = \"\";\r\n\t\tif(typeof info !== \"string\"){\r\n\t\t\tmsg = JSON.stringify(info)\r\n\t\t}else{\r\n\t\t\tmsg = info\r\n\t\t}\r\n\t\tlet sender = this.sender(to,msg,type,notify,title,content,order)\r\n\t\tif(!this.socure){\r\n\t\t\tconshow.error(\"ws is Uninstanced \")\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.socure.send(JSON.stringify(sender))\t\t\r\n\t}\r\n\tsendSocure(info){\r\n\t\tif(!this.socure){\r\n\t\t\tconshow.error(\"ws is Uninstanced \")\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.socure.send(JSON.stringify(info))\r\n\t}\r\n\tsender(to,msg,type,notify,title,content,order){\r\n\t\treturn {\r\n\t\t\t\"Token\":this.info.token,\r\n\t\t\t\"Type\":\"info\",\r\n\t\t\t\"From\":{\"Name\":this.info.user.name,\"Guid\":this.info.user.guid},\r\n\t\t\t\"Data\":{\r\n\t\t\t\t\"Message\":msg,\r\n\t\t\t\t\"Accept\":{\"Guid\":to},\r\n\t\t\t\t\"Type\":type?type:\"group\",\r\n\t\t\t\t\"Notify\":{\r\n\t\t\t\t\t\"Activate\":notify,\r\n\t\t\t\t\t\"Type\":\"\",\r\n\t\t\t\t\t\"Title\":notify?title.length > 0?title:this.info.user.name:\"\",\r\n\t\t\t\t\t\"Content\":content,\r\n\t\t\t\t\t\"Order\":order\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}\t\r\n\t}\r\n\tregistReady(data,cb){\r\n\t\tif(cb){\r\n\t\t\tcb(data)\r\n\t\t}\r\n\t}\r\n\tinit(){\r\n\t\tif(!WebSocket){\r\n\t\t\tconshow.error(\"Current Browser Is't Support WebSocket!\")\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet self = this;\r\n\t\t//get notice token\r\n\t\tthis.registerInfo().then((res)=>{\r\n\t\t\tself.info.token = res.Data.Token;\r\n\t\t\tself.info.code = res.Data.Code;\r\n\t\t\tself.registReady(res.Data);\r\n\t\t\tself.connect();\r\n\t\t}).catch((e)=>{\r\n\t\t\tconshow.error(\"The NoticeServer Is Unline\")\r\n\t\t})\r\n\t}\r\n\tconf(option){\r\n\t\t//set notice info\r\n\t\tthis.info.serve = option.serve;\r\n\t\tthis.info.plate = option.plate;\r\n\t\tthis.info.user.name = option.name;\r\n\t\tthis.info.user.guid = option.user;\r\n\t\tthis.info.code = option.code;\r\n\t\tthis.ttl = option.isTTL;\r\n\t\t//set notice request\r\n\t\tlet prex = option.isTTL?\"https://\":\"http://\";\r\n\t\taxios.notice.serve = prex+option.serve;\r\n\t\tthis.init(this.info);\r\n\t}\r\n\tserverAddr(){\r\n\t\tlet prex = this.isTTL?\"https://\":\"http://\";\r\n\t\treturn prex + this.serve\r\n\t}\r\n\tnoticeGet(url,par){\r\n\t\tlet uri = \"/notice/api\"+url\r\n\t\taxios.notice.serve = this.serverAddr();\r\n\t\treturn noticeGet(uri,par)\r\n\t}\r\n\tnoticePost(url,par){\r\n\t\tlet prex = '/notice/api'\r\n\t\tlet uri = prex + url\r\n\t\treturn noticePost(url,par)\r\n\t}\r\n\tconnect(){\r\n\t\tif(!this.info.token){\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet self = this;\r\n\t\tlet prex = this.ttl?\"wss://\":\"ws://\";\r\n\t\tthis.socure = new WebSocket(prex+this.info.serve+\"/notice/ws/subscribe?token=\"+this.info.token);\r\n\t\tthis.socure.onopen = ()=>{\r\n\t\t\tself.complate(self);\r\n\t\t}\r\n\t\tthis.socure.onmessage = (e)=>{\r\n\t\t\tlet data = JSON.parse(e.data)\r\n\t\t\tself.message(data)\r\n\t\t}\r\n\t\tthis.socure.close = (e) => {\r\n\t\t\t//self.close();\r\n\t\t}\r\n\t}\r\n\tasync registerInfo(){\r\n\t\tlet par = {\r\n\t\t\tuser:this.info.user.guid,\r\n\t\t\tname:this.info.user.name,\r\n\t\t\tplate:this.info.plate,\r\n\t\t\tcode:this.info.code\r\n\t\t};\r\n\t\treturn await noticeGet('/notice/api/register/customer',par);\r\n\t}\r\n\t\r\n}\r\nexport default Notice;"]}]}